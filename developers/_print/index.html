<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://neurodesk.org/developers/><link rel=alternate type=application/rss+xml href=https://neurodesk.org/developers/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=https://neurodesk.org/static/favicons/favicon.ico><link rel=apple-touch-icon href=https://neurodesk.org/static/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-192x192.png sizes=192x192><title>Developer Documentation | Neurodesk</title>
<meta name=description content="Documentation for Developers"><meta property="og:url" content="https://neurodesk.org/developers/"><meta property="og:site_name" content="Neurodesk"><meta property="og:title" content="Developer Documentation"><meta property="og:description" content="Documentation for Developers"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Developer Documentation"><meta itemprop=description content="Documentation for Developers"><meta itemprop=dateModified content="2025-10-31T13:45:22+10:00"><meta itemprop=wordCount content="13"><meta name=twitter:card content="summary"><meta name=twitter:title content="Developer Documentation"><meta name=twitter:description content="Documentation for Developers"><link rel=preload href=https://neurodesk.org/scss/main.min.2f0e7dd254a8510650f53c8ffbf7f9af0cc4e0d57d8872fb80c52b2440db9e88.css as=style integrity="sha256-Lw590lSoUQZQ9TyP+/f5rwzE4NV9iHL7gMUrJEDbnog=" crossorigin=anonymous><link href=https://neurodesk.org/scss/main.min.2f0e7dd254a8510650f53c8ffbf7f9af0cc4e0d57d8872fb80c52b2440db9e88.css rel=stylesheet integrity="sha256-Lw590lSoUQZQ9TyP+/f5rwzE4NV9iHL7gMUrJEDbnog=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.8.2 integrity="sha512-l7pkV1dOURFyHCeH8I4fK9lCkQKuqhlsTCqRl3zktifDlB8oTUJ+mJPgYkK9kHpUut8j1iPquTv32t6hvTPv3g==" crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z9774J59Y"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4Z9774J59Y")}</script></head><body class=td-section><header><nav class="td-navbar navbar-expand-xl navbar-dark bg-dark"><div class="container-fluid flex-md-row"><a class=navbar-brand href=https://neurodesk.org/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" viewBox="0 0 560.3 82.7"><defs><style>.st0{isolation:isolate}.st1{fill:#6ba442}.st2{fill:#fff}</style></defs><g class="st0"><path class="st2" d="M30.2 73.4h-9.9v-60h9.8l33.3 44.8V13.4h10.1v60H63.4L30.1 29.1v44.3z"/><path class="st2" d="M85.8 13.4h45l-1.4 10.3-33.8-.2v13.6l20.1-.2v11.4H95.6v13.5H129l1.8 11.6h-45v-60z"/><path class="st2" d="M141.4 13.4h9.9v50.2h28.2V13.4h9.9v51.4c0 1.2-.2 2.3-.7 3.3-.4 1-1.1 2-1.8 2.7-.8.8-1.7 1.4-2.8 1.8-1.1.4-2.2.7-3.3.7h-30.7c-1.2.0-2.3-.2-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7s-.7-2.2-.7-3.3V13.4z"/><path class="st2" d="M244.7 34.8c0 4.6-1.4 7.9-4.3 10-4 2.9-8.4 4.4-13.2 4.4l17.5 24.3h-12.1l-14.7-24h-9.5v24h-8.5V13.4h29.8c10 0 15 4.9 15 14.6v6.8zm-36.3 6h15.2c3.9-.2 6.6-.7 8-1.6 2.6-1.8 3.9-2.9 3.9-3.5V29c0-2.2-.6-3.9-1.7-5-1.4-1.4-3-2.1-4.7-2.1h-20.8v18.9z"/><path class="st2" d="M306.5 59.4c0 4.8-.3 7.7-.6 8.7-.3.9-.9 1.8-1.8 2.8s-1.7 1.3-3.1 1.8c-1.3.5-3.6.7-6.8.7h-27.1c-1.2.0-2.8-.2-5-.6-2.5-.5-3.9-1.1-4.4-1.8-.9-1.5-1.6-2.4-1.8-2.7-.4-.6-.7-3.6-.7-8.7V42.1c0-8.8.0-14.1.2-15.9.0-2.6.3-5 .7-7.4.1-.8.7-1.7 1.7-2.7.6-.7 2.1-1.3 4.4-1.8 1.9-.4 3.5-.7 5-.7h27.1c3.5.0 5.7.1 6.8.6 1.3.5 2.3 1.1 3.1 1.9.9.8 1.5 1.7 2 2.7.4.8.6 3.3.6 7.4l.2 16.7c0 8.1-.1 13.6-.3 16.7zM265.4 23.3v40h31.2v-40h-31.2z"/></g><g class="st0"><path class="st1" d="M316.2 73.4v-60l31.3.3c2.5.0 5.4.6 8.7 1.9 2.6 1 4.8 2.4 6.6 4.3 2 2 3.4 4.2 4.3 6.6 1 3 1.5 5.9 1.5 8.7v17.3c0 3.2-.5 6.1-1.5 8.7s-2.4 4.8-4.2 6.6-4 3.2-6.6 4.2-5.5 1.5-8.7 1.5h-31.3zm30.7-11.2c4.9.0 8-.7 9.2-2 2.1-2.3 3.2-5.8 3.2-10.4v-14c.2-1.9-.2-3.6-1.1-5.2-.8-1.5-1.8-2.8-2.9-3.9-1.1-1.1-2.4-1.9-3.9-2.4-1.5-.6-3-.8-4.4-.8h-21.3v38.8h21.2z"/><path class="st1" d="M381 13.4h45l-1.4 10.3-33.8-.2v13.6l20.1-.2v11.4h-20.1v13.5h33.4l1.8 11.6h-45v-60z"/><path class="st1" d="M446.4 46.5c-1.1.0-2.2-.3-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7-.4-1-.7-2.2-.7-3.3V22.1c0-1.2.2-2.3.7-3.3s1.1-2 1.8-2.7 1.7-1.4 2.8-1.8 2.2-.7 3.3-.7h29.1c1.2.0 2.3.2 3.3.7s1.9 1.1 2.7 1.8c1.1 1 1.7 2 1.8 2.8l.7 3.3v6.7l-9 2.7v-7.7h-28.7v14.3l29.1.5c1.2.0 2.3.3 3.3.7 1.1.4 2 1.1 2.8 1.8.8.8 1.4 1.7 1.8 2.7.4 1 .7 2.2.7 3.3V65c0 1.2-.2 2.3-.7 3.3-.4 1-1.1 2-1.8 2.7-.8.8-1.7 1.4-2.7 1.8-1 .4-2.1.7-3.3.7h-30c-1.2.0-2.3-.2-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7-.4-1-.7-2.2-.7-3.3v-7.7l9.5-1.6v7.7h28.7V47.2l-28.7-.5z"/><path class="st1" d="M505.4 13.4v23.9l26.2-23.9h12.9l-30.8 27.4 32.1 32.6h-12.9l-27.5-28.1v28.1h-10.6v-60h10.6z"/></g></svg></span></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=main_navbar><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/overview/><span>Overview</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/getting-started/><span>Getting Started</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/tutorials-examples/><span>Tutorials & Examples</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class="nav-link active" href=https://neurodesk.org/developers/><span class=active>Developer Documentation</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/NeuroDesk target=_blank><span>GitHub</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/contact/><span>Contact</span></a></li></ul><div class="navbar-nav d-lg-block"><div class=td-search><div class=td-search--algolia id=docsearch-0></div></div></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=https://neurodesk.org/developers/>Return to the regular view of this page</a>.</p></div><h1 class=title>Developer Documentation</h1><div class=lead>Documentation for Developers</div><ul><li>1: <a href=#pg-15acb6ef1ed3edc78a7113c206dd126e>Contributors</a></li><ul></ul><li>2: <a href=#pg-95ed7c5681d2faa66b764be030124e59>Architecture</a></li><ul><li>2.1: <a href=#pg-0520384e83c6213075507d31fd6fd347>Neurodesk Architecture</a></li><li>2.2: <a href=#pg-d2ee0d937ef9e23352513cee17667503>Neurodesktop Release Process</a></li><li>2.3: <a href=#pg-4e0ebcb307acf80f9f0f9d5fcf769e45>Neurodesktop Dev</a></li><li>2.4: <a href=#pg-daf4fef4a749d3712ee99e4574cbffa0>Transparent Singularity</a></li><li>2.5: <a href=#pg-81ddb8249d10bc700318da3e58f62452>Neurodesk CVMFS</a></li><ul><li>2.5.1: <a href=#pg-04dd4e6ae6bbe52a03f55bcb638dc486>Setup CVMFS Proxy</a></li><li>2.5.2: <a href=#pg-273eda215917497c767f6fea98e380ed>CVMFS architecture</a></li><li>2.5.3: <a href=#pg-8b8736e6153542cb7323021b49fd589d>Setup Stratum 0 server</a></li><li>2.5.4: <a href=#pg-320ee66f16d941ee549b4c6f15785e99>Setup Stratum 1 server</a></li></ul><li>2.6: <a href=#pg-669e1a928395f271b6b3631700262b49>Project Roadmap</a></li></ul><li>3: <a href=#pg-3fdc5ca5ab10c2f214ba422d54be89ed>Neurocontainer Copilot</a></li><ul><li>3.1: <a href=#pg-77478fc8ce418679f80a98d1e40d206a>Neurocontainer Copilot using Google Jules agent</a></li><li>3.2: <a href=#pg-f19f5336d3c8ebc9ac62ea459a76c6a7>Neurocontainer Copilot using OpenAI Codex agent</a></li></ul><li>4: <a href=#pg-7e2108573f98b809e31e3e5bf5d798b0>Neurodesk Copilot</a></li><ul><li>4.1: <a href=#pg-b275c81a65b2320e18dd1193d107f048>Neurodesk Copilot using Github Copilot</a></li><li>4.2: <a href=#pg-bd6ad28aba68349830c14c1ad624a029>Neurodesk Copilot using Local LLMs</a></li></ul><li>5: <a href=#pg-f347e8a68ab88feb2dbd40d7268e3b66>Documentation</a></li><ul><li>5.1: <a href=#pg-f556320c2e00a62a008d540586d14239>Indexing with Algolia</a></li><li>5.2: <a href=#pg-43caa4b2a10189e2fa053496d5d16e07>Running the Neurodesk Site Locally (Hugo + Docsy)</a></li><li>5.3: <a href=#pg-a45e5d089d2a56d76b93d20eaac320a1>Contribute to Neurodesk.org</a></li></ul><li>6: <a href=#pg-fd28a1b5010f2ff02bb480802674fb39>How to add new tools</a></li><ul><li>6.1: <a href=#pg-ae3fdb0ea1bbf7f813b0c7171d5c7390>New tool</a></li><li>6.2: <a href=#pg-9a4c3c021b4878c5ba917719c268b2d3>Update tool in Neurodesk</a></li></ul><li>7: <a href=#pg-ed33889da9e74d124a826193f81ff4a2>Designer Guide</a></li><ul></ul><li>8: <a href=#pg-91d9c64996dd040e999de5afb93dce95>Interfacing</a></li><ul></ul></ul><div class=content><h2 id=video-tutorial>Video tutorial</h2><p>See below for a 57 minute tutorial video from ReproNim 2023<div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/HY-TqE6I2oo?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div></p></div></div><div class=td-content><h1 id=pg-15acb6ef1ed3edc78a7113c206dd126e>1 - Contributors</h1><div class=lead>This section acknowledges the contributions made to the project.</div><div style="border-left:4px solid #4caf50;background-color:#f0fdf4;padding:1em 1em .1em;margin:1em 0">If you contributed to the project, please list yourself here with a description of your contribution.<p>Please consult
<a href=https://github.com/NeuroDesk/neurodesk.github.io/blob/main/.github/content-templates/contributor-format.md target=_blank rel="noopener noreferrer">this page
</a>for the contributor&rsquo;s template. Simply copy the code and insert your information.</p></div><p>We try to update this page based on the git commit history:</p><ul><li><a href=https://github.com/NeuroDesk/neurodesktop/graphs/contributors target=_blank rel=noopener>Neurodesk Contributors</a></li><li><a href=https://github.com/NeuroDesk/neurocommand/graphs/contributors target=_blank rel=noopener>Neurocommand Contributors</a></li><li><a href=https://github.com/NeuroDesk/neurocontainers/graphs/contributors target=_blank rel=noopener>Neurocontainers Contributors</a></li><li><a href=https://github.com/NeuroDesk/neurodesk.github.io/graphs/contributors target=_blank rel=noopener>Neurodesk Website Contributors</a></li><li><a href=https://github.com/NeuroDesk/transparent-singularity/graphs/contributors target=_blank rel=noopener>Transparent Singularity Contributors</a></li></ul><p><strong>Core team</strong>: <a href=#steffen-bollmann----stebo85>Steffen</a>, <a href=#aswin-narayanan----aswinnarayanan>Aswin</a>, <a href=#ashley-stewart----astewartau>Ashley</a>, <a href=#joshua-scarsbrook----vbitz>Josh</a>, <a href=#xincheng-ye----yexincheng>Xincheng</a>, <a href=#thuy-dao----iishiishii>Thuy</a>, <a href=#monika-doerig----monidoerig>Moni</a>, <a href=#mich%c3%a8le-masson-trottier----micmas>Michèle</a>, <a href=#marshall-xu----kmarshallx>Marshall</a></p><h2 id=steffen-bollmann----stebo85><strong>Steffen Bollmann</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/stebo85 target=_blank rel="noopener noreferrer">stebo85</a></h2><h3 id=university-of-queensland-australia>University of Queensland, Australia</h3><ul><li>Funding: Oracle Cloud (114k AUD), ECR Knowledge Exchange & Translation Fund (42k AUD), ARDC (CI for $566k AUD)</li><li>system architecture</li><li>CVMFS container deployment</li><li>initial desktop container prototype</li><li>container build scripts</li><li>application containers (afni, aslprep, code, convert3D, freesurfer, hdbet, minc mriqc, romeo, spm12, tgvqsm, bart, fatsegnet, fsl, itksnap, lcmodel, mritools, niistat, qsmxt, root, slicer, trackvis, ants, cat12, conn, diffusiontoolkit, gimp, mricrogl, mrtrix3, rstudio, slicersalt, surfice, vesselapp, bidstools, clearswi, connectomeworkbench, dsistudio, fmriprep, julia, mrtrix3tissue, palm rabies, spinalcordtoolbox)</li><li>migrating container recipes and bugfixes to neurodocker upstream (fsl, ants)</li><li>documentation</li><li>tutorials (QSM, SWI, Unwrapping, lcmodel, freesurfer)</li><li>google colab support</li><li>outreach (e.g. Mastodon, talks at conferences, youtube videos)</li></ul><h2 id=aswin-narayanan----aswinnarayanan><strong>Aswin Narayanan</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/aswinnarayanan target=_blank rel="noopener noreferrer">aswinnarayanan</a></h2><h3 id=national-imaging-facility-australia>National Imaging Facility, Australia</h3><ul><li>Funding: ARDC (CI for $566k AUD)</li><li>Neurocontainer devops</li><li>Neurodesktop development</li><li>Neurocommand installer rewrite</li><li>Neurodesk Play & Kubernetes implementation</li><li>Jupyter notebook support</li><li>Hugo website build and documentation</li></ul><h2 id=thuy-dao----iishiishii><strong>Thuy Dao</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/iishiishii target=_blank rel="noopener noreferrer">iishiishii</a></h2><h3 id=university-of-queensland-australia-1>University of Queensland, Australia</h3><ul><li>Application search tool with lunr</li><li>platform independent GUI application (Neurodeskapp)</li><li>application container development (civet)</li><li>documentation (github workflow)</li><li>automated building and testing of example documentation from jupyter notebooks</li><li>development of interactive container building tool</li></ul><h2 id=joshua-scarsbrook----vbitz><strong>Joshua Scarsbrook</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/Vbitz target=_blank rel="noopener noreferrer">Vbitz</a></h2><h3 id=university-of-queensland-australia-2>University of Queensland, Australia</h3><ul><li>build.sh to build.yaml</li><li>neurocontainers</li></ul><h2 id=oren-civier----civier><strong>Oren Civier</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/civier target=_blank rel="noopener noreferrer">civier</a></h2><h3 id=swinburne-university-of-technology-australia>Swinburne University of Technology, Australia</h3><ul><li>Funding: ARDC Australian Electrophysiology Data Analytics PlaTform (AEDAPT) (CI for $566k AUD) - contributing to initial conceptualisation, EOI writeup, scope of project, proposal writeup, teaming up with the Australian Imaging Service (AIS), recruiting collaborators, assisting collaborators with case studies</li><li>Design: leading the Virtual Neuro Machine (VNM) hackathon project in the 2020 OHBM BrainHack, where the first version of Neurodesktop was developed</li><li>Development: allowing Neurodesk containers running in Neurodesktop to access sshfs mounts</li><li>Development: template for container recipe documentation</li><li>Development: software application containers - developer (bidscoin, MATLAB; in progress: MMVT)</li><li>Development: software application containers - facilitator (Fieldtrip, running arbitrary scripts using compiled MATLAB containers; in progress: SOVABIDS)</li><li>Documentation: for developers (contribution to &ldquo;add tools&rdquo;, configuring Github)</li><li>Documentation: for users (copy and paste troubleshooting, accessing storage, installation on different platforms, using ARDC Virtual Desktop Service, screenshots)</li><li>Documentation: Neurodesk&rsquo;s original logo</li><li>User testing: HPC, NECTAR, Mac, Linux, ARDC Virtual Desktop Service</li><li>User testing: VNC and RDP interfaces, including multiple concurrent users</li><li>Outreach: providing assistance to nodes of the Australian National Imaging Facility with installing/using Neurodesk</li><li>Administration: one of Neurodesk/AEDAPT representatives in ARCOS, AIS and NECTAR Interactive Analytics committees and working groups</li><li>Papers: co-author Neurodesk manuscript (in preparation; contribution to initial outline, input on first draft), co-author proceedings of the OHBM Brainhack 2021 (to be published in Aperture)</li></ul><h2 id=tom-johnstone----tomemotion><strong>Tom Johnstone</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/TomEmotion target=_blank rel="noopener noreferrer">TomEmotion</a></h2><h3 id=swinburne-university-of-technology-australia-1>Swinburne University of Technology, Australia</h3><ul><li>Funding: ARDC (PI for $566k AUD)</li><li>Application Container (sigviewer)</li></ul><h2 id=monika-doerig----monidoerig><strong>Monika Doerig</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/MoniDoerig target=_blank rel="noopener noreferrer">MoniDoerig</a></h2><h3 id=university-of-queensland-australia-3>University of Queensland, Australia</h3><ul><li>Interactive notebook examples (Workflows: MRIQC, pyBIDS, Nipype on Neurodesk, RISE Slideshow of a Jupyter Notebook; Structural Imaging: Brain extraction with different software packages; Diffusion Imaging: MRtrix; Functional Imaging: AFNI, FSL, FSL&rsquo;s fMRI Data Analysis via Nipype)</li><li>Co-organization of the Neurodesk Workshop in Zurich, Switzerland (2024), and presentation of &ldquo;Nipype on Neurodesk&rdquo;</li></ul><h2 id=michèle-masson-trottier----micmas><strong>Michèle Masson-Trottier</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/micmas target=_blank rel="noopener noreferrer">micmas</a></h2><h3 id=the-university-of-queensland-australia>The University of Queensland, Australia</h3><ul><li>Redesigning the Neurodesk logo</li><li>Redesigning neurodesk.github.io</li><li>User documentation</li></ul><h2 id=nikhil-kumar-jangamreddy----jnikhilreddy><strong>Nikhil Kumar Jangamreddy</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/jnikhilreddy target=_blank rel="noopener noreferrer">jnikhilreddy</a></h2><h3 id=the-university-of-queensland-australia-1>The University of Queensland, Australia</h3><ul><li>Language models</li><li>Container building</li></ul><h2 id=angela-renton----air2310><strong>Angela Renton</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/air2310 target=_blank rel="noopener noreferrer">air2310</a></h2><h3 id=university-of-queensland-australia--école-polytechnique-fédérale-de-lausanne-switzerland--université-de-genèvre-switzerland>University of Queensland, Australia \ École Polytechnique Fédérale de Lausanne, Switzerland \ Université de Genèvre, Switzerland</h3><ul><li>Tutorials (MNE-Python, Tutorial template)</li><li>graphics for website (layer diagram)</li><li>documentation</li><li>user testing</li><li><a href=https://doi.org/10.1038/s41592-023-02145-x target=_blank rel=noopener>neurodesk paper</a> lead author</li></ul><h2 id=thomas-shaw----thomshaw92><strong>Thomas Shaw</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/thomshaw92 target=_blank rel="noopener noreferrer">thomshaw92</a></h2><h3 id=university-of-queensland-australia-4>University of Queensland, Australia</h3><ul><li>Win, Mac, Linux startup scripts</li><li>initial transparent singularity prototype</li><li>application container development (LASHiS, ASHS)</li><li>user testing</li></ul><h2 id=fernanda-ribeiro----felenitaribeiro><strong>Fernanda Ribeiro</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/felenitaribeiro target=_blank rel="noopener noreferrer">felenitaribeiro</a></h2><h3 id=justus-liebig-university-giessen-germany-university-of-queensland-australia>Justus-Liebig University Giessen, Germany; University of Queensland, Australia</h3><ul><li>application container development (deepretinotopy)</li><li>documentation</li></ul><h2 id=ashley-stewart----astewartau><strong>Ashley Stewart</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/astewartau target=_blank rel="noopener noreferrer">astewartau</a></h2><h3 id=university-of-queensland-australia-5>University of Queensland, Australia</h3><ul><li>application container development (qsmxt)</li><li>presentation of neurodesk at OHBM Brainhack 2022 and OHBM educational course 2022</li></ul><h2 id=xincheng-ye----yexincheng><strong>Xincheng Ye</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/yexincheng target=_blank rel="noopener noreferrer">yexincheng</a></h2><h3 id=university-of-queensland-australia-6>University of Queensland, Australia</h3><ul><li>application container development (delphi, slicer, deepretinotopy)</li></ul><h2 id=marshall-xu----kmarshallx><strong>Marshall Xu</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/KMarshallX target=_blank rel="noopener noreferrer">KMarshallX</a></h2><h3 id=university-of-queensland-australia-7>University of Queensland, Australia</h3><ul><li>application container development (VesselBoost)</li></ul><h2 id=david-white----davidjwhite33><strong>David White</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/DavidjWhite33 target=_blank rel="noopener noreferrer">DavidjWhite33</a></h2><h3 id=swinburne-university-of-technology-australia-2>Swinburne University of Technology, Australia</h3><ul><li>application container development (Brainstorm, eeglab, fieldtrip)</li></ul><h2 id=yaroslav-halchenko----yarikoptic><strong>Yaroslav Halchenko</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/yarikoptic target=_blank rel="noopener noreferrer">yarikoptic</a></h2><h3 id=dartmouth-college-usa>Dartmouth College, USA</h3><ul><li>datalad neurocontainers</li></ul><h2 id=martin-grignard----martingrignard><strong>Martin Grignard</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/MartinGrignard target=_blank rel="noopener noreferrer">MartinGrignard</a></h2><h3 id=university-of-liège-belgium>University of Liège, Belgium</h3><ul><li>initial neurocommand prototype and menu system builder, including apps.json idea</li></ul><h2 id=akshaiy-narayanan----akshaiy91><strong>Akshaiy Narayanan</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/Akshaiy91 target=_blank rel="noopener noreferrer">Akshaiy91</a></h2><h3 id=the-university-of-auckland-new-zealand>The University of Auckland, New Zealand</h3><ul><li>bugfixes in neurodesktop, added tool for diskusage, checking of new version script</li></ul><h2 id=kelly-garner----garner-code><strong>Kelly Garner</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/garner-code target=_blank rel="noopener noreferrer">garner-code</a></h2><h3 id=university-of-new-south-wales-australia-the-university-of-queensland-australia>University of New South Wales, Australia. The University of Queensland, Australia</h3><ul><li>tutorials (fmriprep, mriqc, physio batch)</li><li>user testing on MacOS</li></ul><h2 id=paris-lyons--><strong>Paris Lyons</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/ target=_blank rel="noopener noreferrer"></a></h2><h3 id=swinburne-university-of-technology-australia-3>Swinburne University of Technology, Australia</h3><ul><li>design of the first Neurodesk Logo</li><li>project management of AEDAPT project</li></ul><h2 id=lars-kasper----mrikasper><strong>Lars Kasper</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/mrikasper target=_blank rel="noopener noreferrer">mrikasper</a></h2><h3 id=university-of-toronto-canada--university-of-zurich-and-eth-zurich-zurich-switzerland>University of Toronto, Canada \ University of Zurich and ETH Zurich, Zurich, Switzerland</h3><ul><li>tutorials (physio)</li><li>Application Container (physio)</li></ul><h2 id=judy-d-zhu----jd-zhu><strong>Judy D Zhu</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/JD-Zhu target=_blank rel="noopener noreferrer">JD-Zhu</a></h2><h3 id=macquarie-university-australia>Macquarie University, Australia</h3><ul><li>application containers (fieldtrip)</li><li>tutorials (fieldtrip)</li></ul><h2 id=korbinian-eckstein----korbinian90><strong>Korbinian Eckstein</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/korbinian90 target=_blank rel="noopener noreferrer">korbinian90</a></h2><h3 id=the-university-of-queensland-australia-2>The University of Queensland, Australia</h3><ul><li>documentation</li><li>application container development (qsmxt, mrsi)</li></ul><h2 id=stefanie-evas----neuro-sevas><strong>Stefanie Evas</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/neuro-sevas target=_blank rel="noopener noreferrer">neuro-sevas</a></h2><h3 id=university-of-adelaide-australia--csiro-australia>University of Adelaide, Australia \ CSIRO, Australia</h3><ul><li>documentation</li><li>application containers</li></ul><h2 id=jeryn-chang----cadaei-yuvxvs><strong>Jeryn Chang</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/Cadaei-Yuvxvs target=_blank rel="noopener noreferrer">Cadaei-Yuvxvs</a></h2><h3 id=the-university-of-queensland-australia-3>The University of Queensland, Australia</h3><ul><li>application container development (oshyx)</li></ul><h2 id=sin-kim----kimsin98><strong>Sin Kim</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/kimsin98 target=_blank rel="noopener noreferrer">kimsin98</a></h2><h3 id=korea-advanced-institute-of-science--technology-south-korea>Korea Advanced Institute of Science & Technology, South Korea</h3><ul><li>tutorial (datalad)</li></ul><h2 id=jakub-kaczmarzyk----kaczmarj><strong>Jakub Kaczmarzyk</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/kaczmarj target=_blank rel="noopener noreferrer">kaczmarj</a></h2><h3 id=stony-brook-university-usa>Stony Brook University, USA</h3><ul><li>proof of concept contributions</li></ul><h2 id=alan-hockings----ahockings><strong>Alan Hockings</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/ahockings target=_blank rel="noopener noreferrer">ahockings</a></h2><h3 id=the-university-of-queensland-australia-4>The University of Queensland, Australia</h3><ul><li>application container development (mricron)</li></ul><h2 id=kexin-lou----kaxnn><strong>Kexin Lou</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/Kaxnn target=_blank rel="noopener noreferrer">Kaxnn</a></h2><h3 id=the-university-of-queensland-australia-5>The University of Queensland, Australia</h3><ul><li>application container development (mne/torch,esilpd)</li></ul><h2 id=laurentius-renzo-huber----layerfmri><strong>Laurentius (Renzo) Huber</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/layerfMRI target=_blank rel="noopener noreferrer">layerfMRI</a></h2><h3 id=national-institutes-health-usa>National Institutes Health, USA</h3><ul><li>application container development (laynii)</li></ul><h2 id=marcel-zwiers----marcelzwiers><strong>Marcel Zwiers</strong> - <img src=https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png width=25 alt="GitHub logo"> <a href=https://github.com/marcelzwiers target=_blank rel="noopener noreferrer">marcelzwiers</a></h2><h3 id=radboud-university-netherlands>Radboud University, Netherlands</h3><ul><li>bidscoin</li></ul><div style="border-left:4px solid #4caf50;background-color:#fff;padding:1em;margin:1em 0"><h2 id=steering-committee-members-without-code-contributions>Steering Committee members without code contributions:</h2><ul><li>Ryan Sullivan, University of Sydney, Key User, Steering Committee</li><li>Thomas Close, University of Sydney, Key User, Scientific/Subject Expert Advisory Board</li><li>Wojtek Goscinski, Monash University, Steering Committee, Technical Advisory Board</li><li>Tony Hannan, Florey Institute of Neuroscience and Mental Health, Scientific/Subject Expert Advisory Board</li><li>Gary Egan, Monash University, Steering Committee</li><li>Paul Sowman, Macquarie University, Key User, Scientific/Subject Expert Advisory Board</li><li>Marta Garrido, University of Melbourne, Key User, Scientific/Subject Expert Advisory Board</li><li>Patrick Johnston, Queensland University of Technology, Key User, Scientific/Subject Expert Advisory Board</li><li>Aina Puce, Indiana University, Key User, Scientific/Subject Expert Advisory Board</li><li>Franco Pestilli, Indiana University, Technical Advisory Board</li><li>Levin Kuhlmann, Monash University, Key User, Scientific/Subject Expert Advisory Board</li><li>Gershon Spitz, Monash Epworth Rehabilitation Research Centre, Key User, Scientific/Subject Expert Advisory Board</li><li>David Abbott, Florey Institute of Neuroscience and Mental Health, Key User, Scientific/Subject Expert Advisory Board</li><li>Megan Campbell, The University of Newcastle, Key User, Scientific/Subject Expert Advisory Board</li><li>Nigel Rogasch, University of Adelaide, Key User, Scientific/Subject Expert Advisory Board</li><li>Will Woods, Swinburne University of Technology, Key User</li><li>Satrajit Ghosh, Massachusetts Institute of Technology, Provision of advice only</li></ul></div></div><div class=td-content style=page-break-before:always><h1 id=pg-95ed7c5681d2faa66b764be030124e59>2 - Architecture</h1><div class=lead>The architecture of the Neurodesk ecosystem</div><h2 id=overview>Overview</h2><p>Neurodesk is built with a modular architecture that combines several key components to provide a flexible and powerful neuroimaging analysis environment. The diagram below illustrates how these components work together:</p><div style="text-align:center;margin:2em 0"><img src=https://neurodesk.org/static/developers/architecture/NeurodeskPaperFigureWithOpenRecon.png style=max-width:1000px;width:100% alt="Neurodesk Architecture Overview"><p style=margin-top:1em;font-style:italic>Neurodesk ecosystem architecture showing the main components and their interactions</p></div></div><div class=td-content><h1 id=pg-0520384e83c6213075507d31fd6fd347>2.1 - Neurodesk Architecture</h1><div class=lead>The architecture of the Neurodesk ecosystem</div><p><img src=https://neurodesk.org/static/developers/architecture/neurodesk-components/NeurodeskArchitecture.png alt=architecture title=architecture></p><h2 id=neurodesktop-recommended-for-beginners>Neurodesktop: Recommended for Beginners</h2><p><em>Neurodesktop</em> is a compact Docker container with a browser-accessible virtual desktop that allows you develop and implement data analysis, pre-equipped with basic fMRI and EEG analysis tools.
To get started, see: <a href=https://neurodesk.org/docs/getting-started/neurodesktop>Neurodesktop</a> (<a href=https://github.com/NeuroDesk/neurodesktop target=_blank rel=noopener>Github</a>)</p><ul><li>docker container with interface modifications</li><li>contains tools necessary to manage workflows in sub-containers: vscode, git</li><li>CI: builds docker image and tests if it runs; tests if CVMFS servers are OK before deployment</li><li>CD: pushes images to github & docker registry</li></ul><h2 id=neurocommand>Neurocommand:</h2><p><em>Neurocommand</em> offers the option to install and manage multiple distinct containers for more advanced users who prefer a command-line interface. <em>Neurocommand</em> is the recommended interface for users seeking to use Neurodesk in high performance computing (HPC) environments.</p><p>To get started, see: <a href=https://neurodesk.org/docs/getting-started/neurocommand>Neurocommand</a> (<a href=https://github.com/NeuroDesk/neurocommand target=_blank rel=noopener>Github</a>)</p><ul><li>script to install and manage multiple containers using transparent singularity on any linux system</li><li>this repo also handles the creation of menu entries in a general form applicable to different desktop environments</li><li>this repo can be re-used in other projects like CVL and when installing it on bare-metal workstations</li><li>CI: tests if containers can be installed</li><li>CD: this repo checks if containers requested in apps.json file are available on object storage and if not converts the singularity containers based on the docker containers and uploads them to object storage</li></ul><h2 id=transparent-singularity>transparent-singularity:</h2><p><em>transparent-singularity</em> offers seamless access to applications installed in <em>neurodesktop</em> and <em>neurocommand</em>, treating containerised software as native installations.</p><p>More info: <a href=https://neurodesk.org/developers/architecture/transparent_singularity>transparent-singularity</a> (<a href=https://github.com/NeuroDesk/transparent-singularity target=_blank rel=noopener>Github</a>)</p><ul><li>script to install neuro-sub-containers, installers are called by neurocommand</li><li>this repo provides a way of using our containers on HPCs for large scale processing of the pipelines (including the support of SLURM and other job schedulers)</li><li>CI: test if exposing of binaries from container works</li></ul><h2 id=tinyrange-integration>TinyRange Integration</h2><p>To ensure accessibility for users without privileged system access (root/admin permissions), Neurodesk has integrated <a href=https://github.com/tinyrange/tinyrange target=_blank rel=noopener>TinyRange</a>, a lightweight container runtime that operates without requiring root privileges. This integration represents a significant advancement in making neuroimaging tools accessible to all users, regardless of their system permissions.</p><div style="text-align:center;margin:2em 0"><img src=https://neurodesk.org/static/developers/architecture/neurodesk-components/tinyrange.png alt="TinyRange Architecture" style=max-width:800px;width:100%></div><p>TinyRange provides:</p><ul><li>Rootless container execution</li><li>User-space networking</li><li>Simplified container management</li><li>Seamless integration with Neurodesk&rsquo;s interface</li><li>Cross-platform compatibility</li></ul><p>This solution is particularly valuable in environments where users don&rsquo;t have administrative privileges, such as shared computing facilities or institutional workstations.</p><h2 id=neurocontainers>Neurocontainers:</h2><p><em>neurocontainers</em> contains scripts for building sub-containers for neuroimaging data-analysis software. These containers can be used alongside <em>neurocommand</em> or <em>transparent-singularity</em>.</p><p>To get started, see: <a href=https://neurodesk.org/docs/getting-started/neurocontainers>Neurocontainers</a> (<a href=https://github.com/NeuroDesk/neurocontainers target=_blank rel=noopener>Github</a>)</p><ul><li>build scripts for neuro-sub-containers</li><li>CI: building and testing of containers</li><li>CD: pushing containers to github and dockerhub registry</li></ul><h2 id=neurodocker>Neurodocker:</h2><p><em>Neurodocker</em> is a command-line program that generates custom Dockerfiles and Singularity recipes for neuroimaging and minifies existing containers.</p><p>More info: <a href=https://github.com/NeuroDesk/neurodocker target=_blank rel=noopener>Github</a></p><ul><li>fork of neurodocker project</li><li>provides recipes for our containers built</li><li>we are providing pull requests back of recipes</li><li>CI: handled by <a href=https://github.com/ReproNim/neurodocker target=_blank rel=noopener>neurodocker</a> - testing of generating container recipes</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-d2ee0d937ef9e23352513cee17667503>2.2 - Neurodesktop Release Process</h1><div class=lead>A description of what to do to create new release of our Neurodesktop</div><h2 id=neurodesktop>Neurodesktop:</h2><ol><li>Check if the last automated build ran OK: <a href=https://github.com/NeuroDesk/neurodesktop/actions target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/actions</a></li><li>Run this build date and test if everything is ok and no regression happened</li><li>Check what changes where made since the last release: <a href=https://github.com/NeuroDesk/neurodesktop/commits/main target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/commits/main</a></li><li>Summarize the main changes and copy this to the Release History: <a href=https://neurodesk.org/docs/overview/release-history/ target=_blank rel=noopener>https://neurodesk.org/docs/overview/release-history/</a></li><li>Change the version of the latest desktop in <a href=https://github.com/NeuroDesk/neurodesk.github.io/blob/main/data/neurodesktop.toml target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesk.github.io/blob/main/data/neurodesktop.toml</a></li><li>Commit all changes</li><li>Tweet a quick summary of the changes and announce new version: <a href=https://masto.ai/@Neurodesk target=_blank rel=noopener>https://masto.ai/@Neurodesk</a></li></ol><h2 id=neurodesk-app>Neurodesk App:</h2><h3 id=release-process>Release process</h3><p>Follow these steps to create a new release of the <a href=https://github.com/NeuroDesk/neurodesk-app target=_blank rel=noopener>Neurodesk App</a>.</p><ol><li><p>If there&rsquo;s new version of Neurodesktop image, Github Action will PR with updated jupyter_neurodesk_version in neurodesktop.toml file. Double-check and merge this PR.</p></li><li><p>Create a new release on GitHub as <code>pre-release</code>. Set the release <code>tag</code> to the value of target application version and prefix it with <code>v</code> (for example <code>v1.0.0</code> for Neurodesk App version <code>1.0.0</code>). Enter release title and release notes. Release needs to stay as <code>pre-release</code> for GitHub Actions to be able to attach installers to the release.</p></li><li><p>Make sure that application is building, installing and running properly.</p></li><li><p>In the main branch, create a branch preferably with the name <code>release-v&lt;new-version></code>. Add a commit with the version changes in package.json file. This is necessary for GitHub Actions to be able to attach installers to the release. (for example <code>"version": "1.0.0"</code>).</p></li><li><p>GitHub Actions will automatically create installers for each platform (Linux, macOS, Windows) and upload them as release assets. Assets will be uploaded only if a release of type <code>pre-release</code> with tag matching the Neurodesk App&rsquo;s version with a <code>v</code> prefix is found. For example, if the Neurodesk App version in the PR is <code>1.0.0</code>, the installers will be uploaded to a release that is flagged as <code>pre-release</code> and has a tag <code>v1.0.0</code>. New commits to this branch will overwrite the installer assets of the release.</p></li><li><p>Once all the changes are complete, and installers are uploaded to the release then publish the release.</p></li></ol><h3 id=update-macos-certificate>Update MacOS certificate</h3><p>Follow these step-by-step instructions to generate and export the required Macos certificate for Neurodesk App release.</p><ol><li>Launch the &ldquo;Keychain Access&rdquo; application on your Mac, go to &ldquo;Certificate Assistant.&rdquo;</li><li>Request Certificate from Certificate Authority: Within &ldquo;Certificate Assistant,&rdquo; select &ldquo;Request a Certificate from a Certificate Authority.&rdquo;</li><li>Follow the URL to access the Apple Developer website: <a href=https://developer.apple.com/account/resources/certificates/add target=_blank rel=noopener>https://developer.apple.com/account/resources/certificates/add</a>, upload the generated certificate.</li><li>After uploading the certificate, download the resulting file provided by the Apple Developer website.</li><li>Import the Certificate in Keychain.</li><li>Right-click the imported certificate in &ldquo;Keychain Access.&rdquo;, choose &ldquo;Export&rdquo; and save it in .p12 format.</li><li>Convert the .p12 file to Base64 using the following command:
<code>openssl base64 -in neurodesk_certificate.p12</code></li></ol><h3 id=update-the-github-secrets-for-publish-workflow>Update the GitHub Secrets for Publish workflow</h3><p>⚠️ <strong>Security Note</strong>: These values contain highly sensitive credentials. Never commit them to version control or share them publicly. Always store them as GitHub repository secrets.</p><p>To set these secrets, go to your repository Settings → Secrets and variables → Actions → Repository secrets:</p><p><strong>APPLEID</strong>: Email address associated with your Apple Developer account</p><ul><li>Found in: Your Apple ID account settings</li></ul><p><strong>APPLEIDPASS</strong>: App-Specific Password for your Apple account</p><ul><li>Found in: <a href=https://account.apple.com/ target=_blank rel=noopener>https://account.apple.com/</a> → Sign-In and Security → App-Specific Passwords</li><li>Generate a new one if needed for this specific use case</li></ul><p><strong>APPLE_TEAM_ID</strong>: Your Apple Developer Team ID</p><ul><li>Found in: <a href=https://developer.apple.com/ target=_blank rel=noopener>https://developer.apple.com/</a> → Account name (top right corner) → View Membership → Membership Details section</li><li>Look for the &ldquo;Team ID&rdquo; field</li></ul><p><strong>CSC_KEY_PASSWORD</strong>: The password you set when converting the certificate in the &ldquo;Update MacOS certificate&rdquo; section above</p><p><strong>CSC_LINK</strong>: Base64-encoded content of the .p12 certificate file</p><ul><li>This is the output from the <code>openssl base64 -in neurodesk_certificate.p12</code> command in step 7 above</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-4e0ebcb307acf80f9f0f9d5fcf769e45>2.3 - Neurodesktop Dev</h1><div class=lead>Testing the latest dev version of Neurodesktop</div><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>For development and testing only. Not recommended for production use</div><h2 id=building-neurodesktop-dev>Building neurodesktop-dev</h2><p>Dev builds can be triggered by Neurodesk admins from <a href=https://github.com/NeuroDesk/neurodesktop/actions/workflows/build-neurodesktop-dev.yml target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/actions/workflows/build-neurodesktop-dev.yml</a></p><h2 id=running-latest-neurodesktop-dev>Running latest neurodesktop-dev</h2><h3 id=linux>Linux</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker pull vnmd/neurodesktop-dev:latest
</span></span><span style=display:flex><span>sudo docker run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --shm-size<span style=color:#0550ae>=</span>1gb -it --cap-add SYS_ADMIN <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --security-opt apparmor:unconfined --device<span style=color:#0550ae>=</span>/dev/fuse <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --name neurodesktop-dev <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -p 8888:8888 -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>dev <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  vnmd/neurodesktop-dev:latest</span></span></code></pre></div></div><h3 id=windows>Windows</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker pull vnmd/neurodesktop-dev:latest
</span></span><span style=display:flex><span>docker run --shm-size<span style=color:#0550ae>=</span>1gb -it --cap-add SYS_ADMIN --security-opt apparmor:unconfined --device<span style=color:#0550ae>=</span>/dev/fuse --name neurodesktop -v C:/neurodesktop-storage:/neurodesktop-storage -p 8888:8888 -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>dev vnmd/neurodesktop-dev:latest</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-daf4fef4a749d3712ee99e4574cbffa0>2.4 - Transparent Singularity</h1><div class=lead>For more advanced users who wish to use Transparent Singularity directly</div><p>Transparent singularity is here <a href=https://github.com/NeuroDesk/transparent-singularity/ target=_blank rel=noopener>https://github.com/NeuroDesk/transparent-singularity/</a></p><p>This project allows to use singularity containers transparently on HPCs, so that an application inside the container can be used without adjusting any scripts or pipelines (e.g. nipype).</p><h2 id=important-add-bind-points-to-bashrc-before-executing-this-script>Important: add bind points to .bashrc before executing this script</h2><p>This script expects that you have adjusted the Singularity Bindpoints in your .bashrc, e.g.:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#cf222e>export</span> SINGULARITY_BINDPATH<span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;/gpfs1/,/QRISdata,/data&#34;</span></span></span></code></pre></div></div><h2 id=this-gives-you-a-list-of-all-tested-images-available-in-neurodesk>This gives you a list of all tested images available in neurodesk:</h2><p><a href=https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/log.txt target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/log.txt</a></p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>curl -s https://raw.githubusercontent.com/NeuroDesk/neurocommand/main/cvmfs/log.txt</span></span></code></pre></div></div><h2 id=clone-repo-into-a-folder-with-the-intended-image-name>Clone repo into a folder with the intended image name</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>git clone https://github.com/NeuroDesk/transparent-singularity convert3d_1.0.0_20210104</span></span></code></pre></div></div><h2 id=install>Install</h2><p>This will create scripts for every binary in the container located in the $DEPLOY_PATH inside the container. It will also create activate and deactivate scripts and module files for lmod (<a href=https://lmod.readthedocs.io/en/latest target=_blank rel=noopener>https://lmod.readthedocs.io/en/latest</a>)</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>cd convert3d_1.0.0_20210104
</span></span><span style=display:flex><span>./run_transparent_singularity.sh convert3d_1.0.0_20210104</span></span></code></pre></div></div><h2 id=options-for-transparent-singularity>Options for Transparent singularity:</h2><ul><li><code>--storage</code> - this option can be used to force a download from docker, e.g.: <code>--storage docker</code></li><li><code>--container</code> - this option can be used to explicitly define the container name to be downloaded</li><li><code>--unpack</code> - this will unpack the singularity container so it can be used on systems that do not allow to open simg / sif files for security reasons, e.g.: <code>--unpack true</code></li><li><code>--singularity-opts</code> - this will be passed on to the singularity call, e.g.: <code>--singularity-opts '--bind /cvmfs'</code></li></ul><h1 id=use-in-module-system-lmod>Use in module system LMOD</h1><p>Add the module folder path to $MODULEPATH</p><h1 id=manual-activation-and-deactivation-in-case-module-system-is-not-available-this-will-add-the-paths-to-the-bashrc>Manual activation and deactivation (in case module system is not available). This will add the paths to the .bashrc</h1><h2 id=activate>Activate</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>source activate_convert3d_1.0.0_20210104.sh</span></span></code></pre></div></div><h2 id=deactivate>Deactivate</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>source deactivate_convert3d_1.0.0_20210104.sif.sh</span></span></code></pre></div></div><h2 id=uninstall-container-and-cleanup>Uninstall container and cleanup</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./ts_uninstall.sh</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-81ddb8249d10bc700318da3e58f62452>2.5 - Neurodesk CVMFS</h1><div class=lead>How to interact with our CVMFS service.</div></div><div class=td-content><h1 id=pg-04dd4e6ae6bbe52a03f55bcb638dc486>2.5.1 - Setup CVMFS Proxy</h1><div class=lead>Setup CVMFS Proxy server</div><p>If you want more speed in a region one way could be to setup another Stratum 1 server or a proxy. We currently don&rsquo;t run any proxy servers but it would be important for using it on a cluster.</p><h1 id=setup-a-cvmfs-proxy-server>Setup a CVMFS proxy server</h1><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install -y squid</span></span></code></pre></div></div><p>Open the <code>squid.conf</code>and use the following configuration</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vi /etc/squid/squid.conf</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#57606a># List of local IP addresses (separate IPs and/or CIDR notation) allowed to access your local proxy</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#acl local_nodes src YOUR_CLIENT_IPS</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Destination domains that are allowed</span>
</span></span><span style=display:flex><span>acl stratum_ones dstdomain <span style=color:#0550ae>.</span>neurodesk<span style=color:#0550ae>.</span>org <span style=color:#0550ae>.</span>openhtc<span style=color:#0550ae>.</span>io <span style=color:#0550ae>.</span>cern<span style=color:#0550ae>.</span>ch <span style=color:#0550ae>.</span>gridpp<span style=color:#0550ae>.</span>rl<span style=color:#0550ae>.</span>ac<span style=color:#0550ae>.</span>uk <span style=color:#0550ae>.</span>opensciencegrid<span style=color:#0550ae>.</span>org
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Squid port</span>
</span></span><span style=display:flex><span>http_port <span style=color:#0550ae>3128</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Deny access to anything which is not part of our stratum_ones ACL.</span>
</span></span><span style=display:flex><span>http_access allow stratum_ones
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Only allow access from our local machines</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#http_access allow local_nodes</span>
</span></span><span style=display:flex><span>http_access allow localhost
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Finally, deny all other access to this proxy</span>
</span></span><span style=display:flex><span>http_access deny all
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>minimum_expiry_time <span style=color:#0550ae>0</span>
</span></span><span style=display:flex><span>maximum_object_size <span style=color:#0550ae>1024</span> MB
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cache_mem <span style=color:#0550ae>128</span> MB
</span></span><span style=display:flex><span>maximum_object_size_in_memory <span style=color:#0550ae>128</span> KB
</span></span><span style=display:flex><span><span style=color:#57606a># 5 GB disk cache</span>
</span></span><span style=display:flex><span>cache_dir ufs <span style=color:#0550ae>/</span><span style=color:#cf222e>var</span><span style=color:#0550ae>/</span>spool<span style=color:#0550ae>/</span>squid <span style=color:#0550ae>5000</span> <span style=color:#0550ae>16</span> <span style=color:#0550ae>256</span></span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo squid -k parse
</span></span><span style=display:flex><span>sudo systemctl start squid
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> squid
</span></span><span style=display:flex><span>sudo systemctl status squid
</span></span><span style=display:flex><span>sudo systemctl restart squid</span></span></code></pre></div></div><p>Then add the proxy to the cvmfs config:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>CVMFS_HTTP_PROXY=&#34;http://proxy-address:3128&#34;</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-273eda215917497c767f6fea98e380ed>2.5.2 - CVMFS architecture</h1><div class=lead>CVMFS architecture</div><p>We store our singularity containers unpacked on CVMFS. We tried the DUCC tool in the beginning, but it was causing too many issues with dockerhub and we were rate limited. The script to unpack our singularity containers is here: <a href=https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/sync_containers_to_cvmfs.sh target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/sync_containers_to_cvmfs.sh</a></p><p>It gets called by a cronjob on the CVMFS Stratum 0 server and relies on the log.txt file being updated via an action in the neurocommand repository (<a href=https://github.com/NeuroDesk/neurocommand/blob/main/.github/workflows/upload_containers_simg.sh target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/blob/main/.github/workflows/upload_containers_simg.sh</a>)</p><p>The Stratum 1 servers then pull this repo from Stratum 0 and our desktops mount these repos (configured here: <a href=https://github.com/NeuroDesk/neurodesktop/blob/main/Dockerfile target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/blob/main/Dockerfile</a>)</p><p>The startup script (<a href=https://github.com/NeuroDesk/neurodesktop/blob/main/config/jupyter/before_notebook.sh target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/blob/main/config/jupyter/before_notebook.sh</a>) sets up CVMFS and tests which server is fastest during the container startup.</p><p>This can also be done manually:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cvmfs_talk -i neurodesk.ardc.edu.au host info
</span></span><span style=display:flex><span>sudo cvmfs_talk -i neurodesk.ardc.edu.au host probe
</span></span><span style=display:flex><span>cvmfs_config stat -v neurodesk.ardc.edu.au</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-8b8736e6153542cb7323021b49fd589d>2.5.3 - Setup Stratum 0 server</h1><div class=lead>Host a Stratum 0 server</div><h2 id=setup-a-stratum-0-server>Setup a Stratum 0 server:</h2><h3 id=setup-storage>Setup Storage</h3><p>(would object storage be better? -> see comment below under next iteration ideas)</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lsblk -l
</span></span><span style=display:flex><span>sudo mkfs.ext4 /dev/vdb
</span></span><span style=display:flex><span>sudo mkdir /storage
</span></span><span style=display:flex><span>sudo mount /dev/vdb /storage/ -t auto
</span></span><span style=display:flex><span>sudo chown ec2-user /storage/
</span></span><span style=display:flex><span>sudo chmod a+rwx /storage/</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vi /etc/fstab
</span></span><span style=display:flex><span>/dev/vdb  /storage    auto    defaults,nofail   <span style=color:#0550ae>0</span>  <span style=color:#0550ae>2</span></span></span></code></pre></div></div><h3 id=setup-server>Setup server</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install vim htop gcc git screen
</span></span><span style=display:flex><span>sudo timedatectl set-timezone Australia/Brisbane
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo yum install -y https://ecsft.cern.ch/dist/cvmfs/cvmfs-release/cvmfs-release-latest.noarch.rpm
</span></span><span style=display:flex><span>sudo yum install -y cvmfs cvmfs-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> httpd
</span></span><span style=display:flex><span>sudo systemctl restart httpd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># sudo systemctl stop firewalld</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># restore keys:</span>
</span></span><span style=display:flex><span>sudo mkdir /etc/cvmfs/keys/incoming
</span></span><span style=display:flex><span>sudo chmod a+rwx /etc/cvmfs/keys/incoming
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> connections/cvmfs_keys/
</span></span><span style=display:flex><span>scp neuro* ec2-user@203.101.226.164:/etc/cvmfs/keys/incoming
</span></span><span style=display:flex><span>sudo mv /etc/cvmfs/keys/incoming/* /etc/cvmfs/keys/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#backup keys: </span>
</span></span><span style=display:flex><span><span style=color:#57606a>#mkdir cvmfs_keys</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#scp opc@158.101.127.61:/etc/cvmfs/keys/neuro* .</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_server mkfs -o <span style=color:#953800>$USER</span> neurodesk.ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> /storage
</span></span><span style=display:flex><span>sudo mkdir -p cvmfs-storage/srv/
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> /srv/
</span></span><span style=display:flex><span>sudo mv cvmfs/ /storage/cvmfs-storage/srv/
</span></span><span style=display:flex><span>sudo ln -s /storage/cvmfs-storage/srv/cvmfs/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> /var/spool
</span></span><span style=display:flex><span>sudo mkdir /storage/spool
</span></span><span style=display:flex><span>sudo mv cvmfs/ /storage/spool/
</span></span><span style=display:flex><span>sudo ln -s  /storage/spool/cvmfs .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cvmfs_server transaction neurodesk.ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cvmfs_server publish neurodesk.ardc.edu.au</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vi /etc/cron.d/cvmfs_resign</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0550ae>0</span> <span style=color:#0550ae>11</span> * * <span style=color:#0550ae>1</span> root /usr/bin/cvmfs_server resign neurodesk.ardc.edu.au</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat /etc/cvmfs/keys/neurodesk.ardc.edu.au.pub</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuV9JBs9uXBR83qUs7AiE
</span></span><span style=display:flex><span>nSQfvh6VCdNigVzOfRMol5cXsYq3cFy/Vn1Nt+7SGpDTQArQieZo4eWC9ww2oLq0
</span></span><span style=display:flex><span>vY1pWyAms3Y4i+IUmMbwNifDU4GQ1KN9u4zl9Peun2YQCLE7mjC0ZLQtLM7Q0Z8h
</span></span><span style=display:flex><span>NwP8jRJTN+u8mRKzkyxfSMLscVMKhm2pAwnT1zB9i3bzVV+FSnidXq8rnnzNHMgv
</span></span><span style=display:flex><span>tfqx1h0gVyTeodToeFeGG5vq69wGZlwEwBJWVRGzzr+a8dWNBFMJ1HxamrBEBW4P
</span></span><span style=display:flex><span>AxOKGHmQHTGbo+tdV/K6ZxZ2Ry+PVedNmbON/EPaGlI8Vd0fascACfByqqeUEhAB
</span></span><span style=display:flex><span>dQIDAQAB
</span></span><span style=display:flex><span>-----END PUBLIC KEY-----</span></span></code></pre></div></div><h2 id=next-iteration-of-this>Next iteration of this:</h2><h3 id=use-object-storage>use object storage?</h3><ul><li>current implementation uses block storage, but this makes increasing the volume size a bit more work</li><li>we couldn&rsquo;t get object storage to work on Oracle as it assumes AWS S3 -> Try again on AWS</li></ul><h3 id=optimize-settings-for-repositories-for-container-images>Optimize settings for repositories for Container Images</h3><p>from the CVMFS documentation:
Repositories containing Linux container image contents (that is: container root file systems) should use overlayfs as a union file system and have the following configuration:</p><pre><code>CVMFS_INCLUDE_XATTRS=true
CVMFS_VIRTUAL_DIR=true
</code></pre><p>Extended attributes of files, such as file capabilities and SElinux attributes, are recorded. And previous file system revisions can be accessed from the clients.</p><h2 id=currently-not-used>Currently not used</h2><p>We tested the DUCC tool in the beginning, but it was leading to too many docker pulls and we therefore replaced it with our own script: <a href=https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/sync_containers_to_cvmfs.sh target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/sync_containers_to_cvmfs.sh</a></p><p>This is the old DUCC setup</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install cvmfs-ducc.x86_64
</span></span><span style=display:flex><span>sudo -i
</span></span><span style=display:flex><span>dnf install -y yum-utils 
</span></span><span style=display:flex><span>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</span></span><span style=display:flex><span>dnf install docker-ce docker-ce-cli containerd.io
</span></span><span style=display:flex><span>systemctl <span style=color:#6639ba>enable</span> docker
</span></span><span style=display:flex><span>systemctl start docker
</span></span><span style=display:flex><span>docker version
</span></span><span style=display:flex><span>docker info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># leave root mode</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo groupadd docker
</span></span><span style=display:flex><span>sudo usermod -aG docker <span style=color:#953800>$USER</span>
</span></span><span style=display:flex><span>sudo chown root:docker /var/run/docker.sock
</span></span><span style=display:flex><span>newgrp docker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>vi convert_appsjson_to_wishlist.sh
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>DUCC_DOCKER_REGISTRY_PASS</span><span style=color:#0550ae>=</span>configure_secret_password_here_and_dont_push_to_github
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> neurodesk
</span></span><span style=display:flex><span>git pull
</span></span><span style=display:flex><span>./gen_cvmfs_wishlist.sh
</span></span><span style=display:flex><span>cvmfs_ducc convert recipe_neurodesk_auto.yaml
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> ..
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chmod +x convert_appsjson_to_wishlist.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>git clone https://github.com/NeuroDesk/neurodesk/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># setup cron job</span>
</span></span><span style=display:flex><span>sudo vi /etc/cron.d/cvmfs_dockerpull
</span></span><span style=display:flex><span>*/5 * * * * opc <span style=color:#6639ba>cd</span> ~ <span style=color:#0550ae>&amp;&amp;</span> bash /home/opc/convert_appsjson_to_wishlist.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#vi recipe.yaml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>##version: 1</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#user: vnmd</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#cvmfs_repo: neurodesk.ardc.edu.au</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#output_format: &#39;$(scheme)://$(registry)/vnmd/thin_$(image)&#39;</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#input:</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#- &#39;https://registry.hub.docker.com/vnmd/tgvqsm_1.0.0:20210119&#39;</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#- &#39;https://registry.hub.docker.com/vnmd/itksnap_3.8.0:20201208&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#cvmfs_ducc convert recipe_neurodesk.yaml</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#cvmfs_ducc convert recipe_unpacked.yaml</span></span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-320ee66f16d941ee549b4c6f15785e99>2.5.4 - Setup Stratum 1 server</h1><div class=lead>Host a Stratum 1 server</div><p>The stratum 1 servers for the desktop are configured here: <a href=https://github.com/NeuroDesk/neurodesktop/blob/main/Dockerfile target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/blob/main/Dockerfile</a></p><p>If you want more speed in a region one way could be to setup another Stratum 1 server or a proxy.</p><h1 id=setup-a-stratum-1-server-this-setup-works-best-on-rocky-linux-9>Setup a Stratum 1 server (This setup works best on Rocky Linux 9):</h1><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install -y https://ecsft.cern.ch/dist/cvmfs/cvmfs-release/cvmfs-release-latest.noarch.rpm
</span></span><span style=display:flex><span>sudo yum install -y cvmfs-server squid tmux
</span></span><span style=display:flex><span>sudo yum install -y python3-mod_wsgi 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo dnf install dnf-automatic -y
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> dnf-automatic-install.timer
</span></span><span style=display:flex><span>sudo systemctl status dnf-automatic-install
</span></span><span style=display:flex><span>sudo systemctl cat dnf-automatic-install.timer
</span></span><span style=display:flex><span>sudo vi /etc/dnf/automatic.conf
</span></span><span style=display:flex><span><span style=color:#57606a># check if automatic updates are downloaded and applied</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tmux new -s cvmfs
</span></span><span style=display:flex><span><span style=color:#57606a># return to session: tmux a -t cvmfs</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo sed -i <span style=color:#0a3069>&#39;s/Listen 80/Listen 127.0.0.1:8080/&#39;</span> /etc/httpd/conf/httpd.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>set</span> +H
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;http_port 80 accel&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;http_port 8000 accel&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;http_access allow all&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;cache_peer 127.0.0.1 parent 8080 0 no-query originserver&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;acl CVMFSAPI urlpath_regex ^/cvmfs/[^/]*/api/&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;cache deny !CVMFSAPI&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;cache_mem 128 MB&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo systemctl start httpd
</span></span><span style=display:flex><span>sudo systemctl start squid
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> httpd
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> squid
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#YOU NEED TO ADD YOUR GEO IP data here!</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;CVMFS_GEO_ACCOUNT_ID=APPLY_FOR_ONE_THIS_IS_a_SIX_DIGIT_NUMBER&#39;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/cvmfs/server.local
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;CVMFS_GEO_LICENSE_KEY=APPLY_FOR_ONE_THIS_IS_a_password&#39;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/cvmfs/server.local
</span></span><span style=display:flex><span>sudo chmod <span style=color:#0550ae>600</span> /etc/cvmfs/server.local
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo mkdir -p /etc/cvmfs/keys/ardc.edu.au/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;-----BEGIN PUBLIC KEY-----
</span></span></span><span style=display:flex><span><span style=color:#0a3069>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwUPEmxDp217SAtZxaBep
</span></span></span><span style=display:flex><span><span style=color:#0a3069>Bi2TQcLoh5AJ//HSIz68ypjOGFjwExGlHb95Frhu1SpcH5OASbV+jJ60oEBLi3sD
</span></span></span><span style=display:flex><span><span style=color:#0a3069>qA6rGYt9kVi90lWvEjQnhBkPb0uWcp1gNqQAUocybCzHvoiG3fUzAe259CrK09qR
</span></span></span><span style=display:flex><span><span style=color:#0a3069>pX8sZhgK3eHlfx4ycyMiIQeg66AHlgVCJ2fKa6fl1vnh6adJEPULmn6vZnevvUke
</span></span></span><span style=display:flex><span><span style=color:#0a3069>I6U1VcYTKm5dPMrOlY/fGimKlyWvivzVv1laa5TAR2Dt4CfdQncOz+rkXmWjLjkD
</span></span></span><span style=display:flex><span><span style=color:#0a3069>87WMiTgtKybsmMLb2yCGSgLSArlSWhbMA0MaZSzAwE9PJKCCMvTANo5644zc8jBe
</span></span></span><span style=display:flex><span><span style=color:#0a3069>NQIDAQAB
</span></span></span><span style=display:flex><span><span style=color:#0a3069>-----END PUBLIC KEY-----&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/cvmfs/keys/ardc.edu.au/neurodesk.ardc.edu.au.pub
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_server add-replica -o <span style=color:#953800>$USER</span> http://stratum0.neurodesk.cloud.edu.au/cvmfs/neurodesk.ardc.edu.au /etc/cvmfs/keys/ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># CVMFS will store everything in /srv/cvmfs so make sure there is enough space or create a symlink to a bigger storage volume</span>
</span></span><span style=display:flex><span><span style=color:#57606a># e.g.:</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#cd /storage</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#sudo mkdir -p cvmfs-storage/srv/</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#cd /srv/</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#sudo mv cvmfs/ /storage/cvmfs-storage/srv/</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#sudo ln -s /storage/cvmfs-storage/srv/cvmfs/ --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_server snapshot neurodesk.ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#If this keeps failing with errors like &#34;Processing chunks [21605 registered chunks]: failed to download #http://stratum0.neurodesk.cloud.edu.au/cvmfs/neurodesk.ardc.edu.au/data/03/99e1faa88d0d66a8707cdecdc9b063cc527e50 (17 - host data transfer cut short)</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#couldn&#39;t reach Stratum 0 - please check the network connection</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#terminate called after throwing an instance of &#39;ECvmfsException&#39;</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#  what():  PANIC: /home/sftnight/jenkins/workspace/CvmfsFullBuildDocker/CVMFS_BUILD_ARCH/docker-x86_64/CVMFS_BUILD_PLATFORM/cc9/build/BUILD/cvmfs-2.13.0/cvmfs/swissknife_pull.cc : 286</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#Download error</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#Aborted (core dumped)&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#Then this is a deep packet inspection issue on the side of the stratum 1. To get around this, create an SSH tunnel to the stratum 0 server and transfer via that tunnel:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#ssh -L 8081:localhost:80 ec2-user@stratum0.neurodesk.cloud.edu.au</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#sudo vi /etc/cvmfs/repositories.d/neurodesk.ardc.edu.au/server.conf</span>
</span></span><span style=display:flex><span><span style=color:#57606a># change this:</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#CVMFS_STRATUM0=http://stratum0.neurodesk.cloud.edu.au/cvmfs/neurodesk.ardc.edu.au</span>
</span></span><span style=display:flex><span><span style=color:#57606a># to this:</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#CVMFS_STRATUM0=http://localhost:8081/cvmfs/neurodesk.ardc.edu.au</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Then run the sync again</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;/var/log/cvmfs/*.log {
</span></span></span><span style=display:flex><span><span style=color:#0a3069>    weekly
</span></span></span><span style=display:flex><span><span style=color:#0a3069>    missingok
</span></span></span><span style=display:flex><span><span style=color:#0a3069>    notifempty
</span></span></span><span style=display:flex><span><span style=color:#0a3069>}&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/logrotate.d/cvmfs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;*/5 * * * * root output=$(/usr/bin/cvmfs_server snapshot -a -i 2&gt;&amp;1) || echo &#34;$output&#34; &#39;</span> <span style=color:#1f2328>|</span> sudo tee /etc/cron.d/cvmfs_stratum1_snapshot
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo yum install iptables
</span></span><span style=display:flex><span>sudo iptables -t nat -A PREROUTING -p tcp -m tcp --dport <span style=color:#0550ae>80</span> -j REDIRECT --to-ports <span style=color:#0550ae>8000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo systemctl disable firewalld 
</span></span><span style=display:flex><span>sudo systemctl stop firewalld 
</span></span><span style=display:flex><span><span style=color:#57606a># make sure that port 80 is open in the real firewall</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_server update-geodb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#test</span>
</span></span><span style=display:flex><span>curl --head http://YOUR_IP_OR_DNS/cvmfs/neurodesk.ardc.edu.au/.cvmfspublished</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-669e1a928395f271b6b3631700262b49>2.6 - Project Roadmap</h1><div class=lead>This page lists ideas we have planned for Neurodesk - If any of these things sound exciting to you, get in touch and we help you to become a contributor.</div><p>All things we are currently working on and are planning to do are listed here: <a href=https://github.com/orgs/NeuroDesk/projects/9/views/4 target=_blank rel=noopener>https://github.com/orgs/NeuroDesk/projects/9/views/4</a></p><p>The larger themes and subthemes are:</p><h1 id=streamlining-container-build-and-release-process>Streamlining container build and release process</h1><h2 id=improving-the-workflow-of-how-users-can-add-new-applications-to-neurodesk>Improving the workflow of how users can add new applications to Neurodesk</h2><p>Adding new applications to Neurodesk requires multiple steps and back-and-forth between contributors and maintainers. We are aiming to simplify this process by developing an interactive workflow based on our current interactive container builder and the existing github workflows.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/neurocontainers/issues/127 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/issues/127</a></li></ul><h2 id=standardizing-the-container-deployment>Standardizing the container deployment</h2><p>Currently, deploying the application containers happens through a connection of various custom scripts distributed across various repositories (apps.json in neurocommand repository, neurocontainers, transparent singularity).
We would like to adopt community standard tools, like SHPC, that can perform some of these tasks. The goal is to remove duplication of effort and maintenance.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/transparent-singularity/issues/7 target=_blank rel=noopener>https://github.com/NeuroDesk/transparent-singularity/issues/7</a></li><li><a href=https://github.com/NeuroDesk/neurocommand/issues/152 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/issues/152</a></li><li><a href=https://github.com/NeuroDesk/transparent-singularity/issues/8 target=_blank rel=noopener>https://github.com/NeuroDesk/transparent-singularity/issues/8</a></li><li><a href=https://github.com/NeuroDesk/neurocommand/issues/187 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/issues/187</a></li><li><a href=https://github.com/NeuroDesk/neurocontainers/issues/504 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/issues/504</a></li></ul><h2 id=reuse-and-citability-of-containers>Reuse and citability of containers</h2><p>Currently, there is no good way of describing and citing the individual software containers. We want to increase the reusability and citability of the software containers.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/neurocontainers/issues/218 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/issues/218</a></li><li><a href=https://github.com/NeuroDesk/neurocontainers/issues/217 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/issues/217</a></li><li><a href=https://github.com/NeuroDesk/neurocontainers/issues/142 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/issues/142</a></li><li><a href=https://github.com/NeuroDesk/neurocommand/issues/212 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/issues/212</a></li></ul><h1 id=improving-user-experience>Improving user experience</h1><h2 id=improving-documentation>Improving documentation</h2><p>We would love to have more tutorials and examples that help people perform Neuroimaging analyses in Neurodesk. When we developed our current documentation system (<a href=https://neurodesk.org/tutorials-examples/%29 target=_blank rel=noopener>https://neurodesk.org/tutorials-examples/)</a>, we wanted to develop an interactive documentation system that ensures that examples always work correctly because they are automatically tested. We have a first proof-of-concept that runs jupyter notebooks and converts them to a website: <a href=https://neurodesk.org/example-notebooks/intro.html target=_blank rel=noopener>https://neurodesk.org/example-notebooks/intro.html</a> - but currently errors are not flagged automatically and it needs manual checking.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/neurodesk.github.io/issues/54 target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesk.github.io/issues/54</a></li><li><a href=https://github.com/NeuroDesk/neurodesk.github.io/issues/373 target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesk.github.io/issues/373</a></li><li><a href=https://github.com/NeuroDesk/neurodesk.github.io/issues/37 target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesk.github.io/issues/37</a></li></ul><h2 id=facilitating-the-use-of-neurodesk-in-teaching-and-workshops>Facilitating the use of Neurodesk in teaching and workshops</h2><p>Neurodesk is a great fit for teaching Neuroimaging methods. Currently, however, it&rsquo;s not easy to run a custom Neurodesk instance for a larger group. We would like to make it easier for users to deploy Neurodesk for classes and workshops with a shared data storage location and we would love to support advanced features for cost saving (e.g. autoscaling, support of ARM processors) on various cloud providers (e.g. Google Cloud, Amazon, Azure, OpenStack, OpenShift).</p><h1 id=support-of-advanced-workflows>Support of advanced workflows</h1><h2 id=deeper-integration-of-containers-and-jupyter-notebook-system>Deeper Integration of containers and jupyter notebook system</h2><p>We want to integrate the software containers deeper into the jupyter notebook system. Ideally, it is possible to use a jupyter kernel from within a software container.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/neurocommand/issues/175 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/issues/175</a></li></ul><h2 id=support-of-scheduling-workflows>Support of scheduling workflows</h2><p>Currently, all Neurodesk work is entirely interactive. We want to add a way of scheduling workflows and jobs so that larger computations can be managed efficiently.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/neurodesktop/issues/97 target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/issues/97</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-3fdc5ca5ab10c2f214ba422d54be89ed>3 - Neurocontainer Copilot</h1><div class=lead>Neurocontainer Copilot: How to use LLM agents to automate Neurocontainer recipe generation in Neurodesk ecosystem</div></div><div class=td-content><h1 id=pg-77478fc8ce418679f80a98d1e40d206a>3.1 - Neurocontainer Copilot using Google Jules agent</h1><div class=lead>Neurocontainer Copilot: How to use LLM agents to automate Neurocontainer recipe generation in Neurodesk ecosystem.</div><p>While Neurodesk significantly reduces the friction associated with portability and reproducibility, incorporating new neuroimaging tools remains challenging. Incorporating new neuroimaging tools into Neurodesk is challenging due setting the correct environment variables, finding specific versions of the software dependencies, version requirements or specific build steps. However, writing accurate and efficient container recipes requires expertise in containerization technologies and knowledge of software dependencies. Neurocontainer Copilot can help identify these details from provided documentation (README or installation documentation) and code samples. The development involves the following steps: 1) We use existing neurocontainer recipes to generate the recipes for new tools using LLM agents. 2) We use Google Jules agent to automate the process of generating Neurocontainer recipes. 3) We use the generated recipes to create pull requests in the Neurocontainers repository, which can be reviewed and merged by the Neurocontainers team or user can use it to test the recipe locally.</p><p>In this example, we use Google Jules agent, to automate Neurocontainer recipe generation in Neurodesk ecosystem.</p><p>After logging in wth google, you can access <a href=https://jules.google target=_blank rel=noopener>Jules agent</a> dashboard. You can create an environment and use the <strong>neurocontainers GitHub repository</strong> as the base. Make sure to enable internet access so that the agent can search for relevant information online to assist with building accurate container recipes.</p><p>You can then start a new task, where you can provide the name of the tool you want to containerize, and the agent will generate a recipe for you. For example, if you want to containerize <code>hcp-asl</code>, you can provide following prompt:</p><blockquote><p>I want you to act as Neurodesk recipe generator, compile the dependency lists required for the Github repository and install them in the neurodocker container format. Please follow the notation in <a href=https://github.com/Neurodesk/neurocontainers/blob/main/builder/README.md target=_blank rel=noopener>https://github.com/Neurodesk/neurocontainers/blob/main/builder/README.md</a> carefully. Now create a docker build.yaml for recipes/hcp-asl/build.yaml based on the hcp-asl <a href=https://github.com/physimals/hcp-asl/blob/master/README.md target=_blank rel=noopener>https://github.com/physimals/hcp-asl/blob/master/README.md</a> repository README.md file, use neurocontainers GitHub repository it contains examples such as recipes/dsistudio/build.yaml. Note than if there are conda and pip install use appropriately. Please follow the notation in <a href=https://github.com/Neurodesk/neurocontainers/blob/main/builder/README.md target=_blank rel=noopener>https://github.com/Neurodesk/neurocontainers/blob/main/builder/README.md</a> properly. Run recipes/hcp-asl/build.yaml file and recursively modify the neurocontainers/recipes/hcp-asl/build.yaml file.</p></blockquote><p><img src=https://neurodesk.org/static/developers/recipe_generator/start_jules.png alt="Create Jules environment"></p><p>Create a new task by clicking on the &ldquo;Give me a plan&rdquo; button, and provide the prompt in the text box. You can also provide the link to the repository, so that the agent can access the documentation and code samples. Click on &ldquo;Give me a plan&rdquo; to start the task.</p><p><img src=https://neurodesk.org/static/developers/recipe_generator/approve_plan.png alt="Approve the plan"></p><p>Jules agent will then start generating the recipe for you. It will read the documentation and code samples, and generate the recipe in the neurodocker format. You can see the progress of the task as shown in the image below. The agent will also provide you with the output of the task, which you can use to create the recipe.</p><p>After the task is completed, you can see the output of the task as follows. The Jules agent will also provide you with build.yaml for hcp-asl recipe, which you can use to directly raise pull request to the neurocontainers repository. This recipe can act as You can also modify the recipe as per your requirements and test accordingly.</p><p><img src=https://neurodesk.org/static/developers/recipe_generator/final_output.png alt="Jules agent output"></p></div><div class=td-content style=page-break-before:always><h1 id=pg-f19f5336d3c8ebc9ac62ea459a76c6a7>3.2 - Neurocontainer Copilot using OpenAI Codex agent</h1><div class=lead>Neurocontainer Copilot: How to use LLM agents to automate Neurocontainer recipe generation in Neurodesk ecosystem.</div><p>While Neurodesk significantly reduces the friction associated with portability and reproducibility, incorporating new neuroimaging tools remains challenging. Incorporating new neuroimaging tools into Neurodesk is challenging due setting the correct environment variables, finding specific versions of the software dependencies, version requirements or specific build steps. However, writing accurate and efficient container recipes requires expertise in containerization technologies and knowledge of software dependencies. Neurocontainer Copilot can help identify these details from provided documentation (README or installation documentation) and code samples. The development involves the following steps: 1) We use existing Neurocontainer recipes to generate the recipes for new tools using LLM agents. 2) We use OpenAI Codex agent to automate the process of generating Neurocontainer recipes. 3) We use the generated recipes to create pull requests in the Neurocontainers repository, which can be reviewed and merged by the Neurocontainers team or user can use it to test the recipe locally.</p><p>In this example, we use OpenAI Codex agent, to automate Neurocontainer recipe generation in Neurodesk ecosystem.</p><h2 id=neurocontainer-copilot-using-openai-codex-for-neurocontainer-recipe-generation>Neurocontainer Copilot: Using OpenAI Codex for Neurocontainer Recipe Generation</h2><p>On the left side, you can see Codex, click on it to access the OpenAI Codex agent.</p><p><img src=https://neurodesk.org/static/developers/recipe_generator/access_codex.png alt="Login with OpenAI"></p><p>After logging in, you can see the Codex agent interface. You can create environment and use Neurocontainers github repository as base repository and enable internet access to allow the agent to search for information online.</p><p><img src=https://neurodesk.org/static/developers/recipe_generator/create-environment.png alt="Create Codex environment"></p><p><img src=https://neurodesk.org/static/developers/recipe_generator/enable_internet_codex.png alt="Enable Internet access"></p><p>You can then start a new task, where you can provide the name of the tool you want to containerize, and the agent will generate a recipe for you. For example, if you want to containerize <code>hcp-asl</code>, you can provide following prompt:</p><blockquote><p>I want you to act as NeuroDesk recipe generator, compile the dependency lists required for the Github repository and install them in the neurodocker container format. Please follow the notation in <a href=https://github.com/NeuroDesk/Neurocontainers/blob/main/builder/README.md target=_blank rel=noopener>https://github.com/NeuroDesk/Neurocontainers/blob/main/builder/README.md</a> carefully. Now create a docker build.yaml for recipes/hcp-asl/build.yaml based on the hcp-asl <a href=https://github.com/physimals/hcp-asl/blob/master/README.md target=_blank rel=noopener>https://github.com/physimals/hcp-asl/blob/master/README.md</a> repository README.md file, use Neurocontainers GitHub repository it contains examples such as recipes/dsistudio/build.yaml. Note than if there are conda and pip install use appropriately. Please follow the notation in <a href=https://github.com/NeuroDesk/Neurocontainers/blob/main/builder/README.md target=_blank rel=noopener>https://github.com/NeuroDesk/Neurocontainers/blob/main/builder/README.md</a> properly. Run recipes/hcp-asl/build.yaml file and recursively modify the Neurocontainers/recipes/hcp-asl/build.yaml file.</p></blockquote><p>Create a new task by clicking on the &ldquo;New Task&rdquo; button, and provide the prompt in the text box. You can also provide the link to the repository, so that the agent can access the documentation and code samples. Click on code to start the task.</p><p><img src=https://neurodesk.org/static/developers/recipe_generator/create-task.png alt="Codex agent interface"></p><p>Codex agent will then start generating the recipe for you. It will read the documentation and code samples, and generate the recipe in the neurodocker format. You can see the progress of the task as shown in the image below. The agent will also provide you with the output of the task, which you can use to create the recipe.</p><p><img src=https://neurodesk.org/static/developers/recipe_generator/codex-progress.png alt="Codex agent progress"></p><p>After the task is completed, you can see the output of the task as follows. The Codex agent will also provide you with build.yaml for hcp-asl recipe, which you can use to directly raise pull request to the Neurocontainers repository. This recipe can act as You can also modify the recipe as per your requirements and test accordingly.</p><p><img src=https://neurodesk.org/static/developers/recipe_generator/codex-build-yaml.png alt="Codex agent output"></p></div><div class=td-content style=page-break-before:always><h1 id=pg-7e2108573f98b809e31e3e5bf5d798b0>4 - Neurodesk Copilot</h1><div class=lead>Neurodesk Copilot: How to use LLMs for code autocompletion, chat support in Neurodesk ecosystem</div></div><div class=td-content><h1 id=pg-b275c81a65b2320e18dd1193d107f048>4.1 - Neurodesk Copilot using Github Copilot</h1><div class=lead>Neurodesk Copilot: How to use LLMs for code autocompletion, chat support in Neurodesk ecosystem</div><h2 id=neurodesk-copilot-using-github-copilot-inside-neurodesk-environment>Neurodesk Copilot: Using Github Copilot inside Neurodesk Environment</h2><p>This guide provides detailed instructions on how to set up and use GitHub Copilot in the Neurodesk environment, enabling code autocompletion, real-time chat assistance, and code generation.</p><h3 id=step-1-login-with-github-and-follow-the-instruction-below>Step 1: Login with Github and follow the Instruction below:</h3><ol><li>Make sure you have a GitHub account with a valid GitHub Copilot subscription or access. If you are an eligible student, teacher, or open-source maintainer, you can access GitHub Copilot Pro for free. <a href=https://docs.github.com/en/copilot/managing-copilot/managing-copilot-as-an-individual-subscriber/managing-your-github-copilot-pro-subscription/getting-free-access-to-copilot-pro-as-a-student-teacher-or-maintainer target=_blank rel=noopener>See Getting free access to Copilot Pro as a student, teacher, or maintainer.</a></li><li>Log in to Neurodesk app or Neurodesktop using the GitHub single sign-on (SSO) option.</li><li>Grant permission to GitHub Copilot when prompted to ensure Copilot can operate within your Neurodesk environment.</li></ol><p><img src=https://neurodesk.org/static/developers/LLM_support/login-github.png alt="Login with Github"></p><h3 id=step-2-use-chat-interface>Step 2: Use chat interface</h3><ol><li>Open the Chat feature in Neurodesk in the left-hand bottom of the list and type your query or command. Examples:<ul><li><strong>“Explain how to apply a Fourier Transform in NumPy.”</strong></li><li><strong>“Help me debug my data-loading function.”</strong></li></ul></li><li>Press Enter. Neurodesk Copilot will respond with explanations, tips, or suggested code.</li></ol><p><img src=https://neurodesk.org/static/developers/LLM_support/chat-demo.png alt="Chat feature"></p><h3 id=step-3-code-completion>Step 3: Code completion</h3><ol><li>Click on the Python [conda env:base] to open a new python file</li><li>Begin typing your code within a cell in Neurodesk. As you type, Copilot provides inline suggestions. You can accept suggestions by pressing <strong>Tab</strong> key.</li><li>If the suggestion isn’t relevant, continue typing or press <strong>Escape</strong> to dismiss it.</li></ol><p><img src=https://neurodesk.org/static/developers/LLM_support/completion.png alt="Code completion"></p><h3 id=step-4-generate-code>Step 4: Generate code</h3><ol><li>When you need a larger block of code or a specific function, ask Copilot directly in the chat or as an inline comment. For example:<ul><li><strong>“Generate a Python function that reads EEG data from a CSV, cleans noise, and plots the channels.”</strong></li></ul></li><li>Copilot will produce a snippet of code you can accept, edit, or reject entirely.</li></ol><p><img src=https://neurodesk.org/static/developers/LLM_support/generate-code.gif alt="Generate Code"></p><h3 id=configuring-llm-provider-and-models>Configuring LLM Provider and models</h3><p>You can configure the model provider and model options using the Notebook Intelligence Settings dialog. You can access this dialog from JupyterLab Settings menu -> Notebook Intelligence Settings, using <code>/settings</code> command in Copilot Chat or by using the command palette.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-bd6ad28aba68349830c14c1ad624a029>4.2 - Neurodesk Copilot using Local LLMs</h1><div class=lead>Neurodesk Copilot: How to use LLMs for code autocompletion, chat support in Neurodesk ecosystem</div><h2 id=neurodesk-copilot-using-locally-hosted-llms-inside-neurodesk-environment>Neurodesk Copilot: Using Locally hosted LLMs inside Neurodesk Environment</h2><h3 id=configuring-llm-provider-and-models>Configuring LLM Provider and models</h3><p>Neurodesk Copilot allows you to harness the capabilities of <strong>local</strong> Large Language Models (LLMs) for code autocompletion and chat-based assistance, directly within your Neurodesk environment. This guide demonstrates how to configure <strong>Ollama</strong> as your local LLM provider and get started with chat and inline code completion. You can configure the model provider and model options using the Notebook Intelligence Settings dialog. You can access this dialog from JupyterLab Settings menu -> Notebook Intelligence Settings, using <code>/settings</code> command in Copilot Chat or by using the command palette.</p><h3 id=step-1-choose-ollama-and-neurodesk-copilot-type-settings-in-chat-interface-and-choose-ollama-and-neurodesk-model-and-save-settings>Step 1: Choose Ollama and Neurodesk copilot: type /settings in chat interface and choose Ollama and Neurodesk model and save settings</h3><p><img src=https://neurodesk.org/static/developers/LLM_support/jupyter-ai.png alt="Choose Jupyter-AI settings"></p><h3 id=step-2-use-chat-interface>Step 2: Use chat interface</h3><ol><li>Open the Chat feature in Neurodesk and type your query or command. Examples:<ul><li><strong>“Explain how to import MRI dataset in python.”</strong></li><li><strong>“Help me debug my data-loading function.”</strong></li></ul></li><li>Press Enter. Neurodesk Copilot will respond with explanations, tips, or suggested code.</li></ol><p><img src=https://neurodesk.org/static/developers/LLM_support/chat-demo.png alt="Chat feature"></p><h3 id=step-3-code-completion>Step 3: Code completion</h3><ol><li>Begin typing your code within a cell in Neurodesk. As you type, Copilot provides inline suggestions. You can accept suggestions by pressing <strong>Tab</strong> key.</li><li>If the suggestion isn’t relevant, continue typing or press <strong>Escape</strong> to dismiss it.</li></ol><p><img src=https://neurodesk.org/static/developers/LLM_support/completion.png alt="Code completion"></p><p>Feel free to update the settings to disable auto completer to manual invocation in Settings -> Settings Editor -> Inline Completer</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f347e8a68ab88feb2dbd40d7268e3b66>5 - Documentation</h1><div class=lead>How to edit the documentation</div></div><div class=td-content><h1 id=pg-f556320c2e00a62a008d540586d14239>5.1 - Indexing with Algolia</h1><div class=lead>How to index the Neurodesk documentation with Algolia</div><h2 id=1-prerequisites>1. Prerequisites</h2><ul><li><a href=https://www.algolia.com/ target=_blank rel=noopener>Algolia account</a></li></ul><h2 id=2-create-a-crawler-to-index-the-documentation>2. Create a crawler to index the documentation</h2><ol><li>In the Algolia Overview page, click on &ldquo;Go To Crawlers&rdquo;.</li><li>Click on &ldquo;Add new crawler&rdquo;.</li><li>Name your crawler (e.g., <code>neurodesk-docs</code>).</li><li>Set the &ldquo;Start URL&rdquo; to your documentation URL (e.g., <code>https://neurodesk.org/</code>).</li><li>Click &ldquo;Create&rdquo;.</li></ol><h2 id=3-configure-the-crawler>3. Configure the crawler</h2><ol><li>In the crawler settings, go to the &ldquo;Editor&rdquo; section under &ldquo;SETUP&rdquo;.</li><li>You can specify how the content should be indexed. It can override the default settings.<div class="alert alert-warning" role=alert>Make sure to configure <code>startUrls</code>, <code>discoveryPatterns</code>, <code>pathsToMatch</code> and other relevant settings to match the base URL for indexing. Redirect URLs would fail the crawler.</div></li><li>Run the crawler by clicking on &ldquo;Run Test&rdquo; in the top right corner.</li><li>Once the test is successful, click on &ldquo;Review and Publish&rdquo; to start indexing the documentation.</li></ol><h2 id=4-create-a-new-algolia-index>4. Create a new Algolia index</h2><ol><li>Log in to your Algolia account.</li><li>Click on &ldquo;Indices&rdquo; in the left sidebar.</li><li>Click on &ldquo;Create index&rdquo;.</li><li>Name your index (e.g., <code>neurodesk-docs</code>).</li><li>Click &ldquo;Create&rdquo;.</li></ol><h2 id=5-configure-the-algolia-index>5. Configure the Algolia index</h2><ol><li>In the index settings, go to the &ldquo;Searchable attributes&rdquo; section.</li><li>Add attributes you want to be searchable, eg. <code>title</code>, <code>content</code>.</li><li>In the &ldquo;Ranking&rdquo; section, set the ranking criteria according to your needs.</li><li>Save the settings.</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-43caa4b2a10189e2fa053496d5d16e07>5.2 - Running the Neurodesk Site Locally (Hugo + Docsy)</h1><div class=lead>How to edit the documentation on the Neurodesk website</div><h2 id=1-prerequisites>1. Prerequisites</h2><ul><li>Git</li><li><a href=https://go.dev/dl/ target=_blank rel=noopener>Go</a> (required for Hugo modules)</li><li>Hugo <strong>extended</strong> version (0.146.0 recommended). See <a href=https://github.com/gohugoio/hugo/releases target=_blank rel=noopener>https://github.com/gohugoio/hugo/releases</a> for Hugo releases.</li></ul><h2 id=2-cloning-the-repository>2. Cloning the repository</h2><p>This step is the same for macOS, Windows, and Linux.</p><h3 id=using-ssh>Using SSH</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone --recurse-submodules git@github.com:NeuroDesk/neurodesk.github.io.git</span></span></code></pre></div></div><p>or</p><h3 id=using-https>Using HTTPS</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone --recurse-submodules https://github.com/NeuroDesk/neurodesk.github.io.git</span></span></code></pre></div></div><h3 id=if-you-cloned-without-recurse-submodules>If you cloned without &ndash;recurse-submodules</h3><p>Run the following command to pull submodules</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git submodule update --init --recursive --remote</span></span></code></pre></div></div><h2 id=3-start-local-hugo-server>3. Start local hugo server</h2><p><strong>On Windows:</strong></p><ol><li>Extract the hugo.exe binary from the ZIP file into the root of your neurodesk.github.io directory.</li><li>Open PowerShell or Git Bash, then run:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>.<span style=color:#0a3069>\h</span>ugo.exe server --disableFastRender</span></span></code></pre></div></div><ol start=3><li>Once started, your dev website will be accessible via http://localhost:1313</li></ol><p><strong>On Mac:</strong></p><ol><li>Extract, move, and authorize the Hugo binary:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>cd</span> ~/Downloads  <span style=color:#57606a>#edit according to location of file</span>
</span></span><span style=display:flex><span>tar -xvzf hugo_extended_0.115.4_darwin-universal.tar.gz <span style=color:#57606a>#unzip the file</span>
</span></span><span style=display:flex><span>chmod +x hugo <span style=color:#57606a>#Make the hugo file executable</span>
</span></span><span style=display:flex><span>sudo mv hugo /usr/local/bin/hugo-extended <span style=color:#57606a>#move file to bin folder</span></span></span></code></pre></div></div><ol start=2><li>Verify your Hugo installation</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo-extended version <span style=color:#57606a>#if it is your first time running this on a Mac, you will see a security warning</span></span></span></code></pre></div></div><div class="alert alert-warning" role=alert>Authorize the binary if macOS blocks it:
Go to System Settings > Privacy & Security, and allow the app to run.</div><p>You should expect something like this (look for the mention of <strong>extended</strong> to be sure it worked)</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo v0.146.0-5d1b9d39858bb0b2e505af9f649bfb55295ecca1+extended darwin/arm64 <span style=color:#953800>BuildDate</span><span style=color:#0550ae>=</span>2025-04-10T14:57:56Z <span style=color:#953800>VendorInfo</span><span style=color:#0550ae>=</span>gohugoio</span></span></code></pre></div></div><p>Once installed, you can run the server for Mac using:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo-extended server --disableFastRender</span></span></code></pre></div></div><p>Once started, your dev website will be accessible via http://localhost:1313</p><h2 id=4-update-docsy-theme-submodule-optional>4. Update docsy theme submodule (optional)</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git submodule update --remote
</span></span><span style=display:flex><span>git add themes/
</span></span><span style=display:flex><span>git commit -m <span style=color:#0a3069>&#34;Updating theme submodule&#34;</span>
</span></span><span style=display:flex><span>git push origin main</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-a45e5d089d2a56d76b93d20eaac320a1>5.3 - Contribute to Neurodesk.org</h1><div class=lead>A brief guide for contributing new content in Markdown through Github.</div><p>This applies if you with to submit a new tutorial or amend content on a page. Our website is mostly written in Markdown (.md files). We include the basics of writing in Markdown on this page.</p><h2 id=table-of-contents>Table of contents</h2><ul><li><a href=#create-your-own-copy-of-neurodeskneurodeskgithubio-repository-where-you-will-be-able-to-make-modifications>Create your own copy of <em>neurodesk/neurodesk.github.io</em> repository</a></li><li><a href=#create-your-content-or-make-your-modifications>Create your content or make your modifications</a></li><li><a href=#contribute-your-new-content-to-the-official-documentation>Contribute your new content to the official documentation</a></li><li><a href=#formatting-guidelines>Formatting guidelines</a></li><li><a href=#code-blocks>Code blocks</a></li><li><a href=#images>Images</a></li><li><a href=#alerts-and-warnings>Alerts and warnings</a></li><li><a href=#tables>Tables</a></li><li><a href=#lists>Lists</a></li></ul><h3 id=create-your-own-copy-of-neurodeskneurodeskgithubio-repository-where-you-will-be-able-to-make-modifications>Create your own copy of <em>neurodesk/neurodesk.github.io</em> repository where you will be able to make modifications</h3><p>Begin by creating a copy of our documentation that you can edit:</p><ol><li>Visit the GitHub repository for the <a href=https://github.com/neurodesk/neurodesk.github.io target=_blank rel=noopener>Neurodesk documentation</a>.</li><li><a href=https://docs.github.com/en/get-started/quickstart/fork-a-repo target=_blank rel=noopener><strong>Fork</strong></a> the repository.</li></ol><p><img src=https://neurodesk.org/static/tutorials-examples/tutorials/tutorial-template/1_fork.png alt=1_fork title="Repo fork"></p><div class="alert alert-primary" role=alert><h4 class=alert-heading>Why fork the repository?</h4>You will now have your own copy of the documentation that you can alter without affecting our official documentation. You will see a panel stating <em>&ldquo;This branch is up to date with Neurodesk:main.&rdquo;</em> If someone else makes a change to the official documentation, the statement will change to reflect this. You can bring your repository up to date by clicking <em>&ldquo;Sync fork&rdquo;.</em></div><p><img src=https://neurodesk.org/static/tutorials-examples/tutorials/tutorial-template/2_syncFork.png alt=2_syncfork title="Sync fork"></p><p><img src=https://neurodesk.org/static/tutorials-examples/tutorials/tutorial-template/3_synced.png alt=3_synced title="Sync status"></p><hr><h3 id=create-your-content-or-make-your-modifications>Create your content or make your modifications</h3><ol><li><a href=https://docs.github.com/en/get-started/quickstart/fork-a-repo#cloning-your-forked-repository target=_blank rel=noopener><strong>Clone</strong></a> your forked version of our documentation to a location of your choice on your computer.</li></ol><p>This step is the same for macOS, Windows, and Linux.</p><h4 id=using-ssh>Using SSH</h4><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone --recurse-submodules git@github.com:NeuroDesk/neurodesk.github.io.git</span></span></code></pre></div></div><p>or</p><h4 id=using-https>Using HTTPS</h4><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone --recurse-submodules https://github.com/NeuroDesk/neurodesk.github.io.git</span></span></code></pre></div></div><h4 id=if-you-cloned-without-recurse-submodules>If you cloned without &ndash;recurse-submodules</h4><p>Run the following command to pull submodules</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git submodule update --init --recursive --remote</span></span></code></pre></div></div><p>The URL for the repository can be copied by clicking on the button highlighted below:</p><p><img src=https://neurodesk.org/static/tutorials-examples/tutorials/tutorial-template/4_clone.png alt=4_clone title="Repo URL"></p><ol start=2><li>Now, you can open your copy of <code>neurodesk.github.io</code> using the editor of your choice (we recommend <a href=https://code.visualstudio.com/ target=_blank rel=noopener>vscode</a>). Before making changes to the current repository, the best practice is to create a new <a href=https://www.atlassian.com/git/tutorials/using-branches target=_blank rel=noopener>branch</a> for avoiding version conflicts.</li></ol><ul><li>Create a branch:</li></ul><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git branch tutorial-template</span></span></code></pre></div></div><ul><li>Checkout the branch you want to use for the addition or changes you&rsquo;d like to make</li></ul><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout tutorial-template</span></span></code></pre></div></div><ul><li>Confirm you are in the right branch:</li></ul><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git branch</span></span></code></pre></div></div><p><img src=https://neurodesk.org/static/tutorials-examples/tutorials/tutorial-template/5_branch.png alt=5_branch title="Branch check"></p><ol start=3><li>Within your cloned environment, navigate to where you&rsquo;d like to make your changes.</li></ol><p>For example, if you&rsquo;d like to create new tutorial content, go in <code>neurodesk.github.io/content/en/tutorials-examples/tutorials/</code> and then navigate to the subfolder you believe your tutorial belongs in (e.g. &ldquo;/functional_imaging&rdquo;)</p><ol start=4><li><p>Create a new, appropriately named markdown file to house your content (e.g. for a tutorial about physiology, you might call it &ldquo;physio.md&rdquo;). Images need to be stored in the <a href=https://github.com/neurodesk/neurodesk.github.io/tree/main/static target=_blank rel=noopener><code>/static</code></a> directory - please mirror the same directory structure as for your markdown files.</p></li><li><p>Open this file and populate it with your content! You&rsquo;re also welcome to look at other tutorials already documented on our website for inspiration.</p></li></ol><hr><h3 id=contribute-your-new-content-to-the-official-documentation>Contribute your new content to the official documentation</h3><ol><li>Once you are happy with your content, to avoid merge conflicts, rebase your branch with the <em>main</em> branch, which should be synced with <em>NeuroDesk/neurodesk.github.io:main</em> (on GitHub check if your repo is synced and locally checkout the <em>main</em> branch and run <em>git pull</em>).</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git rebase main</span></span></code></pre></div></div><p>You might have to correct some merge conflicts, but <a href="https://learn.microsoft.com/en-us/visualstudio/version-control/git-resolve-conflicts?view=vs-2022" target=_blank rel=noopener>vscode</a> makes it easy.</p><ol start=2><li><p><a href=https://github.com/git-guides/git-commit target=_blank rel=noopener>Commit</a> all your changes and <a href=https://github.com/git-guides/git-push target=_blank rel=noopener>push</a> these local commits to GitHub.</p></li><li><p>Navigate to your forked version of the repository on GitHub and switch branches for the one with your additions.</p></li></ol><p><img src=https://neurodesk.org/static/tutorials-examples/tutorials/tutorial-template/6_switchbranch.png alt=6_branchswitch title="Switching branches"></p><ol start=4><li>Now, you can preview the changes before contributing them upstream. For this, if this is your first time to run the Action build, click on the &ldquo;Actions&rdquo; tab and enable the Actions (&ldquo;I understand my tutorials&mldr;&rdquo;). You can run the workflow by clicking on each of them in the left sidebar.</li></ol><p><img src=https://neurodesk.org/static/tutorials-examples/tutorials/tutorial-template/7_run_github_workflow.png alt=7_run_github_workflow title=Contribute></p><ol start=5><li><p>Then you need to open the settings of the repository and check that Pages points to gh-pages, and when clicking on the link, the site should be there.</p></li><li><p>To contribute your changes, click &ldquo;Compare & pull request&rdquo; and then <a href=https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests target=_blank rel=noopener>&ldquo;Create pull request&rdquo;</a>.</p></li></ol><p><img src=https://neurodesk.org/static/tutorials-examples/tutorials/tutorial-template/8_contribute.png alt=8_contribute title=Contribute></p><ol start=7><li><p>Give your pull request a title (e.g. &ldquo;Document PhysIO tutorial&rdquo;), leave a comment briefly describing what you have done, and then create the pull request.</p></li><li><p>Someone from the Neurodesk team will review and accept your changes, which will appear on our website soon!</p></li></ol><p>Thanks so much for taking the time to contribute content to the Neurodesk community! If you have any feedback on the process, please let us know on <a href=https://github.com/orgs/NeuroDesk/discussions target=_blank rel=noopener>github discussions</a>.</p><hr><h3 id=formatting-guidelines>Formatting guidelines</h3><p>As seen throughout this tutorial, you can embellish your text using markdown conventions; text can be <strong>bold</strong>, <em>italic</em>, or <del>strikethrough</del>. You can also add <a href=https://neurodesk.org/ target=_blank rel=noopener>Links</a>, and you can organise your content with headers, starting at level 2 (the page title is a level 1 header):</p><h2 id=level-2-heading>Level 2 heading</h2><p>You can also include progressively smaller subheadings:</p><h3 id=level-3-heading>Level 3 heading</h3><p>Some more detailed information.</p><h4 id=level-4-heading>Level 4 heading</h4><p>Even more detailed information.</p><h3 id=code-blocks>Code blocks</h3><p>You can add codeblocks to your content as follows:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># Some example code
</span></span><span style=display:flex><span>import numpy as np
</span></span><span style=display:flex><span>a = np.array([1, 2])
</span></span><span style=display:flex><span>b = np.array([3, 4])
</span></span><span style=display:flex><span>print(a+b)</span></span></code></pre></div></div><p>Or add syntax highlighting to your codeblocks:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f6f8fa;background-color:#82071e>#</span> <span style=color:#1f2328>Some</span> <span style=color:#1f2328>example</span> <span style=color:#1f2328>code</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>import</span> <span style=color:#1f2328>numpy</span> <span style=color:#1f2328>as</span> <span style=color:#1f2328>np</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>a</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>np</span><span style=color:#1f2328>.</span><span style=color:#6639ba>array</span><span style=color:#1f2328>([</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>])</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>b</span> <span style=color:#1f2328>=</span> <span style=color:#1f2328>np</span><span style=color:#1f2328>.</span><span style=color:#6639ba>array</span><span style=color:#1f2328>([</span><span style=color:#0550ae>3</span><span style=color:#1f2328>,</span> <span style=color:#0550ae>4</span><span style=color:#1f2328>])</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>print</span><span style=color:#1f2328>(</span><span style=color:#1f2328>a</span><span style=color:#0550ae>+</span><span style=color:#1f2328>b</span><span style=color:#1f2328>)</span></span></span></code></pre></div></div><p>Advanced code or command line formatting using this html snippet:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># Some example code</span>
</span></span><span style=display:flex><span>import numpy as np
</span></span><span style=display:flex><span><span style=color:#953800>a</span> <span style=color:#0550ae>=</span> np.array<span style=color:#0550ae>([</span>1, 2<span style=color:#0550ae>])</span>
</span></span><span style=display:flex><span><span style=color:#953800>b</span> <span style=color:#0550ae>=</span> np.array<span style=color:#0550ae>([</span>3, 4<span style=color:#0550ae>])</span>
</span></span><span style=display:flex><span>print<span style=color:#0550ae>(</span>a+b<span style=color:#0550ae>)</span>
</span></span><span style=display:flex><span><span style=color:#0550ae>[</span><span style=color:#0550ae>4</span> 6<span style=color:#0550ae>]</span></span></span></code></pre></div></div><p>You can also add code snippets, e.g. <code>var foo = "bar";</code>, which will be shown inline.</p><hr><h3 id=images>Images</h3><p>To add screenshots and images to your content, create a subfolder in <a href=https://github.com/neurodesk/neurodesk.github.io/tree/main/static target=_blank rel=noopener><code>/static</code></a> with the same file structure as in your content markdown file. Add your screenshot to this folder, keeping in mind that you may want to adjust your screenshot to a reasonable size before uploading. You can then embed these images in your tutorial using the following convention:</p><p>For a <code>filename.png</code> in a <code>/content/en/tutorials-examples/subject/tutorial1/markdownfile.md</code> use</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>![filename](/static/...&lt;fullpathhere&gt;.../filename.png &#39;[filename&#39;)</span></span></code></pre></div></div><p>For example: <code>EEGtut1.png</code> in <code>/content/en/tutorials-examples/tutorials/electrophysiology/eeg_mne-python.md</code> would be</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>![EEGtut1](/static/tutorials-examples/tutorials/electrophysiology/eeg_mne-python/EEGtut1.png &#39;EEGtut1&#39;)</span></span></code></pre></div></div><p><img src=https://neurodesk.org/static/tutorials-examples/tutorials/electrophysiology/eeg_mne-python/EEGtut1.png alt=EEGtut1 title=EEGtut1></p><hr><h3 id=alerts-and-warnings>Alerts and warnings</h3><p>You can grab the reader&rsquo;s attention to particularly important information with quoteblocks, alerts, and warnings:</p><blockquote><p>This is a quoteblock</p></blockquote><p><div class="alert alert-primary" role=alert>This is an alert.</div><div class="alert alert-primary" role=alert><h4 class=alert-heading>Note</h4>This is an alert with a title.</div><div class="alert alert-warning" role=alert>This is a warning.</div><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>This is a warning with a title.</div></p><p>You can also segment information as follows:</p><hr><p>There&rsquo;s a horizontal rule above and below this.</p><hr><p>Or add page information:<div class="pageinfo pageinfo-primary"><p>This is a placeholder. Replace it with your own content.</p></div></p><hr><h3 id=tables>Tables</h3><p>You may want to order information in a table as follows:</p><table><thead><tr><th>Neuroscientist</th><th>Notable work</th><th>Lifetime</th></tr></thead><tbody><tr><td>Santiago Ramón y Cajal</td><td>Investigations on microscopic structure of the brain</td><td>1852–1934</td></tr><tr><td>Rita Levi-Montalcini</td><td>Discovery of nerve growth factor (NGF)</td><td>1909–2012</td></tr><tr><td>Anne Treisman</td><td>Feature integration theory of attention</td><td>1935–2018</td></tr></tbody></table><hr><h3 id=lists>Lists</h3><p>You may want to organise information in a list as follows:</p><p>Here is an unordered list:</p><ul><li>Rstudio</li><li>JASP</li><li>SPSS</li></ul><p>And an ordered list:</p><ol><li>Collect data</li><li>Try to install analysis software</li><li>Cry a little</li></ol><p>And an unordered task list:</p><ul><li><input checked disabled type=checkbox> Install Neurodesktop</li><li><input checked disabled type=checkbox> Analyse data</li><li><input disabled type=checkbox> Take a vacation</li></ul><p>And a &ldquo;mixed&rdquo; task list:</p><ul><li><input disabled type=checkbox> writing</li><li>?</li><li><input disabled type=checkbox> more writing probably</li></ul><p>And a nested list:</p><ul><li>EEG file extensions<ul><li>.eeg, .vhdr, .vmrk</li><li>.edf</li><li>.bdf</li><li>.set, .fdt</li><li>.smr</li></ul></li><li>MEG file extensions<ul><li>.ds</li><li>.fif</li><li>.sqd</li><li>.raw</li><li>.kdf</li></ul></li></ul><h2 id=need-help>Need Help?</h2><p>If you have questions or would like feedback before submitting:</p><ul><li>Open a <a href=https://github.com/NeuroDesk/neurodesk.github.io/discussions target=_blank rel=noopener>discussion</a></li></ul><p>We appreciate your contribution to the Neurodesk community and reproducible science.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-fd28a1b5010f2ff02bb480802674fb39>6 - How to add new tools</h1><div class=lead>How to add new tools to neurodesk</div><h2 id=guiding-principles>Guiding principles</h2><p>To decide if a tool should be packaged in a <strong>Neurocontainers</strong> or be installed in the <strong>Neurodesktop container</strong>, we are currently following these guiding principles:</p><p><strong>1) Neurodesk is a Platform, Not a Package Manager:</strong> We don&rsquo;t distribute tools that can be easily installed via standard package managers.</p><p><strong>2) Multiple versions of tools:</strong> Neurodesk supports the use of multiple versions of a tool in parallel via <a href=https://lmod.readthedocs.io/en/latest target=_blank rel=noopener>lmod</a>. If a tool doesn&rsquo;t support this, follow <a href=#adding-new-tools-to-neurocontainers>this instruction</a> to package it in <a href=https://github.com/NeuroDesk/neurocontainers target=_blank rel=noopener>Neurocontainers</a>.</p><p><strong>3) Inter-Container Tool Linking:</strong> Neurodesk is designed to facilitate the linking of tools from different containers, such as workflow managers like nipype or nextflow. Therefore, if a tool is needed to coordinate various container-tools, <a href=https://github.com/NeuroDesk/neurodesktop/issues/new target=_blank rel=noopener>create an issue</a> to have it installed directly in the <a href=https://github.com/NeuroDesk/neurodesktop target=_blank rel=noopener>Neurodesktop container</a>.</p><p><strong>Examples:</strong></p><table><thead><tr><th></th><th>easy install</th><th>coordinates containers</th><th>small in size</th><th>latest version is ok</th><th>useful to most users</th><th>Conclusion</th></tr></thead><tbody><tr><td>git</td><td>yes</td><td>yes</td><td>yes</td><td>yes</td><td>yes</td><td>neurodesktop</td></tr><tr><td>lmod</td><td>no</td><td>yes</td><td>yes</td><td>yes</td><td>yes</td><td>neurodesktop</td></tr><tr><td>itksnap</td><td>yes</td><td>no</td><td>yes</td><td>yes</td><td>yes</td><td>neurocontainer</td></tr><tr><td>convert3D</td><td>yes</td><td>no</td><td>yes</td><td>no</td><td>no</td><td>neurocontainer</td></tr><tr><td>fsl</td><td>no</td><td>no</td><td>no</td><td>no</td><td>no</td><td>neurocontainer</td></tr></tbody></table><h2 id=adding-new-tools-to-neurocontainers>Adding new tools to Neurocontainers:</h2><p>Follow these instructions to add new tools: <a href=https://neurodesk.org/developers/new_tools/manual_build target=_blank rel=noopener>https://neurodesk.org/developers/new_tools/manual_build</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-ae3fdb0ea1bbf7f813b0c7171d5c7390>6.1 - New tool</h1><div class=lead>How to contribute a new container.</div><p>We have launched our new container build system. Some documentation can already be found here: <a href=https://github.com/NeuroDesk/neurocontainers/tree/main/builder target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/tree/main/builder</a></p><p>We have also released a web browser UI to create your own Neurocontainer: <a href=https://neurodesk.org/neurocontainers-ui/ target=_blank rel=noopener>https://neurodesk.org/neurocontainers-ui/</a></p><p>We are currently building the detailed documentation for this, but documenttaion is also embedded in the UI. If you have any issues, please</p><h2 id=need-help>Need Help?</h2><p>If you have questions or would like feedback before submitting:</p><ul><li>Open a <a href=https://github.com/NeuroDesk/neurodesk.github.io/discussions target=_blank rel=noopener>discussion</a></li></ul><p>We appreciate your contribution to the Neurodesk community and reproducible science.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9a4c3c021b4878c5ba917719c268b2d3>6.2 - Update tool in Neurodesk</h1><div class=lead>Step-by-step instructions on how to update an existing NeuroDesk tool container.</div><p>Updating an existing container is quite easy with this new build system.</p><p>Here is a step-by-step on how to procede by modifying the .yaml file. It is also possible to edit the containers by using our newly released web browser UI : <a href=https://neurodesk.org/neurocontainers-ui/ target=_blank rel=noopener>https://neurodesk.org/neurocontainers-ui/</a></p><p><em>There&rsquo;s a <a href=#detailled-version>detailled version</a> below including screenshots and an example.</em><br></br></p><hr><h2 id=condensed-version>Condensed version</h2><ol><li>Access the <a href=https://github.com/NeuroDesk/neurocontainers target=_blank rel=noopener>Neurodesk Containers repository</a></li><li>Fork the repository</li><li>Using your preferred development environment (such as VS Code locally or GitHub Codespaces), make changes to the desired container.</li></ol><div style=margin-left:2em><p>Each tool has its own folder inside the <code>recipes/</code> directory, and inside that folder, you will find the corresponding <code>build.yaml</code> file.</p><p><strong>Editing the <code>build.yaml</code></strong></p><p>Open the <code>build.yaml</code> file. Make the necessary updates to:</p><ul><li>Software version numbers</li><li>Dependencies</li><li>Download links</li><li>Build instructions (if needed)</li></ul></div><ol start=4><li>Validate your changes</li></ol><p>Make sure your changes are valid.
In the terminal, run:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>./builder/build.py generate &lt;toolname&gt; 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#This second step can take some time</span>
</span></span><span style=display:flex><span>./builder/build.py generate &lt;toolname&gt; --recreate --build --test </span></span></code></pre></div></div><ol start=5><li>Commit and push your changes</li><li>Create a pull request</li></ol><hr><h2 id=detailled-version>Detailled version</h2><h2 id=1-access-the-neurodesk-containers>1. Access the Neurodesk Containers</h2><p>Navigate to the <a href=https://github.com/NeuroDesk/neurocontainers target=_blank rel=noopener>Neurocontainers repository</a>:</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/neurocontainers.png width=650><h2 id=2-fork-the-repository>2. Fork the repository</h2><p>You will then need to fork the Neurodesk repository to your own repositories. This allows you to make changes independently and propose updates.</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/neurocontainers1.png width=650><h3 id=naming-your-repository>Naming your repository</h3><p>You may decide to keep the same name for your new reposoitory, or you may rename it.</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/neurocontainers-fork.png width=450><h3 id=confirming-you-are-on-the-forked-version>Confirming you are on the forked version</h3><p>In the top left corner, you can see that you are in your forked repository of the neurocontainers repository.</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/neurocontainers-forked.png width=450><h3 id=keeping-your-forked-repository-up-to-date>Keeping your forked repository up-to-date</h3><p>If changes are commited to the Neurodesk/neurocontainers repository, you will see a banner saying you are N commits behind. You may decide to Sync fork, which will update your repository, allowing you to have the most up-to-date files.</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/neurocontainers-commits-behind.png width=450><h2 id=3-create-and-edit-a-codespace>3. Create and Edit a Codespace</h2><p>Once this is done, you will want to start a Codespace using by:</p><ul><li>Clicking the <strong>+ (Create new&mldr;)</strong> button in the top right corner. <em>(it&rsquo;s a + sign button)</em></li><li>Selecting <strong>Codespaces</strong> > <strong>New codespace</strong>.</li></ul><img src=https://neurodesk.org/static/developers/new_tools/update_tool/open-codespace.png width=650><p>Configure your Codespace.<div class="alert alert-info" role=alert><strong>Resource recommendation</strong>:<br>Most neurocontainers run smoothly on a <strong>2-core</strong> machine. For containers with heavier computational demands, consider using a <strong>4-core</strong> machine.</div></p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/configure-codespace.png width=450><p>This opens an editable environment directly in your browser.</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/codespace.png width=650><br><br><p>In the terminal, run the following lines to configure your codespace environment.</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 -m venv env
</span></span><span style=display:flex><span><span style=color:#6639ba>source</span> env/bin/activate
</span></span><span style=display:flex><span>pip install -r requirements.txt</span></span></code></pre></div></div><p>This will install a series of packages to allow you to make changes to neurocontainers.</p><div style=margin-left:2em><h3 id=yaml-extension>YAML extension</h3><p>The first time you use a codespace, you will also need to download the YAML extension by navigating to the Extensions tab using icon on the left of your screen and searching for YAML. Click the install button.</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/install-yaml1.png width=650><br><br><p>There will be a security pop-up where you will need to click &ldquo;Trust Publisher & Install&rdquo;</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/install-yaml2.png width=650><br><br><p>There will be another pop-up asking whether you allow the developers to collect data. You may click &ldquo;Agree&rdquo; or &ldquo;Deny&rdquo;
<img src=https://neurodesk.org/static/developers/new_tools/update_tool/install-yaml3.png width=650></p></div><h2 id=4-make-changes-to-the-desired-container>4. Make Changes to the desired Container</h2><p>Navigate back to the Explorer tab using the icon on the left of your screen.</p><p>Using either the terminal at the bottom of your Codespace or the file browser on the left, navigate to the <code>build.yaml</code> file of the tool you wish to update.</p><div class="alert alert-info" role=alert>In this example, we are updating the <a href=https://neuro.debian.net/pkgs/connectome-workbench.html target=_blank rel=noopener><strong>Connectome Workbench</strong></a> tool.</div><p>Each tool has its own folder inside the <code>recipes/</code> directory, and inside that folder, you will find the corresponding <code>build.yaml</code> file.</p><ul><li>Using the GUI (file browser): Navigate manually to <code>recipes/connectomeworkbench/</code>.</li><li>Using the terminal, you can use:</li></ul><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6639ba>cd</span> recipes/connectomeworkbench/ <span style=color:#57606a>#or whichever other neurocontainer you want to update</span></span></span></code></pre></div></div><img src=https://neurodesk.org/static/developers/new_tools/update_tool/codespace-recipe.png width=650><br><br><h3 id=editing-the-buildyaml>Editing the <code>build.yaml</code></h3><p>Open the <code>build.yaml</code> file. Make the necessary updates to:</p><ul><li>Software version numbers</li><li>Dependencies</li><li>Download links</li><li>Build instructions (if needed)</li></ul><p>In this example, when we go to the <a href=https://www.humanconnectome.org/software/get-connectome-workbench#download target=_blank rel=noopener>Connectome Workbench website</a>, we can see that the latest version available is Connectome Workbench v2.0.1.</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/connectome-workbench201.png width=650><br><br><p>To update Neurocontainer version, simply change the <code>version:</code> to 2.0.1</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/buildyaml-change.png width=650><br><br><p>If you are unsure how to structure the <code>build.yaml</code>, please refer to the examples provided in the <a href=https://github.com/NeuroDesk/neurocontainers/tree/main/builder target=_blank rel=noopener>Neurocontainers builder documentation</a>.</p><div class="alert alert-warning" role=alert>Important:
Keep your formatting strict! YAML files are indentation-sensitive. Use spaces, not tabs.</div><p>Once you have made your changes, save the file.</p><h2 id=5-validate-your-changes>5. Validate Your Changes</h2><p>Before committing, make sure your changes are valid.</p><p>In the terminal, run:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>./builder/build.py generate connectomeworkbench <span style=color:#57606a>#Replace connectomeworkbench with the name of the folder you updated</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#This second step can take some time</span>
</span></span><span style=display:flex><span>./builder/build.py generate connectomeworkbench --recreate --build --test <span style=color:#57606a>#Replace connectomeworkbench with the name of the folder you updated</span></span></span></code></pre></div></div><p>This script will:</p><ul><li>Parse your <code>build.yaml</code></li><li>Check for syntax errors</li><li>Show the build steps without actually building the full container</li></ul><p>You will be able to see the progress for each of the building steps.
<img src=https://neurodesk.org/static/developers/new_tools/update_tool/buildyaml-building.png width=650><br><br></p><p>If there are errors, correct them before proceeding.</p><p>Once you see <code>Docker image built successfully at connectomeworkbench:2.0.1</code>, you are ready to commit and push your changes.</p><h2 id=6-commit-and-push-your-changes>6. Commit and Push Your Changes</h2><p>Once you have validated your <code>build.yaml</code>, it’s time to save and upload your work.</p><p>In the terminal:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git status</span></span></code></pre></div></div><p>to check which files were changed.</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/git-status.png width=650><br><br><p>If only this reflects the changes you&rsquo;ve made, then stage, commit, and push your changes:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git add recipes/connectomeworkbench/build.yaml <span style=color:#57606a>#Replace connectomeworkbench with the name of the folder you updated</span>
</span></span><span style=display:flex><span>git commit -m <span style=color:#0a3069>&#34;Update connectomeworkbench container: updated version 2.0.1&#34;</span> <span style=color:#57606a>#Adapt commit message</span>
</span></span><span style=display:flex><span>git push</span></span></code></pre></div></div><p>Make sure your commit message is clear and descriptive, for example:</p><p><code>Update Connectome Workbench container to version 1.5.0</code> Adjust the commit message based on the updates you made to the neurocontainer.</p><h2 id=7-create-a-pull-request>7. Create a Pull Request</h2><p>After pushing your changes:</p><ol><li>Go back to your forked repository on GitHub.</li><li>You should see a banner saying &ldquo;This branch is X commits ahead of <code>NeuroDesk/neurocontainers:main</code>&rdquo;.</li></ol><div style=margin-left:2em>You can either click on **X commit ahead of** to view the differences between your repository and the Neurodesk repository and then **Create pull request**
<img src=https://neurodesk.org/static/developers/new_tools/update_tool/commits-ahead.png width=650><br><br>or<br><br><p>click on <strong>Contribute</strong> > <strong>Open pull request</strong>.</p><img src=https://neurodesk.org/static/developers/new_tools/update_tool/create-pull.png width=650><br><br></div><ol start=3><li>In the Pull Request:</li></ol><ul><li>Provide a clear title (e.g., Update Connectome Workbench to v1.5.0)</li><li>Write a brief description of what you changed (version bump, new dependencies, etc.)</li><li>Create the pull request.</li></ul><img src=https://neurodesk.org/static/developers/new_tools/update_tool/pull-request.png width=650><br><br><p>Our Neurodesk team will review your proposed update, test the updated container to make sure it work and merge your changes to Neurodesk if everything works correctly, allowing all users to benefit.</p><hr><p>More detailed documentation can be found here: <a href=https://github.com/NeuroDesk/neurocontainers/tree/main/builder target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/tree/main/builder</a></p><h2 id=need-help>Need Help?</h2><p>If you have questions or would like feedback before submitting:</p><ul><li>Open a <a href=https://github.com/NeuroDesk/neurodesk.github.io/discussions target=_blank rel=noopener>discussion</a></li></ul><p>We appreciate your contribution to the Neurodesk community and reproducible science.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ed33889da9e74d124a826193f81ff4a2>7 - Designer Guide</h1><div class=lead>Guidelines for visual consistency, colors, typography, logos, and imagery across Neurodesk platforms.</div><h1 id=neurodesk-design-style-guide>Neurodesk Design Style Guide</h1><p>This style guide provides clear standards to ensure visual consistency across all Neurodesk platforms and materials.</p><h2 id=brand-overview>Brand Overview</h2><p>Neurodesk is a community-oriented open-source solution for neuroimaging analysis with four guiding principles: accessibility, portability, flexibility and, overarchingly, reproducibility. This guide ensures visual consistency across all Neurodesk products and documentation.</p><h2 id=logo-usage>Logo Usage</h2><p>Below are official Neurodesk logos available for download. Please refer to the examples below for acceptable usage.</p><hr><h3 id=acceptable-logo-usage>Acceptable Logo Usage</h3><p>Use these logos on light or neutral backgrounds.</p><div style=background-color:#fff;padding:20px;border-radius:6px;margin-bottom:30px><h4 style=color:#0c0e0a;margin-top:0>Simple logo</h4><div style=display:flex;flex-wrap:wrap;gap:20px;align-items:center><div style=text-align:center><img src=https://neurodesk.org/static/logos/neurodesk.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk.png download>Download PNG</a></div><div style=text-align:center><img src=https://neurodesk.org/static/logos/neurodesk.org.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk.org.png download>Download PNG</a></div></div></div><br><div style=background-color:#fff;padding:20px;border-radius:6px;margin-bottom:30px><h4 style=color:#0c0e0a;margin-top:0>Inclusivity & Pride logo</h4><div style=display:flex;flex-wrap:wrap;gap:20px;align-items:center><div style=text-align:center><img src=https://neurodesk.org/static/logos/neurodesk-pride.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk-pride.png download>Download PNG</a></div><div style=text-align:center><img src=https://neurodesk.org/static/logos/neurodesk.org-pride.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk.org-pride.png download>Download PNG</a></div></div></div><br><div style=text-align:left><div style=background-color:#fff;padding:20px;border-radius:6px;margin-bottom:30px><h4 style=color:#0c0e0a;margin-top:0>Horizontal format logo</h4><div style=display:flex;flex-wrap:nowrap;gap:10px;justify-content:flex-start><div style=text-align:center><img src=https://neurodesk.org/static/logos/neurodesk_horizontal.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk_horizontal.png download>Download PNG</a></div><div style=text-align:center><img src=https://neurodesk.org/static/logos/neurodesk.org_horizontal.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk.org_horizontal.png download>Download PNG</a></div></div></div></div><hr><h4 id=logos-for-dark-backgrounds>Logos for Dark Backgrounds</h4><p>These logos are optimized for use on dark backgrounds:</p><div style=background-color:#0c0e0a;padding:20px;border-radius:6px;margin-bottom:30px;display:inline-block;margin-left:auto;margin-right:auto><h4 style=color:#fff;margin-top:0>Simple logo</h4><div style=display:flex;flex-wrap:wrap;gap:20px;align-items:center><div style=text-align:center><img src=https://neurodesk.org/static/logos/neurodesk-on-dark.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk-on-dark.png download>Download PNG</a></div><div style=text-align:center><img src=https://neurodesk.org/static/logos/neurodesk.org-on-dark.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk.org-on-dark.png download>Download PNG</a></div></div></div><br><div style=background-color:#0c0e0a;padding:20px;border-radius:6px;margin-bottom:30px;display:inline-block;margin-left:auto;margin-right:auto><h4 style=color:#fff;margin-top:0>Inclusivity & Pride logo</h4><div style=display:flex;flex-wrap:wrap;gap:20px;align-items:center><div style=text-align:center><img src=https://neurodesk.org/static/logos/neurodesk-pride-on-dark.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk-pride-on-dark.png download>Download PNG</a></div><div style=text-align:center><img src=https://neurodesk.org/static/logos/neurodesk.org-pride-on-dark.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk.org-pride-on-dark.png download>Download PNG</a></div></div></div><hr><h4 id=other-variants>Other Variants</h4><p><strong>No image</strong></p><div style=display:flex;flex-wrap:wrap;gap:20px;align-items:center;margin-top:10px><div><img src=https://neurodesk.org/static/logos/neurodesk.org-no-logo.png width=200><br><a href=https://neurodesk.org/static/logos/neurodesk.org-no-logo.png download>Download PNG</a></div></div><hr><h2 id=color-palette>Color Palette</h2><p>You can download the official Neurodesk color palette file for design use:</p><ul><li><a href=https://neurodesk.org/static/logos/Neurodesk-color-palette.ai>Download Neurodesk Color Palette (AI format)</a></li></ul><h3 id=primary-colors>Primary Colors</h3><table><thead><tr><th>Color Name</th><th>Hex Code</th><th>RGB Code</th><th>Usage</th></tr></thead><tbody><tr><td>Seafoam green <span style=color:#6aa329>◼︎</span></td><td><code>#6aa329</code></td><td><code>(106, 163, 41)</code></td><td>Primary actions</td></tr></tbody></table><h3 id=secondary-colors>Secondary Colors</h3><table><thead><tr><th>Color Name</th><th>Hex Code</th><th>RGB Code</th><th>Usage</th></tr></thead><tbody><tr><td>Black <span style=color:#0c0e0a>◼︎</span></td><td><code>#0c0e0a</code></td><td><code>(5, 8, 2)</code></td><td>Regular text, menu bar</td></tr><tr><td>Darkest green <span style=color:#161c10>◼︎</span></td><td><code>#161c10</code></td><td><code>(16, 24 6)</code></td><td>Successful selection</td></tr><tr><td>Muted olive green <span style=color:#1e2a16>◼︎</span></td><td><code>#1e2a16</code></td><td><code>(26, 41, 10)</code></td><td>Accent background</td></tr><tr><td>Dark olive green <span style=color:#4f7b38>◼︎</span></td><td><code>#4f7b38</code></td><td><code>(79, 122, 31)</code></td><td>Selected buttons, Hyperlinks</td></tr><tr><td>Light green <span style=color:#b7d886>◼︎</span></td><td><code>#b7d886</code></td><td><code>(181, 224, 133)</code></td><td>Hover over a button</td></tr><tr><td>Lighter green <span style=color:#d3e7b6>◼︎</span></td><td><code>#d3e7b6</code></td><td><code>(211, 237, 182)</code></td><td></td></tr><tr><td>Verdant Haze <span style=color:#e6f1d6>◼︎</span></td><td><code>#e6f1d6</code></td><td><code>(230, 245, 214)</code></td><td>Unselected buttons</td></tr><tr><td>Pale Lime Green <span style=color:#f0f7e7>◼︎</span></td><td><code>#f0f7e7</code></td><td><code>(240, 249, 231)</code></td><td></td></tr><tr><td>White <span style=color:#fff>◼︎</span></td><td><code>#ffffff</code></td><td><code>(255, 255, 255)</code></td><td></td></tr></tbody></table><h2 id=naming-and-capitalization-guidelines>Naming and Capitalization Guidelines</h2><p>To ensure consistency in our branding, please follow the guidelines below when referring to Neurodesk and its associated tools.</p><h3 id=correct-usage>Correct Usage</h3><ul><li><strong>Neurodesk</strong> — Capitalize only the first letter.<ul><li>neurodesk or NEURODESK may be used if better suited in the context.</li></ul></li><li>Use <strong>&ldquo;Neurodesk&rdquo;</strong> to refer to the overall project, platform, or community.</li><li>Use consistent casing in product names:<ul><li><strong>Neurodesktop</strong></li><li><strong>Neurocommand</strong></li><li><strong>Neurocontainers</strong></li><li><strong>NeurodeskApp</strong></li></ul></li></ul><h3 id=do-not-use>Do Not Use</h3><p>Avoid the following incorrect variations:</p><ul><li>neuroDesk</li><li>neurodesk in titles or headings</li><li>NeuroDesk</li></ul><h2 id=typography>Typography</h2><h3 id=font-families-for-website>Font Families for Website</h3><ul><li><strong>Logo:</strong> <a href=https://github.com/micmas/Scirich-font target=_blank rel=noopener>Scirich</a></li><li><strong>Headings:</strong> Pontano</li><li><strong>Body Text:</strong> Pontano</li><li><strong>Code blocks:</strong> Menlo</li></ul><h2 id=template-presentations>Template Presentations</h2><h3 id=slide-decks>Slide Decks</h3><p><a href="https://uq-my.sharepoint.com/:p:/r/personal/uqmmasso_uq_edu_au/Documents/Documents/Neurodesk-slides/neurodesk-overview.pptx?d=we41da540a5444b82a7c7800c07200cee&amp;csf=1&amp;web=1&amp;e=hyiRYO" target=_blank rel=noopener>Neurodesk Overview Slides - accessible for the Neurodesk team</a></p><p>To request access, please email <a href=mailto:mail.neurodesk@gmail.com>mail.neurodesk@gmail.com</a></p><h3 id=poster-template>Poster Template</h3><div style=display:flex;align-items:center;gap:16px;flex-wrap:wrap><a href=https://neurodesk.org/static/template-presentations/Neurodesk-vertical-poster.potx download>📄 Download Neurodesk Vertical Poster Template (.pptx)</a><div style="border-left:1px solid #ccc;height:1.2em"></div><a href=https://neurodesk.org/static/template-presentations/Neurodesk-horizontal-poster.potx download>📄 Download Neurodesk Horizontal Poster Template (.pptx)</a></div></div><div class=td-content style=page-break-before:always><h1 id=pg-91d9c64996dd040e999de5afb93dce95>8 - Interfacing</h1><div class=lead>Section to describe programmatic interfaces to Neurodesk</div><h1 id=connectingattaching-to-a-running-neurodesktop-session-via-a-plain-shell>Connecting/attaching to a running Neurodesktop session via a plain shell</h1><p>You can start a neurodesktop container using docker or the neurodeskapp. If you want to connect to this running session using a shell you can do this as well:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>docker ps
</span></span><span style=display:flex><span># note the name of the running container, e.g. neurodeskapp-49977
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># now connect to this container
</span></span><span style=display:flex><span>docker exec --user=jovyan -ti neurodeskapp-49977 bash</span></span></code></pre></div></div><h1 id=api-interface-to-jupyter>API interface to Jupyter</h1><p>This currently does not work on Apple Silicon Machines!</p><p>Install necessary tools, e.g. for MacOS</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>brew install coreutils
</span></span><span style=display:flex><span>brew install websocat</span></span></code></pre></div></div><p>or for linux:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>wget https<span style=color:#1f2328>:</span><span style=color:#0550ae>//</span>github<span style=color:#0550ae>.</span>com<span style=color:#0550ae>/</span>vi<span style=color:#0550ae>/</span>websocat<span style=color:#0550ae>/</span>releases<span style=color:#0550ae>/</span>download<span style=color:#0550ae>/</span>v1<span style=color:#0550ae>.</span><span style=color:#0550ae>12.0</span><span style=color:#0550ae>/</span>websocat<span style=color:#0550ae>.</span>x86_64<span style=color:#0550ae>-</span>unknown<span style=color:#0550ae>-</span>linux<span style=color:#0550ae>-</span>musl
</span></span><span style=display:flex><span>chmod <span style=color:#0550ae>+</span>x websocat<span style=color:#0550ae>.</span>x86_64<span style=color:#0550ae>-</span>unknown<span style=color:#0550ae>-</span>linux<span style=color:#0550ae>-</span>musl
</span></span><span style=display:flex><span>sudo mv websocat<span style=color:#0550ae>.</span>x86_64<span style=color:#0550ae>-</span>unknown<span style=color:#0550ae>-</span>linux<span style=color:#0550ae>-</span>musl <span style=color:#0550ae>/</span>usr<span style=color:#0550ae>/</span>local<span style=color:#0550ae>/</span>bin<span style=color:#0550ae>/</span>websocat
</span></span><span style=display:flex><span>apt install jq</span></span></code></pre></div></div><p>Start a jupyter notebook session, e.g. on EXAMPLE_API_URL=play-europe.neurodesk.org</p><p>Then open a terminal in jupyter and find your jupyterhub token and your username:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>echo JUPYTERHUB_USER=$JUPYTERHUB_USER
</span></span><span style=display:flex><span>echo JPY_API_TOKEN=$JPY_API_TOKEN</span></span></code></pre></div></div><p>Now you can interface with Jupyter through:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>USER=$JUPYTERHUB_USER
</span></span><span style=display:flex><span>USER_TOKEN=$JPY_API_TOKEN
</span></span><span style=display:flex><span>API_URL=$EXAMPLE_API_URL
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>TERMINAL_RESPONSE=$(curl -k -s -X POST \
</span></span><span style=display:flex><span>    -H &#34;Authorization: token $USER_TOKEN&#34; \
</span></span><span style=display:flex><span>    &#34;https://$API_URL/user/$USER/api/terminals&#34; || echo &#39;{&#34;error&#34;: &#34;curl_failed&#34;}&#39;)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo &#34;Terminal API response: $TERMINAL_RESPONSE&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>TERMINAL_NAME=$(echo &#34;$TERMINAL_RESPONSE&#34; | jq -r &#39;.name // empty&#39;)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>if [ -n &#34;$TERMINAL_NAME&#34; ] &amp;&amp; [ &#34;$TERMINAL_NAME&#34; != &#34;null&#34; ] &amp;&amp; [ &#34;$TERMINAL_NAME&#34; != &#34;empty&#34; ]; then
</span></span><span style=display:flex><span>    echo &#34;✅ Terminal created successfully: $TERMINAL_NAME&#34;
</span></span><span style=display:flex><span>else
</span></span><span style=display:flex><span>    echo &#34;❌ Terminal creation failed&#34;
</span></span><span style=display:flex><span>    echo &#34;Full response: $TERMINAL_RESPONSE&#34;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    # more info about the user
</span></span><span style=display:flex><span>    echo &#34;Checking user info...&#34;
</span></span><span style=display:flex><span>    USER_INFO=$(curl -k -s -H &#34;Authorization: token $USER_TOKEN&#34; &#34;https://$API_URL/hub/api/users/$USER&#34; || echo &#39;{&#34;error&#34;: &#34;failed&#34;}&#39;)
</span></span><span style=display:flex><span>    echo &#34;User info: $USER_INFO&#34;
</span></span><span style=display:flex><span>fi
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Function to test WebSocket connection
</span></span><span style=display:flex><span>test_websocket_connection() {
</span></span><span style=display:flex><span>    local token=&#34;$1&#34;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    echo &#34;Testing WebSocket connection...&#34;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    # Test connection
</span></span><span style=display:flex><span>    WS_TEST=$(echo &#39;[&#34;stdin&#34;, &#34;echo test_connection\r\n&#34;]&#39; | \
</span></span><span style=display:flex><span>        timeout 15 websocat --text &#34;wss://$API_URL/user/$USER/terminals/websocket/$TERMINAL_NAME&#34; \
</span></span><span style=display:flex><span>        -H &#34;Authorization: token $token&#34; 2&gt;&amp;1 | head -10)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    if [ $? -eq 0 ] &amp;&amp; [ -n &#34;$WS_TEST&#34; ]; then
</span></span><span style=display:flex><span>        echo &#34;WebSocket response: $WS_TEST&#34;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        # Check if we got expected output format
</span></span><span style=display:flex><span>        if echo &#34;$WS_TEST&#34; | grep -q &#39;\[&#34;stdout&#34;&#39;; then
</span></span><span style=display:flex><span>            echo &#34;✅ WebSocket connection successful with proper output format&#34;
</span></span><span style=display:flex><span>            return 0
</span></span><span style=display:flex><span>        elif echo &#34;$WS_TEST&#34; | grep -q &#39;test_connection&#39;; then
</span></span><span style=display:flex><span>            echo &#34;✅ WebSocket connection successful&#34;
</span></span><span style=display:flex><span>            return 0
</span></span><span style=display:flex><span>        else
</span></span><span style=display:flex><span>            echo &#34;⚠️ WebSocket connected but unexpected format&#34;
</span></span><span style=display:flex><span>            echo &#34;Raw output: $WS_TEST&#34;
</span></span><span style=display:flex><span>            return 1
</span></span><span style=display:flex><span>        fi
</span></span><span style=display:flex><span>    else
</span></span><span style=display:flex><span>        echo &#34;❌ WebSocket connection failed&#34;
</span></span><span style=display:flex><span>        echo &#34;Error: $WS_TEST&#34;
</span></span><span style=display:flex><span>        return 1
</span></span><span style=display:flex><span>    fi
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Test with user token
</span></span><span style=display:flex><span>if test_websocket_connection &#34;$USER_TOKEN&#34;; then
</span></span><span style=display:flex><span>    echo &#34;✅ WebSocket connection working with user token&#34;
</span></span><span style=display:flex><span>else
</span></span><span style=display:flex><span>    echo &#34;❌ WebSocket connection failed&#34;
</span></span><span style=display:flex><span>    echo &#34;&#34;
</span></span><span style=display:flex><span>    echo &#34;🔍 Additional debugging info:&#34;
</span></span><span style=display:flex><span>    echo &#34;- Terminal exists: $TERMINAL_NAME&#34;
</span></span><span style=display:flex><span>    echo &#34;- User token: ${USER_TOKEN}...&#34;
</span></span><span style=display:flex><span>    echo &#34;- API accessible: $(curl -k -s -o /dev/null -w &#34;%{http_code}&#34; &#34;$API_URL&#34;)&#34;
</span></span><span style=display:flex><span>    echo &#34;- WebSocket URL: ws://$API_URL/user/$USER/terminals/websocket/$TERMINAL_NAME&#34;
</span></span><span style=display:flex><span>fi
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Function to send command and get response
</span></span><span style=display:flex><span>send_command() {
</span></span><span style=display:flex><span>    local cmd=&#34;$1&#34;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    echo &#34;Testing command: $cmd&#34;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    local clean_api_url=${API_URL#*//}
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    local output=&#34;&#34;
</span></span><span style=display:flex><span>    for attempt in {1..3}; do
</span></span><span style=display:flex><span>        echo &#34;  Attempt $attempt...&#34;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        echo &#34;$ $cmd&#34;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        # Send command
</span></span><span style=display:flex><span>        echo &#34;[\&#34;stdin\&#34;, \&#34;$cmd\\r\\n\&#34;]&#34; | \
</span></span><span style=display:flex><span>            timeout 15 websocat --text \
</span></span><span style=display:flex><span>            &#34;wss://$clean_api_url/user/$USER/terminals/websocket/$TERMINAL_NAME&#34; \
</span></span><span style=display:flex><span>            -H &#34;Authorization: token $USER_TOKEN&#34;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        sleep 10
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        # get the terminal output
</span></span><span style=display:flex><span>        local output=$(echo &#39;[&#34;stdin&#34;, &#34;&#34;]&#39; | \
</span></span><span style=display:flex><span>            timeout 15 websocat --text \
</span></span><span style=display:flex><span>            &#34;wss://$clean_api_url/user/$USER/terminals/websocket/$TERMINAL_NAME&#34; \
</span></span><span style=display:flex><span>            -H &#34;Authorization: token $USER_TOKEN&#34;)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        if [ -n &#34;$output&#34; ]; then
</span></span><span style=display:flex><span>            echo &#34;$output&#34; | \
</span></span><span style=display:flex><span>            grep &#39;^\[&#34;stdout&#34;&#39; | \
</span></span><span style=display:flex><span>            sed &#39;s/^\[&#34;stdout&#34;, *&#34;//; s/&#34;\]$//&#39; | \
</span></span><span style=display:flex><span>            sed &#39;s/\\u001b\[[?]*[0-9;]*[a-zA-Z]//g; s/\\r\\n/\n/g; s/\\r/\n/g&#39; | \
</span></span><span style=display:flex><span>            # sed -n &#34;/\$ $cmd/,/\$ /p&#34; | \
</span></span><span style=display:flex><span>            sed &#39;1d; $d&#39; | \
</span></span><span style=display:flex><span>            grep -v &#34;^$&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            return 0
</span></span><span style=display:flex><span>        fi
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        echo &#34;(no output), response: ${output}&#34;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        sleep 2
</span></span><span style=display:flex><span>    done
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    echo &#34;  ❌ Command failed after 3 attempts&#34;
</span></span><span style=display:flex><span>    echo &#34;  Output: $output&#34;
</span></span><span style=display:flex><span>    return 1
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>send_command &#34;touch test3.txt&#34;
</span></span><span style=display:flex><span>send_command &#34;ls&#34;
</span></span><span style=display:flex><span>send_command &#34;ml fsl; fslmaths&#34;
</span></span><span style=display:flex><span>send_command &#34;pwd&#34;
</span></span><span style=display:flex><span>send_command &#34;ml ants; antsRegistration&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># To start an interactive terminal session
</span></span><span style=display:flex><span>interactive_terminal() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    local clean_api_url=${API_URL#*//}
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    echo &#34;=== Interactive Terminal Started ===&#34;
</span></span><span style=display:flex><span>    echo &#34;Type &#39;exit&#39; to quit&#34;
</span></span><span style=display:flex><span>    echo &#34;==================================&#34;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    while true; do
</span></span><span style=display:flex><span>        echo -n &#34;$ &#34;
</span></span><span style=display:flex><span>        read -r user_cmd
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        # Exit condition
</span></span><span style=display:flex><span>        if [[ &#34;$user_cmd&#34; == &#34;exit&#34; ]]; then
</span></span><span style=display:flex><span>            echo &#34;Terminal session ended.&#34;
</span></span><span style=display:flex><span>            break
</span></span><span style=display:flex><span>        fi
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        # Skip empty commands
</span></span><span style=display:flex><span>        if [[ -z &#34;$user_cmd&#34; ]]; then
</span></span><span style=display:flex><span>            continue
</span></span><span style=display:flex><span>        fi
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        echo &#34;Executing: $user_cmd&#34;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        # Send command
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        echo &#34;[\&#34;stdin\&#34;, \&#34;$user_cmd\\r\\n\&#34;]&#34; | \
</span></span><span style=display:flex><span>            timeout 15 websocat --text \
</span></span><span style=display:flex><span>            &#34;wss://$clean_api_url/user/$USER/terminals/websocket/$TERMINAL_NAME&#34; \
</span></span><span style=display:flex><span>            -H &#34;Authorization: token $USER_TOKEN&#34; 
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        sleep 10
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        # get the terminal output
</span></span><span style=display:flex><span>        local output=$(echo &#39;[&#34;stdin&#34;, &#34;&#34;]&#39; | \
</span></span><span style=display:flex><span>            timeout 15 websocat --text \
</span></span><span style=display:flex><span>            &#34;wss://$clean_api_url/user/$USER/terminals/websocket/$TERMINAL_NAME&#34; \
</span></span><span style=display:flex><span>            -H &#34;Authorization: token $USER_TOKEN&#34;)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        if [ -n &#34;$output&#34; ]; then
</span></span><span style=display:flex><span>            echo &#34;$output&#34; | \
</span></span><span style=display:flex><span>            grep &#39;^\[&#34;stdout&#34;&#39; | \
</span></span><span style=display:flex><span>            sed &#39;s/^\[&#34;stdout&#34;, *&#34;//; s/&#34;\]$//&#39; | \
</span></span><span style=display:flex><span>            sed &#39;s/\\u001b\[[?]*[0-9;]*[a-zA-Z]//g; s/\\r\\n/\n/g; s/\\r/\n/g&#39; | \
</span></span><span style=display:flex><span>            # sed -n &#34;/\$ $user_cmd/,/\$ /p&#34; | \
</span></span><span style=display:flex><span>            sed &#39;1d; $d&#39; | \
</span></span><span style=display:flex><span>            grep -v &#34;^$&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        else
</span></span><span style=display:flex><span>            echo &#34;(output error, response:)  ${output}&#34;
</span></span><span style=display:flex><span>        fi
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        echo &#34;&#34; 
</span></span><span style=display:flex><span>    done
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>interactive_terminal</span></span></code></pre></div></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Mastodon aria-label=Mastodon><a target=_blank rel=noopener href=https://masto.ai/@Neurodesk aria-label=Mastodon><i class="fab fa-mastodon responsive-icon"></i>&nbsp;&nbsp;Mastodon</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Discussion aria-label=Discussion><a target=_blank rel=noopener href=https://github.com/orgs/NeuroDesk/discussions aria-label=Discussion><i class="fa fa-envelope responsive-icon"></i>&nbsp;&nbsp;Discussion</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Acknowledgements aria-label=Acknowledgements><a target=_blank rel=noopener href=https://neurodesk.org/overview/acknowledgement/ aria-label=Acknowledgements><i class="fa fa-handshake responsive-icon"></i>&nbsp;&nbsp;Acknowledgements</a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Metrics aria-label=Metrics><a target=_blank rel=noopener href=https://neurodesk.org/docs/overview/metrics aria-label=Metrics><i class="fa fa-signal responsive-icon"></i>&nbsp;&nbsp;Metrics</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Uptime aria-label=Uptime><a target=_blank rel=noopener href=https://stats.uptimerobot.com/NBE38IZWZM aria-label=Uptime><i class="fa fa-circle responsive-icon"></i>&nbsp;&nbsp;Uptime</a></li></ul></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://neurodesk.org/js/main.min.371147b5f79a80912e5b0a2cd8f59889c6f0ac501947707b50f470099ce2141c.js integrity="sha256-NxFHtfeagJEuWwos2PWYicbwrFAZR3B7UPRwCZziFBw=" crossorigin=anonymous></script><script defer src=https://neurodesk.org/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.8.2 integrity="sha512-lsD+XVzdBI6ZquXc8gqbw0/bgrfIsMJwY/8xvmvbN+U3gZSeG7BXQoCq4zv/yCmntR2GLHtgB+bD4ESPsKIbIA==" crossorigin=anonymous></script><script type=text/javascript>const containers=["#docsearch-0","#docsearch-1"];for(let e of containers)docsearch({container:e,appId:"P5JEPQ5LZ2",apiKey:"56c6d9a954f7df2a98dcedb2763af8c4",indexName:"neurodesk"})</script><script src=https://neurodesk.org/js/tabpane-persist.js></script></body></html>