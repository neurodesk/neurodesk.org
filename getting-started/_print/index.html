<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://neurodesk.org/getting-started/><link rel=alternate type=application/rss+xml href=https://neurodesk.org/getting-started/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=https://neurodesk.org/static/favicons/favicon.ico><link rel=apple-touch-icon href=https://neurodesk.org/static/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-192x192.png sizes=192x192><title>Get started with Neurodesk | Neurodesk</title>
<meta name=description content="Select your setups and follow further instructions in the provided link. Compute Platform Your OS Interface Processor Instructions: Compute Platform Local PC HPC Cloud Google Colab Operating System Linux Mac Windows Interface Desktop Command Line Container VSCode Processor x86 ARM GPU Instructions: Release Ensure you note the release date of the Neurodesktop container image during installation, as it is indicated in the docker run command, e.g."><meta property="og:url" content="https://neurodesk.org/getting-started/"><meta property="og:site_name" content="Neurodesk"><meta property="og:title" content="Get started with Neurodesk"><meta property="og:description" content="Select your setups and follow further instructions in the provided link. Compute Platform Your OS Interface Processor Instructions: Compute Platform Local PC HPC Cloud Google Colab Operating System Linux Mac Windows Interface Desktop Command Line Container VSCode Processor x86 ARM GPU Instructions: Release Ensure you note the release date of the Neurodesktop container image during installation, as it is indicated in the docker run command, e.g."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Get started with Neurodesk"><meta itemprop=description content="Select your setups and follow further instructions in the provided link. Compute Platform Your OS Interface Processor Instructions: Compute Platform Local PC HPC Cloud Google Colab Operating System Linux Mac Windows Interface Desktop Command Line Container VSCode Processor x86 ARM GPU Instructions: Release Ensure you note the release date of the Neurodesktop container image during installation, as it is indicated in the docker run command, e.g."><meta itemprop=dateModified content="2025-11-02T12:11:38+10:00"><meta itemprop=wordCount content="150"><meta name=twitter:card content="summary"><meta name=twitter:title content="Get started with Neurodesk"><meta name=twitter:description content="Select your setups and follow further instructions in the provided link. Compute Platform Your OS Interface Processor Instructions: Compute Platform Local PC HPC Cloud Google Colab Operating System Linux Mac Windows Interface Desktop Command Line Container VSCode Processor x86 ARM GPU Instructions: Release Ensure you note the release date of the Neurodesktop container image during installation, as it is indicated in the docker run command, e.g."><link rel=preload href=https://neurodesk.org/scss/main.min.2f0e7dd254a8510650f53c8ffbf7f9af0cc4e0d57d8872fb80c52b2440db9e88.css as=style integrity="sha256-Lw590lSoUQZQ9TyP+/f5rwzE4NV9iHL7gMUrJEDbnog=" crossorigin=anonymous><link href=https://neurodesk.org/scss/main.min.2f0e7dd254a8510650f53c8ffbf7f9af0cc4e0d57d8872fb80c52b2440db9e88.css rel=stylesheet integrity="sha256-Lw590lSoUQZQ9TyP+/f5rwzE4NV9iHL7gMUrJEDbnog=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.8.2 integrity="sha512-l7pkV1dOURFyHCeH8I4fK9lCkQKuqhlsTCqRl3zktifDlB8oTUJ+mJPgYkK9kHpUut8j1iPquTv32t6hvTPv3g==" crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z9774J59Y"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4Z9774J59Y")}</script></head><body class=td-section><header><nav class="td-navbar navbar-expand-xl navbar-dark bg-dark"><div class="container-fluid flex-md-row"><a class=navbar-brand href=https://neurodesk.org/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" viewBox="0 0 560.3 82.7"><defs><style>.st0{isolation:isolate}.st1{fill:#6ba442}.st2{fill:#fff}</style></defs><g class="st0"><path class="st2" d="M30.2 73.4h-9.9v-60h9.8l33.3 44.8V13.4h10.1v60H63.4L30.1 29.1v44.3z"/><path class="st2" d="M85.8 13.4h45l-1.4 10.3-33.8-.2v13.6l20.1-.2v11.4H95.6v13.5H129l1.8 11.6h-45v-60z"/><path class="st2" d="M141.4 13.4h9.9v50.2h28.2V13.4h9.9v51.4c0 1.2-.2 2.3-.7 3.3-.4 1-1.1 2-1.8 2.7-.8.8-1.7 1.4-2.8 1.8-1.1.4-2.2.7-3.3.7h-30.7c-1.2.0-2.3-.2-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7s-.7-2.2-.7-3.3V13.4z"/><path class="st2" d="M244.7 34.8c0 4.6-1.4 7.9-4.3 10-4 2.9-8.4 4.4-13.2 4.4l17.5 24.3h-12.1l-14.7-24h-9.5v24h-8.5V13.4h29.8c10 0 15 4.9 15 14.6v6.8zm-36.3 6h15.2c3.9-.2 6.6-.7 8-1.6 2.6-1.8 3.9-2.9 3.9-3.5V29c0-2.2-.6-3.9-1.7-5-1.4-1.4-3-2.1-4.7-2.1h-20.8v18.9z"/><path class="st2" d="M306.5 59.4c0 4.8-.3 7.7-.6 8.7-.3.9-.9 1.8-1.8 2.8s-1.7 1.3-3.1 1.8c-1.3.5-3.6.7-6.8.7h-27.1c-1.2.0-2.8-.2-5-.6-2.5-.5-3.9-1.1-4.4-1.8-.9-1.5-1.6-2.4-1.8-2.7-.4-.6-.7-3.6-.7-8.7V42.1c0-8.8.0-14.1.2-15.9.0-2.6.3-5 .7-7.4.1-.8.7-1.7 1.7-2.7.6-.7 2.1-1.3 4.4-1.8 1.9-.4 3.5-.7 5-.7h27.1c3.5.0 5.7.1 6.8.6 1.3.5 2.3 1.1 3.1 1.9.9.8 1.5 1.7 2 2.7.4.8.6 3.3.6 7.4l.2 16.7c0 8.1-.1 13.6-.3 16.7zM265.4 23.3v40h31.2v-40h-31.2z"/></g><g class="st0"><path class="st1" d="M316.2 73.4v-60l31.3.3c2.5.0 5.4.6 8.7 1.9 2.6 1 4.8 2.4 6.6 4.3 2 2 3.4 4.2 4.3 6.6 1 3 1.5 5.9 1.5 8.7v17.3c0 3.2-.5 6.1-1.5 8.7s-2.4 4.8-4.2 6.6-4 3.2-6.6 4.2-5.5 1.5-8.7 1.5h-31.3zm30.7-11.2c4.9.0 8-.7 9.2-2 2.1-2.3 3.2-5.8 3.2-10.4v-14c.2-1.9-.2-3.6-1.1-5.2-.8-1.5-1.8-2.8-2.9-3.9-1.1-1.1-2.4-1.9-3.9-2.4-1.5-.6-3-.8-4.4-.8h-21.3v38.8h21.2z"/><path class="st1" d="M381 13.4h45l-1.4 10.3-33.8-.2v13.6l20.1-.2v11.4h-20.1v13.5h33.4l1.8 11.6h-45v-60z"/><path class="st1" d="M446.4 46.5c-1.1.0-2.2-.3-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7-.4-1-.7-2.2-.7-3.3V22.1c0-1.2.2-2.3.7-3.3s1.1-2 1.8-2.7 1.7-1.4 2.8-1.8 2.2-.7 3.3-.7h29.1c1.2.0 2.3.2 3.3.7s1.9 1.1 2.7 1.8c1.1 1 1.7 2 1.8 2.8l.7 3.3v6.7l-9 2.7v-7.7h-28.7v14.3l29.1.5c1.2.0 2.3.3 3.3.7 1.1.4 2 1.1 2.8 1.8.8.8 1.4 1.7 1.8 2.7.4 1 .7 2.2.7 3.3V65c0 1.2-.2 2.3-.7 3.3-.4 1-1.1 2-1.8 2.7-.8.8-1.7 1.4-2.7 1.8-1 .4-2.1.7-3.3.7h-30c-1.2.0-2.3-.2-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7-.4-1-.7-2.2-.7-3.3v-7.7l9.5-1.6v7.7h28.7V47.2l-28.7-.5z"/><path class="st1" d="M505.4 13.4v23.9l26.2-23.9h12.9l-30.8 27.4 32.1 32.6h-12.9l-27.5-28.1v28.1h-10.6v-60h10.6z"/></g></svg></span></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=main_navbar><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/overview/><span>Overview</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class="nav-link active" href=https://neurodesk.org/getting-started/><span class=active>Getting Started</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/tutorials-examples/><span>Tutorials & Examples</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/developers/><span>Developer Documentation</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/NeuroDesk target=_blank><span>GitHub</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/contact/><span>Contact</span></a></li></ul><div class="navbar-nav d-lg-block"><div class=td-search><div class=td-search--algolia id=docsearch-0></div></div></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=https://neurodesk.org/getting-started/>Return to the regular view of this page</a>.</p></div><h1 class=title>Get started with Neurodesk</h1><ul><li>1: <a href=#pg-51926247142054c44950a67d5d82fb90>Local</a></li><ul><li>1.1: <a href=#pg-9f7f20298557bac36095720280925348>Examples</a></li><li>1.2: <a href=#pg-a4f3f813df27f34aac3f7212b6e8cce8>Neurodesk App</a></li></ul><li>2: <a href=#pg-03f12376c689f4b0f0ed82e4eeeb463f>Hosted</a></li><ul><li>2.1: <a href=#pg-68e3db118deede6b3a729669e8533ef4>Github Codespaces</a></li><li>2.2: <a href=#pg-2b8a09a691d56dabf7f6fa9979afe629>Bunya</a></li><li>2.3: <a href=#pg-9d360195bedd3bef69c36c8ca2b067a2>Nectar Virtual Desktop Service</a></li><li>2.4: <a href=#pg-5d7e6180ebfc1e80aced18bfef481f61>Play</a></li><li>2.5: <a href=#pg-9bb18ebce1092e6778803622f9d0ede5>Google Colab</a></li></ul><li>3: <a href=#pg-05abcbbabf36d1e212bbb61f6bf5f83b>Neurodesktop</a></li><ul><li>3.1: <a href=#pg-789b740730b08b25fb4aea99f30c64ad>Portable Unprivileged NeuroDesktop</a></li><li>3.2: <a href=#pg-358e26c7122eb50b5be7ea42d1285a52>Linux</a></li><li>3.3: <a href=#pg-37f6716bebc68b8b3d205a7dad9ea43a>MacOS</a></li><li>3.4: <a href=#pg-a6c2244925f149988e14d688e5c4af0e>Windows</a></li><li>3.5: <a href=#pg-d7064633d2b50c507b7274b9ea2c2dc0>Cloud</a></li><li>3.6: <a href=#pg-16206d6e7c6d00ab068079dbf4839b63>Data Storage</a></li></ul><li>4: <a href=#pg-e2f2f20a59ead737454fcded981ab689>Neurocommand</a></li><ul><li>4.1: <a href=#pg-6987a8204c89de50b7b62218a9346804>Linux and HPC</a></li><li>4.2: <a href=#pg-2848cfc675dcf08317b0e0a4a44ba198>Windows</a></li><li>4.3: <a href=#pg-6f6d6eb96124ff36a4032864b85d7fcd>Visual Studio Code</a></li></ul><li>5: <a href=#pg-bdff14fa4e0deb6ab9cfe6b64a103097>Neurocontainers</a></li><ul><li>5.1: <a href=#pg-9341599ceaaad02e5f7da1a3beee568a>CVMFS</a></li><li>5.2: <a href=#pg-49d0352733bb165ba628562dfd61ca4d>DataLad</a></li><li>5.3: <a href=#pg-1b25d69307756f9ec28868f9217a4bc3>Docker</a></li><li>5.4: <a href=#pg-38076a15e096b2be19f34c03e8bc0e7b>Open Recon</a></li><li>5.5: <a href=#pg-e0bd210b2d2da10725008fb55e28ffb0>Singularity</a></li><li>5.6: <a href=#pg-fa663b80c7a5dbfaaf21ca791272c2b8>Windows 11 and Windows Subsystem for Linux</a></li></ul></ul><div class=content><section id=startup class="row -bg-light justify-content-left h-auto col-big-desktop"><div class=td-box><p class="lead mt-2">Select your setups and follow further instructions in the provided link.</p></div><div class="container-fluid quick-starts"><div class=container><div class=row><div class="col-md-10 start-locally-col"><div class=row><div class="col-md-3 headings"><div class="col-md-12 title-block"><div class=option-text>Compute Platform</div></div><div class="col-md-12 title-block"><div class=option-text>Your OS</div></div><div class="col-md-12 title-block"><div class=option-text>Interface</div></div><div class="col-md-12 title-block"><div class=option-text>Processor</div></div><div class="col-md-12 title-block command-block"><div class="option-text command-text">Instructions:</div></div></div><div class=col-md-9><div class="row platform"><div class="col-md-12 title-block mobile-heading"><div class=option-text>Compute Platform</div></div><div class="col-md-3 option block version" id=local><div class=option-text>Local PC</div></div><div class="col-md-3 option block version" id=hpc><div class=option-text>HPC</div></div><div class="col-md-3 option block version" id=cloud><div class=option-text>Cloud</div></div><div class="col-md-3 option block version" id=colab><div class=option-text>Google Colab</div></div></div><div class="row os"><div class="col-md-12 title-block mobile-heading"><div class=option-text>Operating System</div></div><div class="col-md-4 option block" id=linux><div class=option-text>Linux</div></div><div class="col-md-4 option block" id=macos><div class=option-text>Mac</div></div><div class="col-md-4 option block" id=windows><div class=option-text>Windows</div></div></div><div class="row interface"><div class="col-md-12 title-block mobile-heading"><div class=option-text>Interface</div></div><div class="col-md-3 option block version selected" id=gui><div class=option-text>Desktop</div></div><div class="col-md-3 option block version" id=cmd><div class=option-text>Command Line</div></div><div class="col-md-3 option block version" id=container><div class=option-text>Container</div></div><div class="col-md-3 option block version" id=vscode><div class=option-text>VSCode</div></div></div><div class="row processor"><div class="col-md-12 title-block mobile-heading"><div class=option-text>Processor</div></div><div class="col-md-4 option block" id=x86><div class=option-text>x86</div></div><div class="col-md-4 option block" id=arm><div class=option-text>ARM</div></div><div class="col-md-4 option block" id=gpu><div class=option-text>GPU</div></div></div><div class="row instruction"><div class="col-md-12 title-block command-mobile-heading"><div class=option-text>Instructions:</div></div><div class=command-container><div class=col-md-12 id=command></div></div></div></div></div></div></div></div></div></section><script src=https://neurodesk.org/static/js/command.js></script><h2 id=release>Release</h2><p>Ensure you note the release date of the Neurodesktop container image during installation, as it is indicated in the <em>docker run</em> command, e.g.</p><p><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/version.png alt=version title=version></p><p>We regularly update Neurodesktop for optimal performance and updated software. Check the <a href=https://neurodesk.org/docs/overview/release-history>Release History</a> for past releases. To upgrade your container, replace the release number with your desired version. For replicable analysis pipelines, share the stable release number you used, enabling others to recreate your work environment anywhere.</p><h2 id=video-tutorial>Video tutorial</h2><p>See below for a 14 minute tutorial on getting started.<div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/2ATgTOsiGdY?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div></p><p>You can also view this PowerPoint presentation that includes dynamic navigation and interactive buttons: <a href=https://osf.io/f2n7a target=_blank rel=noopener>Neurodesk Overview SlideShow</a> - and <a href=https://osf.io/ca8rw target=_blank rel=noopener>PDF version of the presentation</a></p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-51926247142054c44950a67d5d82fb90>1 - Local</h1><div class=lead>For simple interface and local installation</div></div><div class=td-content><h1 id=pg-9f7f20298557bac36095720280925348>1.1 - Examples</h1><div class=lead>Installation Examples</div><p>On this page we show specific examples of the different ways of how Neurodesk can be installed on a local computer. We start from the highest level using the Neurodesk app, then go lower level via docker, neurocommand and down to the lowest level using neurocontainers. We also show on each level how containers can be streamed via CVMFS or downloaded locally.</p><h1 id=running-neurodesk-on-a-ubuntu-2404-computer>Running Neurodesk on a Ubuntu 24.04 computer</h1><p>On a linux machine you have mutliple options to use Neurodesk:</p><ol><li>Highest abstraction level, and easiest option: Neurodeskapp - this provides you a full Linux desktop with everything configured you need. You do not need to think about Docker or Singularity containers and you can just get your work done. This is the recommended option.</li><li>High abstraction level: Running Neurodesktop via Docker manually - you still get the desktop with everything configured, but you now have to manage the docker container yourself. This is useful when the app doesn&rsquo;t work well - for example in a remote SSH setup.</li><li>Middle abstraction level: Use the containers through wrapper scripts on the terminal through Neurocommand - this is great if you don&rsquo;t need a full desktop environment and you want to use the neurodesk tools in your scripts. Neurocommand handles multiple containers for you and you just run your tools as you are used to without having to think about the fact that they are running in singularity/apptainer containers</li><li>Low abstraction level: Use the containers on the terminal directly - if you just want ot use the containers directly and you want to do everything yourself, that&rsquo;s the best option for you :)</li></ol><h2 id=highest-abstraction-level-and-easiest-option-neurodeskapp>Highest abstraction level, and easiest option: Neurodeskapp</h2><p>Download Neurodeskapp: <a href=https://github.com/NeuroDesk/neurodesk-app/releases/latest/download/NeurodeskApp-Setup-Debian-x64.deb target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesk-app/releases/latest/download/NeurodeskApp-Setup-Debian-x64.deb</a></p><p>and Install:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install ./NeurodeskApp-Setup-Debian-x64.deb</span></span></code></pre></div></div><p>Install Docker:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># Add Docker&#39;s official GPG key:</span>
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install ca-certificates curl
</span></span><span style=display:flex><span>sudo install -m <span style=color:#0550ae>0755</span> -d /etc/apt/keyrings
</span></span><span style=display:flex><span>sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
</span></span><span style=display:flex><span>sudo chmod a+r /etc/apt/keyrings/docker.asc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Add the repository to Apt sources:</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  <span style=color:#0a3069>&#34;deb [arch=</span><span style=color:#cf222e>$(</span>dpkg --print-architecture<span style=color:#cf222e>)</span><span style=color:#0a3069> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  </span><span style=color:#cf222e>$(</span>. /etc/os-release <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;</span><span style=color:#0a3069>${</span><span style=color:#953800>UBUNTU_CODENAME</span><span style=color:#cf222e>:-</span><span style=color:#953800>$VERSION_CODENAME</span><span style=color:#0a3069>}</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>)</span><span style=color:#0a3069> stable&#34;</span> <span style=color:#1f2328>|</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo groupadd docker
</span></span><span style=display:flex><span>sudo usermod -aG docker <span style=color:#953800>$USER</span>
</span></span><span style=display:flex><span>newgrp docker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo chown root:docker /var/run/docker.sock
</span></span><span style=display:flex><span>sudo chmod <span style=color:#0550ae>666</span> /var/run/docker.sock</span></span></code></pre></div></div><p>After installation run the following command to verify that Docker is working correctly:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run hello-world</span></span></code></pre></div></div><p>The Neurodeskapp can be launched directly from the application menu, or by running the <code>neurodeskapp</code> command in the command line.</p><p>In the Neurodeskapp settings you can choose if you want to stream or download containers to your system.</p><p>more information can be found here: <a href=https://neurodesk.org/docs/getting-started/local/neurodeskapp/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/local/neurodeskapp/</a></p><h2 id=high-abstraction-level-running-neurodesktop-via-docker-manually>High abstraction level: Running Neurodesktop via Docker manually</h2><p>If you run Ubuntu > 23.10 and you haven&rsquo;t installed the Neurodeskapp before you need to create this apparmor profile under /etc/apparmor.d/neurodeskapp</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>echo</span> -e <span style=color:#0a3069>&#34;# This profile allows everything and only exists to give the\n# application a name instead of having the label \&#34;unconfined\&#34;\n\nabi &lt;abi/4.0&gt;,\ninclude &lt;tunables/global&gt;\n\nprofile neurodeskapp \&#34;/opt/NeurodeskApp/neurodeskapp\&#34; flags=(unconfined) {\n  userns,\n\n  # Site-specific additions and overrides. See local/README for details.\n  include if exists &lt;local/neurodeskapp&gt;\n}&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/apparmor.d/neurodeskapp</span></span></code></pre></div></div><p>you also need to create the ~/neurodesktop-storage folder if you haven&rsquo;t used the app before:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p ~/neurodesktop-storage</span></span></code></pre></div></div><p>Make sure you have Docker installed and configured correctly (see Neurodeskapp for instructions), then run in a terminal:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker volume create neurodesk-home <span style=color:#0550ae>&amp;&amp;</span>
</span></span><span style=display:flex><span>sudo docker run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --shm-size<span style=color:#0550ae>=</span>1gb -it --security-opt <span style=color:#953800>apparmor</span><span style=color:#0550ae>=</span>neurodeskapp --privileged --user<span style=color:#0550ae>=</span>root --name neurodesktop <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --mount <span style=color:#953800>source</span><span style=color:#0550ae>=</span>neurodesk-home,target<span style=color:#0550ae>=</span>/home/jovyan <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -p 8888:8888 <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>2025-06-10 vnmd/neurodesktop:2025-06-10</span></span></code></pre></div></div><p>Then open the jupyter link with the token displayed in your browser. Make sure it starts with 127.0.0.1:8888/lab&amp;token=&mldr;</p><p>You can also add a flag to the docker command to activate the offline mode: -e CVMFS_DISABLE=true</p><p>when finished, make sure to delete the container - otherwise, you will get an error the next time you run the docker command:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker rm neurodesktop</span></span></code></pre></div></div><p>If you want to pass your GPU into the desktop, first install this on the host:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># Manually set the distribution to ubuntu22.04 (works with Ubuntu 24.04) - because it doens&#39;t exist yet for 24.04</span>
</span></span><span style=display:flex><span><span style=color:#953800>distribution</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;ubuntu22.04&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Add the NVIDIA container toolkit repo using the 22.04 version</span>
</span></span><span style=display:flex><span>curl -s -L https://nvidia.github.io/libnvidia-container/<span style=color:#953800>$distribution</span>/libnvidia-container.list <span style=color:#1f2328>|</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  sed <span style=color:#0a3069>&#39;s|^deb |deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit.gpg] |&#39;</span> <span style=color:#1f2328>|</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list &gt; /dev/null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Update package lists</span>
</span></span><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install -y nvidia-container-toolkit
</span></span><span style=display:flex><span>sudo nvidia-ctk runtime configure --runtime<span style=color:#0550ae>=</span>docker
</span></span><span style=display:flex><span>sudo systemctl restart docker</span></span></code></pre></div></div><p>Then start the neurodesktop container with the GPU flag:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --shm-size<span style=color:#0550ae>=</span>1gb -it --privileged --user<span style=color:#0550ae>=</span>root --name neurodesktop <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --gpus all <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -p 8888:8888 <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>2025-06-10 vnmd/neurodesktop:2025-06-10</span></span></code></pre></div></div><p>then export the &ndash;nv flag</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>neurodesk_singularity_opts</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;--nv&#34;</span> </span></span></code></pre></div></div><p>more information can be found here: <a href=https://neurodesk.org/docs/getting-started/neurodesktop/linux/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurodesktop/linux/</a></p><h2 id=middle-abstraction-level-use-the-containers-through-wrapper-scripts-on-the-terminal-through-neurocommand>Middle abstraction level: Use the containers through wrapper scripts on the terminal through Neurocommand</h2><p>For this you do not need Docker, but rather Apptainer or Singularity:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install -y software-properties-common
</span></span><span style=display:flex><span>sudo add-apt-repository -y ppa:apptainer/ppa
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install -y apptainer
</span></span><span style=display:flex><span>sudo apt-get install -y apptainer-suid</span></span></code></pre></div></div><p>Make sure you have Python configured on your system with pip3:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install python3-pip</span></span></code></pre></div></div><p>Then install neurocommand:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>cd</span> ~
</span></span><span style=display:flex><span>git clone https://github.com/NeuroDesk/neurocommand.git 
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> neurocommand 
</span></span><span style=display:flex><span>python3 -m venv ./venv
</span></span><span style=display:flex><span>./venv/bin/pip3 install -r neurodesk/requirements.txt
</span></span><span style=display:flex><span>bash build.sh --cli
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>APPTAINER_BINDPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>`</span><span style=color:#6639ba>pwd</span> -P<span style=color:#0a3069>`</span></span></span></code></pre></div></div><p>now you can search and install containers:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># this searches for containers and you can install individual containers by running the install commands displayed </span>
</span></span><span style=display:flex><span>bash containers.sh itksnap
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># this installs all containers matching the pattern itksnap</span>
</span></span><span style=display:flex><span>bash containers.sh --itksnap</span></span></code></pre></div></div><p>then link the containers directory to the neurodesktop-storage:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ln -s <span style=color:#953800>$PWD</span>/local/containers/ ~/neurodesktop-storage/ </span></span></code></pre></div></div><p>then you can install lmod:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install lmod</span></span></code></pre></div></div><p>and configure lmod:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># Create the module.sh file</span>
</span></span><span style=display:flex><span>sudo bash -c <span style=color:#0a3069>&#39;cat &gt; /usr/share/module.sh &lt;&lt; &#34;EOL&#34;
</span></span></span><span style=display:flex><span><span style=color:#0a3069># system-wide profile.modules                                          #
</span></span></span><span style=display:flex><span><span style=color:#0a3069># Initialize modules for all sh-derivative shells                      #
</span></span></span><span style=display:flex><span><span style=color:#0a3069>#----------------------------------------------------------------------#
</span></span></span><span style=display:flex><span><span style=color:#0a3069>trap &#34;&#34; 1 2 3
</span></span></span><span style=display:flex><span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>case &#34;$0&#34; in
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  -bash|bash|*/bash) . /usr/share/lmod/8.6.19/init/bash ;;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>     -ksh|ksh|*/ksh) . /usr/share/lmod/8.6.19/init/ksh ;;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>     -zsh|zsh|*/zsh) . /usr/share/lmod/8.6.19/init/zsh ;;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>      -sh|sh|*/sh) . /usr/share/lmod/8.6.19/init/sh ;;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>          *) . /usr/share/lmod/8.6.19/init/sh ;;  # default for scripts
</span></span></span><span style=display:flex><span><span style=color:#0a3069>esac
</span></span></span><span style=display:flex><span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>trap - 1 2 3
</span></span></span><span style=display:flex><span><span style=color:#0a3069>EOL&#39;</span></span></span></code></pre></div></div><p>then add the module setup to your ~/.bashrc:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat &gt;&gt; ~/.bashrc <span style=color:#0a3069>&lt;&lt; &#39;EOL&#39;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>if [ -f &#39;/usr/share/module.sh&#39; ]; then source /usr/share/module.sh; fi
</span></span></span><span style=display:flex><span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>if [ -d /cvmfs/neurodesk.ardc.edu.au/neurodesk-modules ]; then
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  module use /cvmfs/neurodesk.ardc.edu.au/neurodesk-modules/*
</span></span></span><span style=display:flex><span><span style=color:#0a3069>else
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  export MODULEPATH=&#34;~/neurodesktop-storage/containers/modules&#34;              
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  module use $MODULEPATH
</span></span></span><span style=display:flex><span><span style=color:#0a3069>fi
</span></span></span><span style=display:flex><span><span style=color:#0a3069>EOL</span></span></span></code></pre></div></div><p>make sure you have set the APPTAINER_BINDPATH to all directories that you want the containers to access</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#cf222e>export</span> APPTAINER_BINDPATH<span style=color:#0550ae>=</span><span style=color:#f6f8fa;background-color:#82071e>`</span><span style=color:#0550ae>/</span>data<span style=color:#1f2328>,</span><span style=color:#0550ae>/</span>scratch<span style=color:#f6f8fa;background-color:#82071e>`</span></span></span></code></pre></div></div><p>you can also add this to your ~/.bashrc</p><p>then restart the terminal you can load and run the software using:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ml itksnap
</span></span><span style=display:flex><span>itksnap</span></span></code></pre></div></div><p>If you need nvidia gpu support activate via exporting this environment variable:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>neurodesk_singularity_opts</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;--nv&#39;</span></span></span></code></pre></div></div><p>If you get errors like this:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/opt/itksnap-4.0.2/lib/snap-4.0.2/ITK-SNAP: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.38&#39; not found (required by /.singularity.d/libs/libGLX.so.0)
</span></span><span style=display:flex><span>/opt/itksnap-4.0.2/lib/snap-4.0.2/ITK-SNAP: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.38&#39; not found (required by /.singularity.d/libs/libEGL.so.1)
</span></span><span style=display:flex><span>/opt/itksnap-4.0.2/lib/snap-4.0.2/ITK-SNAP: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.38&#39; not found (required by /.singularity.d/libs/libGLdispatch.so.0)</span></span></code></pre></div></div><p>This means that the glibc versions inside the container and outside the container are not compatible. You can either disable the GPU flag &ndash;nv or use a newer version of the container.</p><p>If you do not want to download the containers you can also stream the containers using CVMFS: <a href=https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/</a></p><p>more information: <a href=https://neurodesk.org/docs/getting-started/neurocommand/linux-and-hpc/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurocommand/linux-and-hpc/</a></p><h2 id=low-abstraction-level-use-the-containers-on-the-terminal-directly>Low abstraction level: Use the containers on the terminal directly</h2><p>for this you only need apptainer or singularity installed. See above for installation instructions.</p><p>Then you can download a container and run it directly:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a>#find out which containers are available:</span>
</span></span><span style=display:flex><span>curl -s https://raw.githubusercontent.com/NeuroDesk/neurocommand/main/cvmfs/log.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#select a container and download it:</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>container</span><span style=color:#0550ae>=</span>itksnap_3.8.0_20201208
</span></span><span style=display:flex><span>curl -X GET https://neurocontainers.neurodesk.org/<span style=color:#953800>$container</span>.simg -O
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>singularity shell itksnap_3.8.0_20201208.simg
</span></span><span style=display:flex><span>itksnap</span></span></code></pre></div></div><p>if you need nvidia GPU support, add &ndash;nv:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity shell --nv itksnap_3.8.0_20201208.simg
</span></span><span style=display:flex><span>itksnap</span></span></code></pre></div></div><p>If you want to stream the containers, follow these instructions for setting up CVMFS: <a href=https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/</a></p><p>then you can run:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>singularity shell /cvmfs/neurodesk.ardc.edu.au/containers/itksnap_3.8.0_20201208/itksnap_3.8.0_20201208.simg</span></span></code></pre></div></div><p>and the container will be streamed to you :)</p><p>More information about Download (offline) mode: <a href=https://neurodesk.org/docs/getting-started/neurocontainers/singularity/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurocontainers/singularity/</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-a4f3f813df27f34aac3f7212b6e8cce8>1.2 - Neurodesk App</h1><div class=lead>A cross-platform desktop application for Neurodesk: The easiest way to use Neurodesktop</div><img style=float:right src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/neurodesk-desktop.png width=750><h3 id=determine-system-privileges>Determine System Privileges</h3><p>Before running the app, check whether your system has privileged access (root/admin permissions). This determines which engine you need to use to run the app:</p><p>If you have privileged access → Use Docker or Podman Engine</p><p>If you do NOT have privileged access → Use TinyRange Engine, or run remote instance</p><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/engine-options.png width=400><h3 id=minimum-system-requirements>Minimum System Requirements</h3><ol><li>At least 5GB free space for neurodesktop base image.</li><li>One of the following options, depending on system privileges:</li></ol><ul><li><p>With privileged access: Docker or Podman to run respective engines</p></li><li><p>Without privileged access: TinyRange Engine (included with Neurodesk App) and QEMU (only on macOS)</p></li></ul><h2 id=downloading-neurodesk-app>Downloading Neurodesk App</h2><ul><li><a href=https://github.com/NeuroDesk/neurodesk-app/releases/latest/download/NeurodeskApp-Setup-Debian-x64.deb target=_blank rel=noopener>Debian, Ubuntu Linux Installer x64</a></li><li><a href=https://github.com/NeuroDesk/neurodesk-app/releases/latest/download/NeurodeskApp-Setup-Fedora-x64.rpm target=_blank rel=noopener>Red Hat, Fedora, SUSE Linux Installer x64</a></li><li><a href=https://github.com/NeuroDesk/neurodesk-app/releases/download/v1.8.0/NeurodeskApp-Setup-Debian-arm64.deb target=_blank rel=noopener>Debian, Ubuntu Linux Installer arm64</a></li><li><a href=https://github.com/NeuroDesk/neurodesk-app/releases/latest/download/NeurodeskApp-Setup-Fedora-arm64.rpm target=_blank rel=noopener>Red Hat, Fedora, SUSE Linux Installer arm64</a></li><li><a href=https://aur.archlinux.org/packages/neurodeskapp-bin target=_blank rel=noopener>Arch-based package via AUR</a></li><li><a href=https://github.com/NeuroDesk/neurodesk-app/releases/latest/download/NeurodeskApp-Setup-macOS-x64.dmg target=_blank rel=noopener>macOS Intel Installer</a>, <a href=https://github.com/neurodesk/neurodesk-app/releases/latest/download/NeurodeskApp-Setup-macOS-arm64.dmg target=_blank rel=noopener>macOS Apple silicon Installer</a></li><li><a href=https://github.com/NeuroDesk/neurodesk-app/releases/latest/download/NeurodeskApp-Setup-Windows.exe target=_blank rel=noopener>Windows Installer</a></li></ul><div class="alert alert-info" role=alert><p><strong>On Microsoft edge</strong>, follow these steps to download the executable file:</p><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/neurodeskapp-edge-download.png style=max-width:800px;width:100% alt="Microsoft Edge download steps"></div><h2 id=installing-docker>Installing Docker</h2><div class="alert alert-info" role=alert>Docker is required for starting a local instance of Neurodesk.<br>If only connecting to a remote Neurodesk servers, you may <strong>skip Installing Docker</strong></div><p>The Neurodesk App requires Docker to be installed on your computer. If you already have Docker installed, you can skip this step.</p><ul><li><a href=https://docs.docker.com/docker-for-windows/install/ target=_blank rel=noopener>Docker Desktop for Windows</a></li><li><a href=https://docs.docker.com/docker-for-mac/install/ target=_blank rel=noopener>Docker Desktop for Mac</a></li><li><a href=https://docs.docker.com/engine/install/ target=_blank rel=noopener>Docker Engine for Linux</a></li></ul><p>After installation, open a terminal (Linux/macOS) or command prompt (Windows) and run the following command to verify that Docker is working correctly:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker --version
</span></span><span style=display:flex><span>docker run hello-world</span></span></code></pre></div></div><h2 id=installing-qemu>Installing QEMU</h2><div class="alert alert-info" role=alert>QEMU is only needed if your using TinyRange on macOS.
It is not needed on Windows or Linux using TinyRange since it&rsquo;s included in the install.</div><p>The easist way to install QEMU on macOS is using <a href=https://brew.sh/ target=_blank rel=noopener>Homebrew</a>:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install qemu</span></span></code></pre></div></div><p>You can verify the installation by running:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>qemu-system-aarch64 --version</span></span></code></pre></div></div><h2 id=installing-neurodesk-app>Installing Neurodesk App</h2><p>If you have an existing Neurodesk App installation, please first uninstall it by following the uninstall instructions <a href=#uninstalling-neurodesk-app>here</a>. Then, install the app for your system:</p><ul><li>Debian, Ubuntu Linux Installer: <code>sudo apt install -f ./NeurodeskApp-Setup-Debian.deb</code></li><li>Red Hat, Fedora, SUSE Linux Installer: <code>sudo rpm -i NeurodeskApp-Setup-Fedora.rpm</code></li><li>Arch-based package via AUR: <code>yay neurodesk</code> (or follow instructions <a href=https://wiki.archlinux.org/title/Arch_User_Repository#Installing_and_upgrading_packages target=_blank rel=noopener>here</a>)</li><li>macOS Installer: Double click the downloaded dmg file, then drag the NeurodeskApp.app to the Applications folder; for starting the app: Right click on the NeurodeskApp.app and select &ldquo;Open&rdquo;. For Apple Silicon systems (M1/M2): Make sure to enable Rosetta support in the docker settings for best performance!</li><li>Windows Installer: Double click the downloaded exe file; Accept to install from an unknown publisher with Yes; then accept the license agreement and click finish at the end.</li></ul><h2 id=launching-neurodesk-app>Launching Neurodesk App</h2><p>The Neurodesk App can be launched directly from your operating system&rsquo;s application menu, or by running the <code>neurodeskapp</code> command in the command line.</p><blockquote><p>Note that the Neurodesk App will set the File Browser&rsquo;s root directory based on the launch method used. The default working directory is the user&rsquo;s home directory - this can be customized from the Settings dialog.</p></blockquote><h2 id=sessions-and-projects>Sessions and Projects</h2><p>Sessions represent local project launches and connections to existing Neurodesk servers. Each Neurodesk UI window in the app is associated with a separate session and sessions can be restored with the same configuration later on.</p><h3 id=session-start-options>Session start options</h3><p>You can start a new session by using the links at the Start section of the Welcome Page.</p><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/start-session.png style=max-width:800px;width:100% alt="Start session"><ul><li><code>Open Local Neurodesk..</code> creates a new session in the default working directory.</li><li><code>Connect to remote Neurodesk server..</code> creates a session by connecting to a remote Neurodesk server.</li></ul><p>Previously opened sessions are stored as part of application data and they are listed on the Welcome Page. Clicking an item in the <code>Recent sessions</code> list restores the selected session.</p><h2 id=connecting-to-local-neurodesk>Connecting to local Neurodesk</h2><p>Neurodesk App creates new Neurodesk sessions by launching a locally running Neurodesk server and connecting to it. To open a local instance, click the <code>Open Local Neurodesk..</code> button in the Start section of the Welcome Page.</p><p>This will show a Jupyterlab interface. There are two options to interact with Neurodesk through this interface:</p><ul><li>By clicking the <code>NeurodeskApp</code> icon on the right. This will launch a new window to start a Neurodesk interface.</li><li>By module loading containers on the left bar. You can interact with loaded modules through the command line interface.</li></ul><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/connect-to-local.png style=max-width:800px;width:100% alt="Connect to local"><h2 id=connecting-to-a-remote-neurodesk-server>Connecting to a remote Neurodesk Server</h2><p>It can also connect to an existing Neurodesk server instance that is running remotely. In order to connect to a server, click the <code>Connect to remote Neurodesk server..</code> button in the Start section of the Welcome Page.</p><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/connect-to-server.png style=max-width:800px;width:100% alt="Connect to server"><p>This will launch a dialog that automatically lists the remote Neurodesk server instances.</p><p>Select a server from the list or enter the URL of the Neurodesk application server. If the server requires a token for authentication, make sure to include it as a query parameter of the URL as well (<code>/lab?token=&lt;token-value></code>). After entering a URL hit <code>Enter</code> key to connect.</p><p>If the <code>Persist session data</code> option is checked, then the session information is stored and Neurodesk App will re-use this data on the next launch. If this option is not checked, the session data is automatically deleted at the next launch and servers requiring authentication will prompt for re-login.</p><p>You can delete the stored session data manually at any time by using the <code>Clear History</code> option in the Privacy tab of Settings dialog.</p><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/settings-privacy.png style=max-width:800px;width:100% alt="Settings privacy tab showing Clear History option"><h2 id=configuration-and-data-files>Configuration and data files</h2><p>Neurodesk App stores data in ~/neurodesktop-storage for Linux and Mac, or C:/neurodesktop-storage for Windows, as default.</p><h2 id=add-a-custom-data-directory>Add a Custom Data Directory</h2><p>Neurodesk App stores its data in the following locations:</p><ul><li><p>By default, /home/jovyan/neurodesktop-storage in the app (which is bound with local directory ~/neurodesktop-storage in Unix/MacOS or C:/neurodesktop-storage in Windows)</p></li><li><p>By choice, in the settings window below, select <code>Additional Directory</code> on the left side bar, click <code>Change</code> button to select the local directory, then click <code>Apply & restart</code>. The next time you start the app, the data from the local directory can be found in /home/jovyan/data.</p></li></ul><div class="alert alert-info" role=alert>If you are using Windows it is currently not possible to mount external hard drives. We recommend copying data from the external drive to your local disk first and then processing it in Neurodesk.</div><div class="alert alert-info" role=alert><p>If you are using MacOS and Docker mounting an external hard drive will work out of the box. If you are using Podman you have to modify the Podman machine settings with the following commands once and then set the path in the Neurodesk App:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>podman machine reset -f   
</span></span><span style=display:flex><span>podman machine init --rootful --now -v /Volumes:/Volumes -v $HOME:$HOME podman-machine-default</span></span></code></pre></div></div></div><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/additional_dir.png style=max-width:800px;width:100% alt="Additional Directory settings interface"><div class="alert alert-info" role=alert>If you are using conda environments and you are installing packages or even new kernels, make sure to read this: <a href=https://neurodesk.org/tutorials-examples/tutorials/programming/conda/ target=_blank rel=noopener>https://neurodesk.org/tutorials-examples/tutorials/programming/conda/</a></div><h2 id=troubleshooting-neurodesk-app>Troubleshooting Neurodesk App</h2><h3 id=varrundockersock-connect-permission-denied-docker>/var/run/docker.sock: connect: permission denied, docker</h3><p>This means that docker is not correctly setup yet, run:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>sudo groupadd docker
</span></span><span style=display:flex><span>sudo usermod <span style=color:#0550ae>-</span>aG docker <span style=color:#0550ae>$</span>USER
</span></span><span style=display:flex><span>newgrp docker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo chown root<span style=color:#1f2328>:</span>docker <span style=color:#0550ae>/</span><span style=color:#cf222e>var</span><span style=color:#0550ae>/</span>run<span style=color:#0550ae>/</span>docker<span style=color:#0550ae>.</span>sock
</span></span><span style=display:flex><span>sudo chmod <span style=color:#0550ae>666</span> <span style=color:#0550ae>/</span><span style=color:#cf222e>var</span><span style=color:#0550ae>/</span>run<span style=color:#0550ae>/</span>docker<span style=color:#0550ae>.</span>sock</span></span></code></pre></div></div><h3 id=fatalsetuid_sandbox_hostcc158>FATAL:setuid_sandbox_host.cc(158)</h3><p>If you see the error &ldquo;FATAL:setuid_sandbox_host.cc(158)] The SUID sandbox helper binary was found, but is not configured correctly. Rather than run without sandboxing I&rsquo;m aborting now. You need to make sure that /opt/NeurodeskApp/chrome-sandbox is owned by root and has mode 4755.
Trace/breakpoint trap (core dumped)&rdquo; this is caused by a recent change in Ubuntu 24.04.</p><p>A temporary workaround: Create the file /etc/apparmor.d/neurodeskapp
With this content:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># This profile allows everything and only exists to give the
</span></span><span style=display:flex><span># application a name instead of having the label &#34;unconfined&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>abi &lt;abi/4.0&gt;,
</span></span><span style=display:flex><span>include &lt;tunables/global&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>profile neurodeskapp &#34;/opt/NeurodeskApp/neurodeskapp&#34; flags=(unconfined) {
</span></span><span style=display:flex><span>  userns,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  # Site-specific additions and overrides. See local/README for details.
</span></span><span style=display:flex><span>  include if exists &lt;local/neurodeskapp&gt;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><p>Then restart your computer. Then try to start the neurodesk app again.</p><h2 id=uninstalling-neurodesk-app>Uninstalling Neurodesk App</h2><h3 id=debian-ubuntu-linux>Debian, Ubuntu Linux</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get purge neurodeskapp <span style=color:#57606a># remove application</span>
</span></span><span style=display:flex><span>sudo rm /usr/bin/neurodeskapp <span style=color:#57606a># remove command symlink</span>
</span></span><span style=display:flex><span>rm -rf ~/.config/neurodeskapp <span style=color:#57606a># to remove application cache</span></span></span></code></pre></div></div><h3 id=red-hat-fedora-suse-linux>Red Hat, Fedora, SUSE Linux</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo rpm -e neurodeskapp <span style=color:#57606a># remove application</span>
</span></span><span style=display:flex><span>sudo rm /usr/bin/neurodeskapp <span style=color:#57606a># remove command symlink</span>
</span></span><span style=display:flex><span>rm -rf ~/.config/neurodeskapp <span style=color:#57606a># to remove application cache</span></span></span></code></pre></div></div><h3 id=arch-based-linux-distributions>Arch-based Linux distributions</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo pacman -Rs neurodeskapp-bin</span></span></code></pre></div></div><h3 id=macos>macOS</h3><p>Find the application installation <code>NeurodeskApp.app</code> in Finder (in /Applications or ~/Applications) and move to Trash by using <code>CMD + Delete</code>. Clean other application generated files using:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rm -rf ~/Library/neurodeskapp <span style=color:#57606a># to remove application cache</span>
</span></span><span style=display:flex><span>rm -rf ~/Library/Application<span style=color:#0a3069>\ </span>Support/neurodeskapp <span style=color:#57606a># to remove user data</span></span></span></code></pre></div></div><h3 id=windows>Windows</h3><p>On Windows, go to <code>Windows Apps & Features</code> dialog using <code>Start Menu</code> -> <code>Settings</code> -> <code>Apps</code> and uninstall Neurodesk App as shown below.</p><p>In order to remove application cache, delete <code>C:\Users\&lt;username>\AppData\Roaming\neurodeskapp</code> directory. The AppData directory is a hidden directory - so make sure to activate hidden Items in the Windows explorer under View -> Show -> Hidden Items</p></div><div class=td-content style=page-break-before:always><h1 id=pg-03f12376c689f4b0f0ed82e4eeeb463f>2 - Hosted</h1><div class=lead>For quick access to Neurodesk on the cloud or HPC systems</div><p>Neurodesk offers several hosted options to suit different needs and computing environments. Whether you&rsquo;re looking for a quick start or need high-performance computing capabilities, there&rsquo;s a solution for you.</p><h2 id=available-hosted-options>Available Hosted Options</h2><h3 id=1-neurodesk-play>1. Neurodesk Play</h3><p><strong>Best for</strong>: Quick testing, workshops, and light analysis</p><ul><li>No installation required</li><li>Instant access through web browser</li><li>Free to use</li><li><a href=https://neurodesk.org/getting-started/hosted/play>Get started with Neurodesk Play →</a></li></ul><h3 id=2-neurodesk-on-hpc>2. Neurodesk on HPC</h3><p><strong>Best for</strong>: Large-scale analyses and research projects</p><ul><li>Available on many institutional HPC systems</li><li>High-performance computing capabilities</li><li>Integrated with existing HPC infrastructure</li><li>Contact your local HPC support to check availability</li></ul><h4 id=available-hpc-installations>Available HPC Installations</h4><p>We have documented installations at several institutions:</p><ul><li><p><strong>University of Queensland</strong></p><ul><li><a href=https://neurodesk.org/getting-started/hosted/bunya/>Bunya HPC</a></li><li>Full integration with UQ&rsquo;s research computing environment</li></ul></li><li><p><strong>University of Michigan</strong></p><ul><li>Great Lakes HPC</li><li><a href=https://neurodesk.org/getting-started/neurocommand/linux-and-hpc/#greatlakes---university-of-michigan>Installation guide and usage instructions</a></li></ul></li><li><p><strong>Other Institutions</strong></p><ul><li>Many HPCs support Neurodesk through Singularity/Apptainer containers</li><li>Check our <a href=https://neurodesk.org/getting-started/neurocommand/linux-and-hpc/>HPC documentation</a> for general setup instructions</li><li>Work with your HPC administrators to enable Neurodesk support</li></ul></li></ul><h2 id=choosing-the-right-option>Choosing the Right Option</h2><p>Consider these factors when selecting a hosted solution:</p><ol><li><p><strong>Resource Requirements</strong></p><ul><li>Data processing needs</li><li>Storage requirements</li><li>Computing power needed</li></ul></li><li><p><strong>Access Type</strong></p><ul><li>Browser-based access</li><li>SSH/Command-line access</li><li>Integration with existing workflows</li></ul></li><li><p><strong>Cost Considerations</strong></p><ul><li>Free options (Neurodesk Play)</li><li>Institutional resources (HPC)</li><li>Cloud hosting costs</li></ul></li></ol><h2 id=getting-support>Getting Support</h2><p>Need help deciding which option is best for you?</p><ul><li>Check our <a href=https://neurodesk.org/docs/overview/faq>FAQ section</a></li><li>Join our <a href=https://github.com/orgs/neurodesk/discussions target=_blank rel=noopener>Discussion Forum</a></li><li>Contact your institutional IT support for HPC deployments</li></ul><h2 id=security-and-data-privacy>Security and Data Privacy</h2><p>All hosted options prioritize:</p><ul><li>Secure data handling</li><li>User authentication</li><li>Resource isolation</li><li>Compliance with institutional policies</li></ul><p>Choose the option that best aligns with your institutional requirements and data governance policies.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-68e3db118deede6b3a729669e8533ef4>2.1 - Github Codespaces</h1><div class=lead>Use Neurodesk on GitHub Codespaces</div><p>Start a GitHub Codespace in the repository of your choice:</br><img src=https://neurodesk.org/static/docs/getting-started/hosted/github_codespace.png alt="Start GitHub Codespace" width=500></p><p>Then start the neurodesktop container in a terminal:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker volume create neurodesk-home <span style=color:#0550ae>&amp;&amp;</span>
</span></span><span style=display:flex><span>sudo docker run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --shm-size<span style=color:#0550ae>=</span>1gb -it --security-opt <span style=color:#953800>apparmor</span><span style=color:#0550ae>=</span>neurodeskapp --privileged --user<span style=color:#0550ae>=</span>root --name neurodesktop <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --mount <span style=color:#953800>source</span><span style=color:#0550ae>=</span>neurodesk-home,target<span style=color:#0550ae>=</span>/home/jovyan <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -p 8888:8888 <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>2025-06-10 ghcr.io/neurodesk/neurodesktop/neurodesktop:2025-06-10</span></span></code></pre></div></div><p>Then open Neurodesktop in the browser by clicking the &ldquo;Open in Browser&rdquo; Button displayed</br><img src=https://neurodesk.org/static/docs/getting-started/hosted/github_codespace_open.png alt="Pop up on GitHub Codespace" width=400></p><p>The token for authentication is displayed in the terminal:
<img src=https://neurodesk.org/static/docs/getting-started/hosted/ghc_terminal.png alt="alt text"></p></div><div class=td-content style=page-break-before:always><h1 id=pg-2b8a09a691d56dabf7f6fa9979afe629>2.2 - Bunya</h1><div class=lead>Use Neurodesk on Bunya (only for researchers with access to Bunya!)</div><p>Neurodesk is installed at the University of Queensland&rsquo;s supercomputer &ldquo;Bunya&rdquo;. To access neurodesk tools you need to be in an interactive job (so either start a virtual desktop via Open On-Demand: <a href=https://bunya-ondemand.rcc.uq.edu.au/pun/sys/dashboard target=_blank rel=noopener>https://bunya-ondemand.rcc.uq.edu.au/pun/sys/dashboard</a>) or run:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>salloc --nodes<span style=color:#0550ae>=</span><span style=color:#0550ae>1</span> --ntasks-per-node<span style=color:#0550ae>=</span><span style=color:#0550ae>1</span> --cpus-per-task<span style=color:#0550ae>=</span><span style=color:#0550ae>1</span> --mem<span style=color:#0550ae>=</span>5G --job-name<span style=color:#0550ae>=</span>TinyInteractive --time<span style=color:#0550ae>=</span>01:00:00 --partition<span style=color:#0550ae>=</span>debug --account<span style=color:#0550ae>=</span>REPLACE_THIS_WITH_YOUR_AccountString srun --export<span style=color:#0550ae>=</span>PATH,TERM,HOME,LANG --pty /bin/bash -l</span></span></code></pre></div></div><p>Then load the neurodesk modules:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module use /sw/local/rocky8/noarch/neuro/software/neurocommand/local/containers/modules/
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>APPTAINER_BINDPATH</span><span style=color:#0550ae>=</span>/scratch,/QRISdata</span></span></code></pre></div></div><p>Now you can list all modules (Neurodesk modules are the first ones in the list):</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ml av</span></span></code></pre></div></div><p>Or you can module load any tool you need:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ml qsmxt/6.4.1</span></span></code></pre></div></div><p>If you want to use GUI applications (fsleyes, afni, suma, matlab, &mldr;) you need to overwrite the temporary directory to be /tmp (otherwise you get an error that it cannot connect to the DISPLAY):</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>TMPDIR</span><span style=color:#0550ae>=</span>/tmp </span></span></code></pre></div></div><p>For matlab you also need to create a network license file in your ~/Downloads/network.lic:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat <span style=color:#0a3069>&lt;&lt;EOF &gt; ~/Downloads/network.lic
</span></span></span><span style=display:flex><span><span style=color:#0a3069>SERVER uq-matlab.research.dc.uq.edu.au ANY 27000
</span></span></span><span style=display:flex><span><span style=color:#0a3069>USE_SERVER
</span></span></span><span style=display:flex><span><span style=color:#0a3069>EOF</span></span></span></code></pre></div></div><p>NOTE: If you are using AFNI on Bunya then the default detach behavior will cause SIGBUS errors and a crash. To fix this run AFNI with:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>afni -no_detach</span></span></code></pre></div></div><p>NOTE: MRIQC has its $HOME variable hardcoded to be /home/mriqc. This leads to problems on Bunya. A workaround is to run this before mriqc:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>neurodesk_singularity_opts</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;--home </span><span style=color:#953800>$HOME</span><span style=color:#0a3069>:/home&#34;</span></span></span></code></pre></div></div><p>If you are missing an application, please contact <a href=mailto:mail.neurodesk@gmail.com>mail.neurodesk@gmail.com</a> and ask for the neurodesk installation to be updated on Bunya :)</p><h3 id=using-this-inside-a-jupyter-notebook>Using this inside a jupyter notebook</h3><p>You need to install this in addtion:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install jupyterlmod</span></span></code></pre></div></div><p>Then start a notebook and run these commands:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cf222e>import</span> <span style=color:#24292e>module</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>await</span> module<span style=color:#0550ae>.</span>load<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;niimath&#39;</span><span style=color:#1f2328>)</span></span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-9d360195bedd3bef69c36c8ca2b067a2>2.3 - Nectar Virtual Desktop Service</h1><div class=lead>Run neurodesktop in the Nectar Virtual Desktop Service (For all Australian Researchers)</div><p><div class="alert alert-info" role=alert><h4 class=alert-heading>Note</h4>Link to Nectar Virtual Desktop Service: <strong><a href=https://desktop.rc.nectar.org.au target=_blank rel=noopener>https://desktop.rc.nectar.org.au</a></strong></div><div class="alert alert-warning" role=alert>This option is only available to Australian researchers. See <a href=https://desktop.rc.nectar.org.au/about/ target=_blank rel=noopener>here</a> for more information</div></p><p>There are a few differences between the open-source version of Neurodesk and what&rsquo;s hosted on Nectar VDI:</p><ol><li>There is no <code>/neurodesktop-storage</code> folder (the folder on the Desktop does not lead anywhere).</li><li>Files uploaded via drag and drop do not get stored on the desktop but in <code>/home/vdiuser/thinclient_drives/GUACFS</code></li></ol><h2 id=instructions-for-use>Instructions for use</h2><ol><li><p>Go to <a href=https://desktop.rc.nectar.org.au/ target=_blank rel=noopener>https://desktop.rc.nectar.org.au/</a></p></li><li><p>Click on &ldquo;Sign in&rdquo;.</p></li><li><p>Choose the AAF option.</p></li><li><p>Choose your institution from the list.</p></li><li><p>Provide your email address and password.</p></li><li><p>Click on create a Workspace (you only need to do this when you sign in for the first time).
<img src=https://neurodesk.org/static/docs/getting-started/neurodesktop/create_worksapce.png alt=create_worksapce></p></li><li><p>Fill form &lsquo;Apply for new Workspace&rsquo; and submit.
<img src=https://neurodesk.org/static/docs/getting-started/neurodesktop/apply_for_workspace.png alt=apply_for_workspace></p></li><li><p>Click on &ldquo;EXPLORE&rdquo;.
<img src=https://neurodesk.org/static/docs/getting-started/neurodesktop/Explore.png alt=Explore></p></li><li><p>Click &ldquo;VIEW DETAILS&rdquo; under Neurodesktop:</p></li><li><p>Click &ldquo;CREATE DESKTOP +&rdquo; button on the top right corner.</p></li><li><p>Choose the desired availability zone.</p></li><li><p>Wait until everything is completed:
<img src=https://user-images.githubusercontent.com/4021595/150286126-2d8f60af-7499-4c69-998a-668c9c34d8c9.png alt=image></p></li><li><p>Click &ldquo;OPEN DESKTOP ->&rdquo;:
<img src=https://user-images.githubusercontent.com/4021595/150286383-1c1b8d20-c772-4598-a81b-1ef9e11526b8.png alt=image></p></li><li><p>For a general guide on using the ARDC virtual desktops, click here:
<a href=https://tutorials.rc.nectar.org.au/virtual-desktop-service/01-overview target=_blank rel=noopener>https://tutorials.rc.nectar.org.au/virtual-desktop-service/01-overview</a></p></li><li><p>For a specific explanation on how to launch the various applications available in the Neurodesktop desktop, follow the instructions here:
<a href=https://neurodesk.org/docs/getting-started/neurodesktop/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurodesktop/</a></p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-5d7e6180ebfc1e80aced18bfef481f61>2.4 - Play</h1><div class=lead>Neurodesk Play is a publicly available service for accessing Neurodesk without any setup</div><p>Neurodesk Play provides instant access to our neuroimaging analysis environment directly through your web browser. This service allows you to:</p><ul><li>Start using Neurodesk immediately without any installation</li><li>Access a wide range of pre-installed neuroimaging tools</li><li>Try out the platform before setting up a local installation</li><li>Collaborate with colleagues using a consistent environment</li><li>Run analyses from any device with a modern web browser</li></ul><p>Ready to get started? Click the button below to launch Neurodesk Play:</p><p><strong><a href=https://play.neurodesk.org/ target=_blank rel="noopener noreferrer" class="btn btn-primary btn-lg">Go to Neurodesk Play →</a></strong></p><p>Note: While Neurodesk Play is free to use, it comes with some resource limitations. For more intensive workloads, consider <a href=https://neurodesk.org/docs/getting-started/local/neurodeskapp/>installing Neurodesk locally</a> or using one of our <a href=https://neurodesk.org/docs/getting-started/hosted/>other hosting options</a>.</p><div style="text-align:center;margin:2em 0"><img src=https://neurodesk.org/static/docs/getting-started/hosted/play-screenshot.png style="max-width:800px;width:100%;border:1px solid #ddd;border-radius:8px" alt="Neurodesk Play Interface"><p style=margin-top:1em;font-style:italic>The Neurodesk Play interface provides a full-featured environment in your browser</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-9bb18ebce1092e6778803622f9d0ede5>2.5 - Google Colab</h1><div class=lead>Neurodesk Singularity Containers for Google Colab</div><div class="alert alert-warning" role=alert>WARNING: Google disabled a crucial feature necessary for running containers, and Neurodesk containers currently do not run on Google Colab.</div><p>Open a notebook in Google Colab and run the following commands to set up the Neurodesk environment:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cf222e>import</span> <span style=color:#24292e>os</span>
</span></span><span style=display:flex><span>os<span style=color:#0550ae>.</span>environ<span style=color:#1f2328>[</span><span style=color:#0a3069>&#34;LD_PRELOAD&#34;</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#34;&#34;</span><span style=color:#1f2328>;</span>
</span></span><span style=display:flex><span>os<span style=color:#0550ae>.</span>environ<span style=color:#1f2328>[</span><span style=color:#0a3069>&#34;APPTAINER_BINDPATH&#34;</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#34;/content&#34;</span>
</span></span><span style=display:flex><span>os<span style=color:#0550ae>.</span>environ<span style=color:#1f2328>[</span><span style=color:#0a3069>&#34;MPLCONFIGDIR&#34;</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#34;/content/matplotlib-mpldir&#34;</span>
</span></span><span style=display:flex><span>os<span style=color:#0550ae>.</span>environ<span style=color:#1f2328>[</span><span style=color:#0a3069>&#34;LMOD_CMD&#34;</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#34;/usr/share/lmod/lmod/libexec/lmod&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f6f8fa;background-color:#82071e>!</span>curl <span style=color:#0550ae>-</span>J <span style=color:#0550ae>-</span>O https<span style=color:#1f2328>:</span><span style=color:#0550ae>//</span>raw<span style=color:#0550ae>.</span>githubusercontent<span style=color:#0550ae>.</span>com<span style=color:#0550ae>/</span>NeuroDesk<span style=color:#0550ae>/</span>neurocommand<span style=color:#0550ae>/</span>main<span style=color:#0550ae>/</span>googlecolab_setup<span style=color:#0550ae>.</span>sh
</span></span><span style=display:flex><span><span style=color:#f6f8fa;background-color:#82071e>!</span>chmod <span style=color:#0550ae>+</span>x googlecolab_setup<span style=color:#0550ae>.</span>sh
</span></span><span style=display:flex><span><span style=color:#f6f8fa;background-color:#82071e>!</span><span style=color:#0550ae>./</span>googlecolab_setup<span style=color:#0550ae>.</span>sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>os<span style=color:#0550ae>.</span>environ<span style=color:#1f2328>[</span><span style=color:#0a3069>&#34;MODULEPATH&#34;</span><span style=color:#1f2328>]</span> <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#39;:&#39;</span><span style=color:#0550ae>.</span>join<span style=color:#1f2328>(</span><span style=color:#6639ba>map</span><span style=color:#1f2328>(</span><span style=color:#6639ba>str</span><span style=color:#1f2328>,</span> <span style=color:#6639ba>list</span><span style=color:#1f2328>(</span><span style=color:#6639ba>map</span><span style=color:#1f2328>(</span><span style=color:#cf222e>lambda</span> x<span style=color:#1f2328>:</span> os<span style=color:#0550ae>.</span>path<span style=color:#0550ae>.</span>join<span style=color:#1f2328>(</span>os<span style=color:#0550ae>.</span>path<span style=color:#0550ae>.</span>abspath<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;/cvmfs/neurodesk.ardc.edu.au/neurodesk-modules/&#39;</span><span style=color:#1f2328>),</span> x<span style=color:#1f2328>),</span>os<span style=color:#0550ae>.</span>listdir<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;/cvmfs/neurodesk.ardc.edu.au/neurodesk-modules/&#39;</span><span style=color:#1f2328>)))))</span></span></span></code></pre></div></div><p>Once this setup is completed you can list the available Neurodesk applications like this:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cf222e>import</span> <span style=color:#24292e>lmod</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>await</span> lmod<span style=color:#0550ae>.</span>avail<span style=color:#1f2328>()</span></span></span></code></pre></div></div><p>and use applications like this:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cf222e>await</span> lmod<span style=color:#0550ae>.</span>load<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;fsl/6.0.4&#39;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span><span style=color:#f6f8fa;background-color:#82071e>!</span>bet</span></span></code></pre></div></div><p>This notebook demonstrates how to use all Neurodesk applications in Google Colab:
<a href="https://colab.research.google.com/drive/1g5cnZxj1llRaHmOs4xSglqsXnFkQYuol?usp=sharing" target=_blank rel=noopener>https://colab.research.google.com/drive/1g5cnZxj1llRaHmOs4xSglqsXnFkQYuol?usp=sharing</a></p><img width=971 alt=image src=https://user-images.githubusercontent.com/4021595/216230682-5f12f5d9-32fe-4174-9994-b257d26cfc06.png><p>This is a google colab notebook that shows how to integrate with google drive and contains an example how to run fMRIprep in google colab:
<a href="https://colab.research.google.com/drive/11wVBkjNvrzo2TkUAILtWnPumAeFAfqkl?usp=sharing" target=_blank rel=noopener>https://colab.research.google.com/drive/11wVBkjNvrzo2TkUAILtWnPumAeFAfqkl?usp=sharing</a></p><p>and more examples can be found <a href=https://neurodesk.org/example-notebooks/intro.html target=_blank rel=noopener>in our example library</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-05abcbbabf36d1e212bbb61f6bf5f83b>3 - Neurodesktop</h1><div class=lead>The plug-and-play, browser-accessible, containerised data analysis environment.</div><h2 id=video-tutorial>Video tutorial</h2><p>See below for a 4 minute tutorial on Installation, Usage and Data Access with Neurodesktop</p><div style=max-width:700px;margin-bottom:20px><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/BffOZcV2oaY?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div></div></div><div class=td-content><h1 id=pg-789b740730b08b25fb4aea99f30c64ad>3.1 - Portable Unprivileged NeuroDesktop</h1><div class=lead>An unprivileged option for running NeuroDesktop without Docker or Podman.</div><div class="alert alert-info" role=alert>Installing TinyRange manually is for advanced users only. These instructions should be used as a supplement to running NeurodeskApp.</div><h3 id=minimum-system-requirements>Minimum System Requirements</h3><ol><li>At least 5GB free space for neurodesktop base image</li><li>At least 8GB of RAM</li></ol><h2 id=downloading-tinyrange>Downloading TinyRange</h2><p>TinyRange (<a href=https://github.com/tinyrange/tinyrange target=_blank rel=noopener>https://github.com/tinyrange/tinyrange</a>) is a lightweight runtime for running Virtual Machines and Containers. It runs without admin privileges and doesn&rsquo;t need Docker or Podman installed to work.</p><p>Downlaod the latest version of TinyRange from: <a href=https://github.com/tinyrange/tinyrange/releases/latest target=_blank rel=noopener>https://github.com/tinyrange/tinyrange/releases/latest</a></p><div class="alert alert-info" role=alert><strong>Windows on ARM:</strong> TinyRange is not currently supported on Windows for ARM (Copilot+ Laptops with ARM64/Snapdragon CPUs)</div><h2 id=installing-tinyrange>Installing TinyRange</h2><ul><li>Unzip the archive to some local path on your computer. It&rsquo;s recommended not to extract it to a network drive.</li><li>Open a terminal in the extracted archive and run <code>./tinyrange login</code> or <code>tinyrange login</code> on Windows.</li><li>Once you see the <code>tinyrange:~#</code> type <code>exit</code>.</li></ul><h2 id=enabling-hardware-acceleration>Enabling Hardware Acceleration</h2><ul><li><strong>Windows:</strong> This might require admin privileges in some cases. Search in your start menu for &ldquo;Turn Windows features on or off.&rdquo;. Find &ldquo;Hyper-V Hypervisor&rdquo; or &ldquo;Windows Hypervisor Platform&rdquo; and make sure it&rsquo;s enabled. Alternatively, run <code>dism /online /enable-feature /featurename:"HypervisorPlatform"</code> in an Administrator shell. Then restart your computer. To test if it&rsquo;s working correctly run: <code>tinyrange.exe env check-hv</code></li><li><strong>Ubuntu/Other Linux:</strong> It should already work out of the box. If not make sure your user account has permission to read/write <code>/dev/kvm</code>.</li><li><strong>MacOS:</strong> No extra steps required. It already works.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-358e26c7122eb50b5be7ea42d1285a52>3.2 - Linux</h1><div class=lead>Install neurodesktop on Linux</div><h2 id=minimum-system-requirements>Minimum System Requirements</h2><ol><li>At least 3GB free space for neurodesktop base image</li><li>Docker requirements. Details found under <a href=https://docs.docker.com/get-docker/ target=_blank rel=noopener>https://docs.docker.com/get-docker/</a></li></ol><h2 id=quickstart>Quickstart</h2><h3 id=0-install-docker-or-podman>0. Install Docker or Podman</h3><p>Install Docker from here: <a href=https://docs.docker.com/get-docker/ target=_blank rel=noopener>https://docs.docker.com/get-docker/</a>. Additional information is available <a href=#installing-docker>below</a>.
Alternatively, Neurodesk also works with Podman (<a href=https://podman.io target=_blank rel=noopener>https://podman.io</a>).</p><p>To set up Neurodesk on Ubuntu, ensure both Podman client and server are installed. Follow the Podman installation instructions provided at <a href=https://podman.io/docs/installation target=_blank rel=noopener>https://podman.io/docs/installation</a> for server setup.</p><div class="alert alert-info" role=alert><p>In Ubuntu 20.10 or newer versions, the packages to install Podman are included to download in the standard repository of the system. However, for Ubuntu 20.04, we manually have to add the repository of Podman.</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update <span style=color:#0550ae>&amp;&amp;</span> sudo apt upgrade -y
</span></span><span style=display:flex><span>sudo apt install curl
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_20.04/ /&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list
</span></span><span style=display:flex><span>curl -L <span style=color:#0a3069>&#34;https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_20.04/Release.key&#34;</span> <span style=color:#1f2328>|</span> sudo apt-key add -
</span></span><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt-get -y install podman</span></span></code></pre></div></div></div><h3 id=1-optional-only-for-arm64-hardware>1. Optional: only for ARM64 hardware</h3><p>Neurodesk supports ARM64 hardware through binfmt</p><p>To enable Neurodesk on ARM64 hardware run this setup step:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run --privileged --rm tonistiigi/binfmt --install all</span></span></code></pre></div></div><h3 id=2-run-neurodesktop>2. Run Neurodesktop</h3><p>Before the first run, create a local folder where the downloaded applications will be stored, e.g. <code>mkdir ~/neurodesktop-storage</code></p><p>Then use one of the following options to run Neurodesktop:</p><h4 id=option-1-recommended-for-local-installations-neurodesk-app>Option 1 (Recommended for local installations): Neurodesk-App</h4><p>Instructions on installing and using the app: <a href=https://neurodesk.org/docs/getting-started/neurodesktop/neurodeskapp/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurodesktop/neurodeskapp/</a></p><h4 id=option-2-advanced-and-for-remote-installations-using-terminal>Option 2 (Advanced and for remote installations): Using Terminal</h4><ol start=0><li>If the Linux machine is remote (e.g. in the cloud), connect to the machine with a port forwarding first:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh -L 8888:127.0.0.1:8888 USER@IP</span></span></code></pre></div></div><ol><li>then start neurodesktop:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker volume create neurodesk-home <span style=color:#0550ae>&amp;&amp;</span>
</span></span><span style=display:flex><span>sudo docker run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --shm-size<span style=color:#0550ae>=</span>1gb -it --security-opt <span style=color:#953800>apparmor</span><span style=color:#0550ae>=</span>neurodeskapp --privileged --user<span style=color:#0550ae>=</span>root --name neurodesktop <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --mount <span style=color:#953800>source</span><span style=color:#0550ae>=</span>neurodesk-home,target<span style=color:#0550ae>=</span>/home/jovyan <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -p 8888:8888 <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>2025-06-10 vnmd/neurodesktop:2025-06-10</span></span></code></pre></div></div><p>or use the github container registry (in case docker hub is down or blocked in your firewall):</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker volume create neurodesk-home <span style=color:#0550ae>&amp;&amp;</span>
</span></span><span style=display:flex><span>sudo docker run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --shm-size<span style=color:#0550ae>=</span>1gb -it --security-opt <span style=color:#953800>apparmor</span><span style=color:#0550ae>=</span>neurodeskapp --privileged --user<span style=color:#0550ae>=</span>root --name neurodesktop <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --mount <span style=color:#953800>source</span><span style=color:#0550ae>=</span>neurodesk-home,target<span style=color:#0550ae>=</span>/home/jovyan <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -p 8888:8888 <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>2025-06-10 ghcr.io/neurodesk/neurodesktop/neurodesktop:2025-06-10</span></span></code></pre></div></div><p>or for podman:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>podman volume create neurodesk-home <span style=color:#0550ae>&amp;&amp;</span>
</span></span><span style=display:flex><span>sudo podman run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --shm-size<span style=color:#0550ae>=</span>1gb -it --privileged --user<span style=color:#0550ae>=</span>root --name neurodesktop <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --mount <span style=color:#953800>type</span><span style=color:#0550ae>=</span>volume,source<span style=color:#0550ae>=</span>neurodesk-home,target<span style=color:#0550ae>=</span>/home/jovyan <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -p 8888:8888 <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>2025-06-10 docker://vnmd/neurodesktop:2025-06-10</span></span></code></pre></div></div><div class="alert alert-warning" role=alert><p>If you run Ubuntu > 23.10 you need to create this apparmor profile under /etc/apparmor.d/neurodeskapp</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># This profile allows everything and only exists to give the</span>
</span></span><span style=display:flex><span><span style=color:#57606a># application a name instead of having the label &#34;unconfined&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>abi &lt;abi/4.0&gt;,
</span></span><span style=display:flex><span>include &lt;tunables/global&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>profile neurodeskapp <span style=color:#0a3069>&#34;/opt/NeurodeskApp/neurodeskapp&#34;</span> <span style=color:#953800>flags</span><span style=color:#0550ae>=(</span>unconfined<span style=color:#0550ae>)</span> <span style=color:#0550ae>{</span>
</span></span><span style=display:flex><span>  userns,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># Site-specific additions and overrides. See local/README for details.</span>
</span></span><span style=display:flex><span>  include <span style=color:#cf222e>if</span> exists &lt;local/neurodeskapp&gt;
</span></span><span style=display:flex><span><span style=color:#0550ae>}</span></span></span></code></pre></div></div></div><div class="alert alert-warning" role=alert><p>If you get errors in neurodesktop then check if the ~/neurodesktop-storage directory is writable to all users. Otherwise run:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod a+rwx ~/neurodesktop-storage</span></span></code></pre></div></div></div><div class="alert alert-warning" role=alert><p>If you get error that&rsquo;s not assessable on your network or causes problems then you can try to use the DNS server <code>8.8.8.8</code> (Google Public DNS) in the Docker command.</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker volume create neurodesk-home <span style=color:#0550ae>&amp;&amp;</span>
</span></span><span style=display:flex><span>sudo docker run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --shm-size<span style=color:#0550ae>=</span>1gb -it --privileged --user<span style=color:#0550ae>=</span>root --name neurodesktop <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --dns 8.8.8.8 <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --mount <span style=color:#953800>source</span><span style=color:#0550ae>=</span>neurodesk-home,target<span style=color:#0550ae>=</span>/home/jovyan <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -p 8888:8888 <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>2025-06-10 vnmd/neurodesktop:2025-06-10</span></span></code></pre></div></div></div><ol start=2><li>Once neurodesktop is downloaded, leave the terminal open and check which server neurodesktop is running on (Avoid pressing CTRL+C).</li></ol><p><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/terminal_token.png alt=image></p><ol start=3><li>To access neurodesktop, open your web browser and type in one of the provided URLs in your terminal (e.g. <code>http://127.0.0.1:8888/lab?token=your_unique_token</code>).</li></ol><div class="alert alert-warning" role=alert><p>If using Chrome, a pop-up may open with the text:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>&#34;http://127.0.0.1:8888 wants to
</span></span><span style=display:flex><span>See text and images copied to the clipboard&#34;.</span></span></code></pre></div></div><p>Press &ldquo;Allow&rdquo; to access your clipboard from within Neurodesktop.</p></div><div class="alert alert-warning" role=alert>If using Firefox, you might not be able to paste clipboard content into the virtual desktop from the host computer. In that case, please follow <a href=https://neurodesk.org/docs/support/faq/#copying-text-from-my-host-computer-and-pasting-it-inside-neurodesktop-doesnt-work-in-firefox>these instructions</a></div><ol start=4><li><p>Press on &ldquo;Desktop Auto-Resolution&rdquo; under &ldquo;ALL CONNECTIONS&rdquo;</p></li><li><p>If it is the first time you have used Neurodesktop, wait until the desktop appears (it may take a few seconds). Otherwise, it should appear instantaneously.</p></li><li><p>Neurodesk is now ready to use! See the tutorials page for advice on how to use Neurodesk.</p></li><li><p>For an optimal experience, switch your browser to full-screen mode by following the instructions for your browser here:
<a href=https://www.thewindowsclub.com/open-chrome-edge-or-firefox-browser-in-full-screen-mode target=_blank rel=noopener>https://www.thewindowsclub.com/open-chrome-edge-or-firefox-browser-in-full-screen-mode</a></p></li></ol><div class="alert alert-info" role=alert>The browser can be closed anytime, and Neurodesktop will continue running in the background. To reconnect to Neurodesktop, simply start over from step 3 above.</div><div class="alert alert-info" role=alert>If you are using conda environments and you are installing packages or even new kernels, make sure to read this: <a href=https://neurodesk.org/tutorials-examples/tutorials/programming/conda/ target=_blank rel=noopener>https://neurodesk.org/tutorials-examples/tutorials/programming/conda/</a></div><div class="alert alert-info" role=alert>If you want to use Neurodesk in combination with a reverse proxy, make sure to activate proxy_buffering off as described here: <a href=https://guacamole.apache.org/doc/gug/reverse-proxy.html target=_blank rel=noopener>https://guacamole.apache.org/doc/gug/reverse-proxy.html</a></div><h2 id=deleting-neurodesktop>Deleting neurodesktop:</h2><p>When done processing your data it is important to stop and remove the container - otherwise the next start or container update will give an error ("&mldr; The container name &ldquo;/neurodesktop&rdquo; is already in use&mldr;")</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Notice that any data that were saved outside of /neurodesktop-storage would be lost. Please make sure to move all your data to that folder before deleting neurodesktop.</div><ol><li><p>Click on the terminal from which you ran neurodesktop</p></li><li><p>Press <code>Ctrl-C</code></p></li><li><p>Run:</p></li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker stop neurodesktop</span></span></code></pre></div></div><ol start=4><li>Run:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker rm neurodesktop</span></span></code></pre></div></div><h2 id=installing-docker>Installing Docker</h2><p>For general installation instructions, refer to <a href=https://docs.docker.com/get-docker/ target=_blank rel=noopener>https://docs.docker.com/get-docker/</a></p><h3 id=rhelcentos-yum-based>RHEL/CentOS (yum-based)</h3><p>Refer to <a href=https://docs.docker.com/engine/install/centos/ target=_blank rel=noopener>https://docs.docker.com/engine/install/centos/</a></p><p>One example to install docker in a yum-based distribution could look like this:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo dnf install -y yum-utils 
</span></span><span style=display:flex><span>sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</span></span><span style=display:flex><span>sudo dnf install docker-ce docker-ce-cli containerd.io
</span></span><span style=display:flex><span><span style=color:#57606a># or if dnf not found: sudo yum install docker-ce docker-ce-cli containerd.io</span>
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> docker
</span></span><span style=display:flex><span>sudo systemctl start docker
</span></span><span style=display:flex><span>sudo docker version
</span></span><span style=display:flex><span>sudo docker info
</span></span><span style=display:flex><span>sudo groupadd docker
</span></span><span style=display:flex><span>sudo usermod -aG docker <span style=color:#953800>$USER</span>
</span></span><span style=display:flex><span>sudo chown root:docker /var/run/docker.sock
</span></span><span style=display:flex><span>newgrp docker</span></span></code></pre></div></div><h3 id=ubuntudebian-apt-based>Ubuntu/Debian (apt-based)</h3><p>Refer to <a href=https://docs.docker.com/engine/install/ubuntu/ target=_blank rel=noopener>https://docs.docker.com/engine/install/ubuntu/</a></p><p>One example to install docker in a apt-based distribution could look like this:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install ca-certificates curl gnupg
</span></span><span style=display:flex><span>sudo install -m <span style=color:#0550ae>0755</span> -d /etc/apt/keyrings
</span></span><span style=display:flex><span>curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span style=color:#1f2328>|</span> sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
</span></span><span style=display:flex><span>sudo chmod a+r /etc/apt/keyrings/docker.gpg
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  <span style=color:#0a3069>&#34;deb [arch=</span><span style=color:#cf222e>$(</span>dpkg --print-architecture<span style=color:#cf222e>)</span><span style=color:#0a3069> signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  </span><span style=color:#cf222e>$(</span>. /etc/os-release <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;</span><span style=color:#953800>$VERSION_CODENAME</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>)</span><span style=color:#0a3069> stable&#34;</span> <span style=color:#1f2328>|</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span><span style=display:flex><span>sudo apt-get update</span></span></code></pre></div></div><h2 id=gpu-support>GPU support</h2><h3 id=rhelcentos-yum-based-1>RHEL/CentOS (yum-based)</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install nvidia-container-toolkit -y</span></span></code></pre></div></div><h3 id=ubuntudebian-apt-based-1>Ubuntu/Debian (apt-based)</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install nvidia-container-toolkit -y</span></span></code></pre></div></div><h3 id=running-neurodesktop-container-with-gpu>Running neurodesktop container with GPU</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --shm-size<span style=color:#0550ae>=</span>1gb -it --privileged --user<span style=color:#0550ae>=</span>root --name neurodesktop <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --gpus all <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -p 8888:8888 -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>2025-06-10 <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  vnmd/neurodesktop:2025-06-10</span></span></code></pre></div></div><h4 id=running-tensorflow-w-gpu>Running tensorflow (w/ GPU)</h4><h5 id=using-tensorflow-python>Using tensorflow (python)</h5><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mamba install tensorflow-gpu
</span></span><span style=display:flex><span>python</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cf222e>import</span> <span style=color:#24292e>tensorflow</span> <span style=color:#cf222e>as</span> <span style=color:#24292e>tf</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>print</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;Num GPUs Available: &#34;</span><span style=color:#1f2328>,</span> <span style=color:#6639ba>len</span><span style=color:#1f2328>(</span>tf<span style=color:#0550ae>.</span>config<span style=color:#0550ae>.</span>list_physical_devices<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;GPU&#39;</span><span style=color:#1f2328>)))</span></span></span></code></pre></div></div><p><img src=https://user-images.githubusercontent.com/4021595/135446560-d135f6ce-b699-4e46-8534-b72b4d9f2d41.png alt=image></p><h5 id=using-tensorflow-singularity-container-in-neurodesktop>Using tensorflow (singularity container in neurodesktop)</h5><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity pull docker://tensorflow/tensorflow:latest-gpu
</span></span><span style=display:flex><span>singularity run --nv tensorflow_latest-gpu.sif
</span></span><span style=display:flex><span>python</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cf222e>import</span> <span style=color:#24292e>tensorflow</span> <span style=color:#cf222e>as</span> <span style=color:#24292e>tf</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>print</span><span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;Num GPUs Available: &#34;</span><span style=color:#1f2328>,</span> <span style=color:#6639ba>len</span><span style=color:#1f2328>(</span>tf<span style=color:#0550ae>.</span>config<span style=color:#0550ae>.</span>list_physical_devices<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;GPU&#39;</span><span style=color:#1f2328>)))</span></span></span></code></pre></div></div><p><img src=https://user-images.githubusercontent.com/4021595/135449288-6c3e9bbd-fe5f-4f43-aa4a-8a798ba629e6.png alt=image></p></div><div class=td-content style=page-break-before:always><h1 id=pg-37f6716bebc68b8b3d205a7dad9ea43a>3.3 - MacOS</h1><div class=lead>Install neurodesktop on MacOS</div><h2 id=quickstart>Quickstart</h2><h3 id=1-install-docker-or-podman>1. Install Docker or Podman</h3><p>Install Docker from here: <a href=https://docs.docker.com/get-docker/ target=_blank rel=noopener>https://docs.docker.com/get-docker/</a>
Alternatively, Neurodesk also works with Podman, follow the Podman installation instructions provided at <a href=https://podman.io/docs/installation target=_blank rel=noopener>https://podman.io/docs/installation</a>.</p><div class="alert alert-warning" role=alert><p>Docker for MacOS by default runs with 2GB Memory. For actual workloads, 4GB Memory minimum for docker is highly recommended. You need to adjust this:</p><ol><li>Open the Docker Desktop and Navigate to the Settings. Then navigate to the &ldquo;Resources&rdquo; section.</li><li>Increase the Memory slider from 2.00 GB to 4.00 GB (or greater)</li><li>Increase Swap slider from 1GB to 2GB (or greater)</li></ol></div><h3 id=2-run-neurodesktop>2. Run Neurodesktop</h3><p>Use one of the following options to run Neurodesktop:</p><h4 id=option-1-recommended-neurodesk-app>Option 1 (Recommended): Neurodesk-App</h4><p>Instructions on installing and using the app: <a href=https://neurodesk.org/docs/getting-started/local/neurodeskapp/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurodesktop/neurodeskapp/</a></p><h4 id=option-2-advanced-using-terminal>Option 2 (Advanced): Using Terminal</h4><p>Create a local folder where the downloaded applications will be stored, e.g. ~/neurodesktop-storage</p><ol><li>Open a terminal, and type the following command to automatically download the neurodesktop container and run it</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker volume create neurodesk-home <span style=color:#0550ae>&amp;&amp;</span>
</span></span><span style=display:flex><span>docker run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>--shm-size<span style=color:#0550ae>=</span>1gb -it --privileged --user<span style=color:#0550ae>=</span>root --name neurodesktop <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>-v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>--mount <span style=color:#953800>source</span><span style=color:#0550ae>=</span>neurodesk-home,target<span style=color:#0550ae>=</span>/home/jovyan <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>-e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>-p 8888:8888 -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>2025-06-10 vnmd/neurodesktop:2025-06-10</span></span></code></pre></div></div><p>If you get errors in neurodesktop then check if the ~/neurodesktop-storage directory is writable for all users. If it is not, run <code>chmod a+rwx ~/neurodesktop-storage</code></p><ol start=2><li>Once neurodesktop is downloaded, leave the terminal open and check which server neurodesktop running on (Avoid pressing CTRL+C).</li></ol><p><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/terminal_token.png alt=image></p><ol start=3><li>To access neurodesktop, open your web browser and navigate to one of the URLs shown in your terminal (e.g. <code>http://127.0.0.1:8888/lab?token=your_unique_token</code>).</li></ol><div class="alert alert-warning" role=alert>We recommend using Chrome over Firefox as it has an option to hide the Toolbar in full screen mode (go to the menu bar, click on View, and uncheck &ldquo;Always Show Toolbar in Full Screen&rdquo;). This allows for Neurodesktop to fully utilise the whole of your screen.</div><ol start=4><li><p>If prompted, press on &ldquo;Desktop RDP - changes resolution by resizing window and waiting for refresh&rdquo; or &ldquo;Desktop VNC - changes resolution by running lxrandr on a terminal&rdquo; under &ldquo;ALL CONNECTIONS&rdquo;</p></li><li><p>If it is the first time you use Neurodesktop, wait until the desktop appears (it may take a few seconds). Otherwise, it should appear instantaneously.</p></li><li><p>Neurodesk is ready to use! See the tutorials page for advice on how to use Neurodesk.</p></li></ol><div class="alert alert-info" role=alert>The browser can be closed anytime, and Neurodesktop will continue to run in the background. To reconnect to Neurodesktop, simply start over from step 3 above.</div><div class="alert alert-info" role=alert>If you are using conda environments and you are installing packages or even new kernels, make sure to read this: <a href=https://neurodesk.org/tutorials-examples/tutorials/programming/conda/ target=_blank rel=noopener>https://neurodesk.org/tutorials-examples/tutorials/programming/conda/</a></div><h2 id=deleting-neurodesktop>Deleting neurodesktop:</h2><p>When done processing your data it is important to stop and remove the container - otherwise the next start or container update will give an error ("&mldr; The container name &ldquo;/neurodesktop&rdquo; is already in use&mldr;")</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Note that any data that were saved outside of /neurodesktop-storage would be lost. Please make sure to move all your data to that folder before deleting neurodesktop.</div><ol><li><p>Click on the terminal from which you ran neurodesktop</p></li><li><p>Press control-C</p></li><li><p>Type:</p></li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker stop neurodesktop</span></span></code></pre></div></div><ol start=4><li>Type:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker rm neurodesktop</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-a6c2244925f149988e14d688e5c4af0e>3.4 - Windows</h1><div class=lead>Install neurodesktop on Windows</div><h2 id=minimum-system-requirements>Minimum System Requirements</h2><ol><li>At least 3GB free space for neurodesktop base image</li><li>Docker requirements. Details found under <a href=https://docs.docker.com/get-docker/ target=_blank rel=noopener>https://docs.docker.com/get-docker/</a></li><li>If installing docker using WSL, minimum 20GB space recommended for WSL with Ubuntu</li></ol><h2 id=quickstart>Quickstart</h2><h3 id=1-install-docker-or-podman>1. Install Docker or Podman</h3><p>Install Docker from here: <a href=https://docs.docker.com/get-docker/ target=_blank rel=noopener>https://docs.docker.com/get-docker/</a><div class="alert alert-info" role=alert>The docker installation will reboot your computer a few times. There might be warnings regarding WSL2 and this also might require a few more installation steps that unfortunately differ for every system. Please get in touch if you are stuck and have a look at our troubleshooting page. Here is a detailed instruction on how Neurodesk was installed on Windows VMs from the team at Technion: <a href=https://github.com/NeuroDesk/neurodesk.github.io/blob/main/static/docs/getting-started/neurodesktop/Neurodesk_Windows_Technion.pdf target=_blank rel=noopener>Detailed Docker & Neurodesk installation instruction Windows</a></div></p><p>Alternatively, Neurodesk also works with Podman, follow the Podman installation instructions provided at <a href=https://podman.io/docs/installation target=_blank rel=noopener>https://podman.io/docs/installation</a>.</p><h3 id=2-run-neurodesktop>2. Run Neurodesktop</h3><p>Use one of the following options to run Neurodesktop:</p><h4 id=option-1-recommended-neurodesk-app>Option 1 (Recommended): Neurodesk-App</h4><p>Instructions for installing and using the app: <a href=https://neurodesk.org/docs/getting-started/neurodesktop/neurodeskapp/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurodesktop/neurodeskapp/</a></p><h4 id=option-2-advanced-using-terminal>Option 2 (Advanced): Using Terminal</h4><ol><li>Open a terminal (e.g. Powershell), and type the following command to automatically download the neurodesktop container and run it</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker volume create neurodesk-home
</span></span><span style=display:flex><span><span style=color:#57606a># This creates a docker volume to store your /home/jovyan data inside a docker volume</span></span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>docker run --shm-size<span style=color:#0550ae>=</span>1gb -it --privileged --user<span style=color:#0550ae>=</span>root --name neurodesktop -v C:/neurodesktop-storage:/neurodesktop-storage --mount <span style=color:#953800>source</span><span style=color:#0550ae>=</span>neurodesk-home,target<span style=color:#0550ae>=</span>/home/jovyan -p 8888:8888 -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>2025-06-10 vnmd/neurodesktop:2025-06-10</span></span></code></pre></div></div><ol start=2><li>Once neurodesktop is downloaded, leave the terminal open and check which server neurodesktop running on (Avoid pressing CTRL+C). ]</li></ol><p><img src=https://neurodesk.org/static/docs/getting-started/neurodeskapp/terminal_token.png alt=image></p><ol start=3><li>To access neurodesktop, open your web browser and type in one of the URLs provided in your terminal (e.g. <code>http://127.0.0.1:8888/lab?token=your_unique_token</code>).</li></ol><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>We do not recommend the use of the Firefox browser for accessing Neurodesktop on Windows 10, as firefox is not able to access localhost where neurodesk is running.</div><ol start=4><li><p>Press on &ldquo;Desktop Auto-Resolution&rdquo; under &ldquo;ALL CONNECTIONS&rdquo;</p></li><li><p>If it is the first time you use Neurodesktop, wait until the desktop appears (it may take a few seconds). Otherwise, it should appear instantaneously.</p></li><li><p>Neurodesk is ready to use! See the tutorials page for advice on how to use Neurodesk.</p></li><li><p>For an optimal experience, switch your browser to full-screen mode by following the instructions for your browser here:
<a href=https://www.thewindowsclub.com/open-chrome-edge-or-firefox-browser-in-full-screen-mode target=_blank rel=noopener>https://www.thewindowsclub.com/open-chrome-edge-or-firefox-browser-in-full-screen-mode</a></p></li></ol><div class="alert alert-info" role=alert>The browser can be closed anytime, and Neurodesktop will continue running in the background. To reconnect to Neurodesktop, simply start over from step 3 above.</div><div class="alert alert-info" role=alert>If you are using conda environments and you are installing packages or even new kernels, make sure to read this: <a href=https://neurodesk.org/tutorials-examples/tutorials/programming/conda/ target=_blank rel=noopener>https://neurodesk.org/tutorials-examples/tutorials/programming/conda/</a></div><h2 id=deleting-neurodesktop>Deleting neurodesktop:</h2><p>When done processing your data it is important to stop and remove the container - otherwise the next start or container update will give an error ("&mldr; The container name &ldquo;/neurodesktop&rdquo; is already in use&mldr;")</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Note that any data that were saved outside of /neurodesktop-storage would be lost. Please make sure to move all your data to that folder before deleting neurodesktop.</div><ol><li><p>Click on the terminal from which you ran neurodesktop</p></li><li><p>Press control-C</p></li><li><p>Type:</p></li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmd data-lang=cmd><span style=display:flex><span>docker stop neurodesktop</span></span></code></pre></div></div><ol start=4><li>Type:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmd data-lang=cmd><span style=display:flex><span>docker rm neurodesktop</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-d7064633d2b50c507b7274b9ea2c2dc0>3.5 - Cloud</h1><div class=lead>Run neurodesktop on cloud computing resources</div><h2 id=options-for-running-neurodesk-on-cloud-computing-resources>Options for Running Neurodesk on cloud computing resources</h2><p>There are a couple of ways how Neurodesktop can be run on cloud computing resources:</p><ol><li>The first and easiest option is to provision a virtual Linux machine and run docker on this machine similar to a local Linux setup: <a href=https://neurodesk.org/docs/getting-started/neurodesktop/linux/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurodesktop/linux/</a></li><li>Another option is to use Windows VMs and some groups have had success with that. Here is a detailed instructions on this setup: <a href=https://github.com/NeuroDesk/neurodesk.github.io/blob/main/static/docs/getting-started/neurodesktop/Neurodesk_Windows_Technion.pdf target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesk.github.io/blob/main/static/docs/getting-started/neurodesktop/Neurodesk_Windows_Technion.pdf</a></li><li>This group runs jupyterhub with a neurodesk image through Docker Compose: <a href=https://github.com/wieluk/jupyterhub-neurodesk/ target=_blank rel=noopener>https://github.com/wieluk/jupyterhub-neurodesk/</a></li><li>The most scalable solution is to run Neurodesk via Kubernetes. This setup is a bit more complex, but can handle many simultaneous users and is ideal for research groups and workshops. The easiest way to deploy Neurodesk on Kubernetes is to use Zero to Jupyterhub (<a href=https://z2jh.jupyter.org/en/stable/ target=_blank rel=noopener>https://z2jh.jupyter.org/en/stable/</a>) - then you can use the Neurodesk image like any other jupyterhub image. If you do not want to run a privileged container you need to deploy the cvmfs setup on Kubernetes as well: <a href=https://github.com/cvmfs-contrib/cvmfs-csi/ target=_blank rel=noopener>https://github.com/cvmfs-contrib/cvmfs-csi/</a></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-16206d6e7c6d00ab068079dbf4839b63>3.6 - Data Storage</h1><div class=lead>Add storage to Neurodesktop</div><div><nav id=TableOfContents><ul><li><a href=#drag-and-drop>Drag and Drop</a><ul><li><a href=#uploading-files>Uploading files</a></li><li><a href=#downloading-files>Downloading files</a></li></ul></li><li><a href=#local-storage>Local storage</a><ul><li><a href=#mounting-external-storage-on-your-host-computer>Mounting external storage on your host-computer</a></li></ul></li><li><a href=#cloud-storage>Cloud storage</a><ul><li><a href=#nextcloud-and-owncloud-desktop-clients>Nextcloud and Owncloud desktop clients</a></li><li><a href=#mounting-webdav-storage-using-davfs2>Mounting webdav storage using davfs2</a></li><li><a href=#rclone>Rclone</a></li><li><a href=#globus>Globus</a></li><li><a href=#mount-volume-using-sshfs>Mount volume using SSHFS</a></li></ul></li></ul></nav></div><h2 id=drag-and-drop>Drag and Drop</h2><h3 id=uploading-files>Uploading files</h3><p>You can drag-and-drop files into the browser window to get files into Neurodesktop. This will then start a file upload:</p><p><img src=https://user-images.githubusercontent.com/4021595/160577507-b5159bae-13c0-4fbf-85da-0ce55fd481f3.png alt={538BB51E-0FEB-46EA-B1B8-FDF122776735}></p><h3 id=downloading-files>Downloading files</h3><p>To download files from the desktop using the same mechanism you will need to open the guacamole settings by pressing CTRL-ALT-SHIFT (Control-Command-Shift on Mac). This will open a menu on the side:</p><p><img src=https://user-images.githubusercontent.com/4021595/160577828-0f8ba04e-aed7-4c26-a8d2-baf6c4be317a.png alt={A12EDB8A-3D01-4524-A7B5-24E5E94FB418}></p><p>where you can click on &ldquo;Shared Drive&rdquo;:</p><p><img src=https://user-images.githubusercontent.com/4021595/160577926-06e48896-9301-426a-b7d5-9d3b2df14504.png alt={645953A1-5D11-48C7-9DFB-25D4339EEA34}></p><p>a click (or double click on Mac) on the file will start the download.</p><p>You can browse into folders in the shared drive by clicking (double clicking on Mac) on them. To get back to the base of the shared drive, press on the drive icon in the top left of the side menu (just below the &ldquo;Shared Drive&rdquo; title).</p><p>To close the side menu, click on CTRL-ALT-SHIFT once more (Control-Command-Shift on Mac).</p><p>Note that it is only possible to upload or download one file at a time through this interface. If you have multiple files in a directory we recommend zipping the directory and then transferring one zip archive:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>zip files.zip files/</span></span></code></pre></div></div><h2 id=local-storage>Local storage</h2><p>If you are running Neurodesktop on your own hardware there will be a direct connection between the &ldquo;Storage&rdquo; folder on the Desktop, which is a link between &ldquo;/neurodesktop-storage&rdquo; in neurodesktop and the &ldquo;neurodesktop-storage&rdquo; folder on your C-drive (Windows) or home directory (Mac/Linux). This connection can be used for data processing and data transfer.</p><h3 id=mounting-external-storage-on-your-host-computer>Mounting external storage on your host-computer</h3><p>The -v C:/neurodesktop-storage:/neurodesktop-storage part of the docker command links the directory &ldquo;neurodesktop-storage&rdquo; on the “C drive” of your Windows computer to the directory /neurodesktop-storage inside the Desktop environment. Everything you store in there will be available inside the desktop and on the host computer. You can also mount additional directories by adding another -v parameter set (e.g. -v D:/moredata:/data) - this will mount the directory moredata from your D drive to /data inside neurodesktop. Important: the mountpoint inside neurodesktop needs to be named /data, otherwise the applications will not see the files without modifying the SINGULARITY_BINDPATH variable in your .bashrc.</p><p>If you are using the NeurodeskApp, you can set an additional storage location through the <a href=https://neurodesk.org/docs/getting-started/neurodesktop/neurodeskapp/#add-a-custom-data-directory target=_blank rel=noopener>settings</a></p><p>If you are starting Neurodesk through the command line, here is an example for Windows adding another storage directory:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cmd data-lang=cmd><span style=display:flex><span>docker run --shm-size=1gb -it --privileged --user=root --name neurodesktop -v C:/neurodesktop-storage:/neurodesktop-storage -v D:/moredata:/data -p 8888:8888 -e NEURODESKTOP_VERSION=2025-06-10 vnmd/neurodesktop:2025-06-10</span></span></code></pre></div></div><blockquote><p>Note for Windows users: Connecting network shares from Windows to Neurodesk can cause problems, so be careful when attempting this. Also, be aware that processing large amounts of files stored on a Windows filesystem inside Neurodesk will come with a performance penality due to the file system translation in the background. One option to get around these problems is to directly accessing your storage infrastructure inside Neurodesk.</p></blockquote><h2 id=cloud-storage>Cloud storage</h2><p>Another way to get your data into Neurodesktop is to use a cloud storage provider like Dropbox, OneDrive, OwnCloud, Nextcloud or more general tools like rclone or davfs2. Another good option could be to utilize Globus for large amounts of data.</p><h3 id=nextcloud-and-owncloud-desktop-clients>Nextcloud and Owncloud desktop clients</h3><p>Under the menu item &ldquo;Accessories&rdquo; you can find &ldquo;Nextcloud&rdquo; and &ldquo;ownCloud&rdquo; desktop sync clients that you can configure with your cloud service accounts.</p><h3 id=mounting-webdav-storage-using-davfs2>Mounting webdav storage using davfs2</h3><p>Another option is to directly mount webdav storage. Here is an example how to mount OwnCloud Storage into Neurodesktop:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mount -t davfs https://yourOwnCloudInstance.com/plus/remote.php/webdav/ /data/</span></span></code></pre></div></div><p>It then asks you for a username and password, which you can generate in the settings: yourOwnCloudInstance/plus/settings/personal?sectionid=security</p><h3 id=rclone>Rclone</h3><p>Rclone is a command line tool that enables interaction with various cloud services. Here is an example how to setup rclone with an OwnCloud account:</p><ul><li>start the configuration in a terminal window <code>rclone config</code></li><li>Create a new remote: <code>n</code></li><li>Provide a name for the remote: <code>OwnCloud</code></li><li>For the “Storage” option choose: <code>webdav</code></li><li>As “url” set: <code>https://yourOwnCloudInstance.com/plus/remote.php/webdav/</code></li><li>As “vendor” set OwnCloud: <code>2</code></li><li>Set your OwnCloud username after generating an access token yourOwnCloudInstance/plus/settings/personal?sectionid=security</li><li>Choose to type in your own password: y</li><li>Enter the Password / Token from the OwnCloud App passwords page and confirm it again:</li><li>Leave blank the bearer_token: <code>&lt;hit Enter></code></li><li>No advanced config necessary: <code>&lt;hit Enter></code></li><li>accept the configuration: <code>&lt;hit Enter></code></li><li>Quit the config: <code>q</code></li><li>Now we can download data to the HPC easily: <code>rclone copy --progress --transfers 8 OwnCloud:/raw-data-for-science-paper .</code></li><li>or upload data to OwnCloud: <code>rclone copy --progress --transfers 8 . OwnCloud:/data-processed</code></li></ul><h3 id=globus>Globus</h3><p>We also provide the globus client, so you can transfer large amounts of data between globus endpoints and Neurodesktop. You can configure it by running the following commands in the Neurodesktop environment:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ml globus
</span></span><span style=display:flex><span><span style=color:#57606a># First run the setup:</span>
</span></span><span style=display:flex><span>globusconnectpersonal -setup
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#Follow the instructions in the terminal: </span>
</span></span><span style=display:flex><span><span style=color:#57606a>#1) copy the URL into a browser and generate the Native App Authorization Code</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#2) then copy this code and paste it in the terminal</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#3) then name the endpoint, e.g. Neurodesktop</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Then start the GUI:</span>
</span></span><span style=display:flex><span>globusconnectpersonal -gui
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># If the connection fails, reset the permissions on the key file:</span>
</span></span><span style=display:flex><span>chmod <span style=color:#0550ae>600</span> /home/jovyan/.globusonline/lta/relay-anonymous-key.pem
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># If the connection still fails, start the client like this to get more information</span>
</span></span><span style=display:flex><span>globusconnectpersonal -debug</span></span></code></pre></div></div><p>Then add the directories you want to share with globus, by opening File -> Preferences:</p><img width=256 alt=image src=https://github.com/NeuroDesk/neurodesk.github.io/assets/4021595/c6c7b912-a113-43df-b6d9-233fb92c4ea0><p>and then add the paths required and hit Save:</p><img width=448 alt=image src=https://github.com/NeuroDesk/neurodesk.github.io/assets/4021595/daa8c036-4548-4da2-98f1-8ac39b7e8317><p>Then you can go to the globus file-manager <a href=https://app.globus.org/file-manager target=_blank rel=noopener>https://app.globus.org/file-manager</a> and your neurodesktop instance will be an endpoint for globus. You can change the path to any location you specified in the Preferences:</p><img width=2847 alt=image src=https://github.com/NeuroDesk/neurodesk.github.io/assets/4021595/35dcfc7a-2975-4fcc-8c49-dbe9c43b6433><h3 id=mount-volume-using-sshfs>Mount volume using SSHFS</h3><p>It is theoretically possible to mount an SSH target inside Neurodesktop, but it&rsquo;s not a very reliable way of mounting storage:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mkdir /mnt/data_mount
</span></span><span style=display:flex><span>sudo chmod a+rwx /mnt/data_mount
</span></span><span style=display:flex><span>sshfs -o allow_root USER@TARGET_HOST:TARGET_PATH /mnt/data_mount</span></span></code></pre></div></div><p>A better option is to use <code>scp</code> and copy data from an SSH endpoint:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp /neurodesk/myfile user@remoteserver:/data/</span></span></code></pre></div></div><p>An alternative is to mount the SSHFS target into a parent directory on your local machine or VM and then use the -v option in the docker run command to bind the parent directory of the SSHFS mount. NOTE: the SSHFS <em>has</em> to be mounted to a subdirectory inside a parent directory which is then bound to the docker container. If you directly bind to the mounted directory itself, your Neurodesktop container will stop being able to access it if the SSHFS mount disconnects and will not be able to access it again without restarting the Neurodesktop container.</p><p>For example, on a local Linux machine or VM:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sshfs -o allow_root USER@TARGET_HOST:TARGET_PATH/MyData SOURCE_PATH/SSHFS_Mounts/MyData</span></span></code></pre></div></div><p>Then add the following line to the docker run command when starting Neurodesktop (note the rshared flag):</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>-v /SSHFS_Mounts:/data:rshared <span style=color:#f6f8fa;background-color:#82071e>\</span></span></span></code></pre></div></div><p>TIP: If you use key pair authentication instead of password for your SSHFS mount, you can use the reconnect flag to reconnect automatically if the connection drops:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sshfs -o <span style=color:#953800>IdentityFile</span><span style=color:#0550ae>=</span>~/.ssh/id_rsa,allow_root,ServerAliveInterval<span style=color:#0550ae>=</span>5,ServerAliveCountMax<span style=color:#0550ae>=</span><span style=color:#0550ae>3</span> USER@TARGET_HOST:TARGET_PATH/MyData SOURCE_PATH/SSHFS_Mounts/MyData</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-e2f2f20a59ead737454fcded981ab689>4 - Neurocommand</h1><div class=lead>For more advanced users who prefer a command-line interface</div><p>Neurocommand requires a Linux host machine, virtual machine or WSL for Windows.</p></div><div class=td-content><h1 id=pg-6987a8204c89de50b7b62218a9346804>4.1 - Linux and HPC</h1><div class=lead>Install neurocommand on Linux, HPC</div><h2 id=ways-of-using-neurocommand-in-linux-and-hpc>Ways of using Neurocommand in Linux and HPC:</h2><ol><li>You can use the module files for Neurocontainers directly via CVMFS: <a href=https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/</a></li><li>or you can install Neurocommand as described here:</li></ol><h2 id=requirements>Requirements:</h2><ul><li>python 3.6+ <a href=https://www.anaconda.com/docs/getting-started/miniconda/install#linux-terminal-installer target=_blank rel=noopener>https://www.anaconda.com/docs/getting-started/miniconda/install#linux-terminal-installer</a></li><li>singularity <a href=https://docs.sylabs.io/guides/3.5/user-guide/quick_start.html target=_blank rel=noopener>https://docs.sylabs.io/guides/3.5/user-guide/quick_start.html</a></li><li>git</li><li>lmod <a href=https://lmod.readthedocs.io/en/latest/ target=_blank rel=noopener>https://lmod.readthedocs.io/en/latest/</a></li></ul><div class="alert alert-info" role=alert><strong>On HPC</strong>, you will likely have lmod and Singularity already installed - check with your sysadmin</div><h2 id=setup-instructions>Setup Instructions:</h2><h3 id=install-command-line-eg-running-on-linux-or-hpc><strong>Install command line</strong> (e.g. running on Linux or HPC)</h3><ol><li>Load singularity
For optimal performance, ensure you are using Singularity version 3.x:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module load singularity/3.5.0
</span></span><span style=display:flex><span><span style=color:#57606a>#or</span>
</span></span><span style=display:flex><span>module load singularity
</span></span><span style=display:flex><span><span style=color:#57606a>#or </span>
</span></span><span style=display:flex><span>module load apptainer</span></span></code></pre></div></div><p>If this doens&rsquo;t work it might already be loaded. Just run <code>singularity</code> and check.</p><ol start=2><li>Load aria2 (Optional)
To speed up container downloads, you can optionally install or load aria2c:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module load aria2c</span></span></code></pre></div></div><ol start=3><li>Clone and Set Up the Repository
Clone the repository into a directory with enough storage and ensure you are not using a symbolic link (to be sure run cd `pwd -P`). It’s recommended to perform this setup within a Python virtual environment (venv) or a Conda environment:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/NeuroDesk/neurocommand.git 
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> neurocommand 
</span></span><span style=display:flex><span>pip3 install -r neurodesk/requirements.txt --user 
</span></span><span style=display:flex><span>bash build.sh --cli
</span></span><span style=display:flex><span>bash containers.sh
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>SINGULARITY_BINDPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>`</span><span style=color:#6639ba>pwd</span> -P<span style=color:#0a3069>`</span>
</span></span><span style=display:flex><span><span style=color:#57606a># OR, depending on your installation:</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>APPTAINER_BINDPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>`</span><span style=color:#6639ba>pwd</span> -P<span style=color:#0a3069>`</span></span></span></code></pre></div></div><h3 id=install-containers><strong>Install Containers</strong></h3><ul><li>If these steps are successful, the help will be displayed</li><li>Install all or only specific containers by following the instructions, e.g.:</li></ul><ol><li>Search and Install Specific Containers
To search for containers that have &ldquo;itksnap&rdquo; in the name:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash containers.sh itksnap</span></span></code></pre></div></div><ol start=2><li>Install a Specific Version
To install a specific version, (e.g., itksnap version 4.0.2 from 20240117):</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./local/fetch_containers.sh itksnap 4.0.2 <span style=color:#0550ae>20240117</span></span></span></code></pre></div></div><p>To install all containers with that name:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash containers.sh --itksnap</span></span></code></pre></div></div><p>To download all containers (be careful - there are a lot of containers!):</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash containers.sh --all</span></span></code></pre></div></div><h3 id=add-your-containers-to-lmod><strong>Add your containers to lmod</strong></h3><ul><li>To add each container to the module search path, run the following:</li></ul><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module use <span style=color:#953800>$PWD</span>/local/containers/modules/</span></span></code></pre></div></div><ul><li>It may be a good idea to add this to your .bashrc if it works. When adding to your .bashrc you will need to replace $PWD to point to the correct path, i.e. the output of this</li></ul><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;module use </span><span style=color:#953800>$PWD</span><span style=color:#0a3069>/local/containers/modules/&#34;</span></span></span></code></pre></div></div><ul><li>It is very important to also set the SINGULARITY_BINDPATH or the APPTAINER_BINDPATH variable in your .bashrc. This variable must contain a comma-separated list of directories you want to access with the Neurodesk tools.</li></ul><p>e.g.:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>SINGULARITY_BINDPATH</span><span style=color:#0550ae>=</span>/scratch/,/data/
</span></span><span style=display:flex><span><span style=color:#57606a># OR, depending on your installation:</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>APPTAINER_BINDPATH</span><span style=color:#0550ae>=</span>/scratch/,/data/
</span></span><span style=display:flex><span><span style=color:#57606a>#Note: User the correct line depending on your installation. Do not add a directory that does not exist, otherwise the containers will not start!</span></span></span></code></pre></div></div><ul><li>Run <code>ml avail</code> to see the installed containers at the top of the list (neurodesk containers will take preference over system modules with the same name), run:</li></ul><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module --ignore_cache avail</span></span></code></pre></div></div><ul><li>Every time you start a new shell you need to run <code>module use PathToYourContainers</code> or add this command to you .bashrc file.</li></ul><div class="alert alert-info" role=alert><p><strong>GPU support</strong></p><p>Some of our containers contain GPU-accelerated applications. Here is an example that runs the GPU accelerated program eddy in FSL:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>module load fsl/6.0.5.1
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>neurodesk_singularity_opts</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;--nv&#39;</span>
</span></span><span style=display:flex><span>eddy_cuda9.1</span></span></code></pre></div></div></div><div class="alert alert-info" role=alert><p><strong>For Lxde desktops</strong></p><p><code>bash build.sh --lxde --edit</code></p></div><div class="alert alert-info" role=alert><p><strong>For Mate desktops</strong></p><p>Run <code>bash build.sh --init</code> (or <code>bash build.sh --lxde --edit</code>)<br>lxde/mate: Mate<br>installdir: Where all the neurocommand files will be stored (Default: ./local)<br>appmenu: The linux menu xml file. (Usually /etc/xdg/menus/****-applications.menu)<br>appdir: Location for the .desktop files for this linux desktop (Usually /usr/share/applications)<br>deskdir: Location for the .directory files for this linux desktop (Typically /usr/share/desktop-directories)</p></div><div class="alert alert-info" role=alert><p><strong>For desktop menus</strong></p><p><code>sudo bash install.sh</code> to install<br><em>Creates symlinks to menu files in installation dir</em></p><p><code>sudo bash uninstall.sh</code> to uninstall<br><em>Removes symlinks</em></p></div><div class="alert alert-info" role=alert><p><strong>For user-specific desktop menus in a shared Linux environment</strong></p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>mkdir -p $HOME/.config/menus
</span></span><span style=display:flex><span>mkdir -p $HOME/.local/share/applications
</span></span><span style=display:flex><span>mkdir -p $HOME/.local/share/desktop-directories
</span></span><span style=display:flex><span>ln -sfn /PATH_TO_YOUR_INSTALLATION/neurocommand/local/xfce-applications.menu $HOME/.config/menus
</span></span><span style=display:flex><span>ln -sfn /PATH_TO_YOUR_INSTALLATION/neurocommand/local/neurodesk-applications.menu $HOME/.config/menus
</span></span><span style=display:flex><span>ln -sfn /PATH_TO_YOUR_INSTALLATION/neurocommand/local/applications $HOME/.local/share/applications/neurodesk
</span></span><span style=display:flex><span>ln -sfn /PATH_TO_YOUR_INSTALLATION/neurocommand/local/desktop-directories $HOME/.local/share/desktop-directories/neurodesk</span></span></code></pre></div></div></div><h2 id=to-update>To update</h2><h3 id=1-update-the-neurocommand-repository>1. Update the Neurocommand Repository</h3><p>First, ensure your local repository is up to date by pulling the latest changes:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git pull</span></span></code></pre></div></div><p>Next, rebuild Neurocommand by running:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash build.sh</span></span></code></pre></div></div><h3 id=2-update-containers>2. Update Containers</h3><p>To update the containers, navigate to the neurodesktop directory and run:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash containers.sh</span></span></code></pre></div></div><h3 id=3-update-specific-modules>3. Update Specific Modules</h3><p>Choose the module you want to update for example you want to update mrtrix3/3.0.2 module with the eddy_cuda fix:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/neurocommand/local/fetch_containers.sh mrtrix3 3.0.2 <span style=color:#0550ae>20221108</span> mrview <span style=color:#953800>$@</span></span></span></code></pre></div></div><h1 id=examples-for-specific-hpcs>Examples for specific HPCs:</h1><h2 id=greatlakes---university-of-michigan>Greatlakes - University of Michigan</h2><h3 id=setup-on-a-desktop>Setup on a desktop</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>module <span style=color:#6639ba>load</span> singularity
</span></span><span style=display:flex><span><span style=color:#57606a># now change to a directory with enough storage, e.g. /nfs/turbo/username</span>
</span></span><span style=display:flex><span>git clone https<span style=color:#1f2328>:</span><span style=color:#0550ae>//</span>github<span style=color:#0550ae>.</span>com<span style=color:#0550ae>/</span>NeuroDesk<span style=color:#0550ae>/</span>neurocommand<span style=color:#0550ae>.</span>git 
</span></span><span style=display:flex><span>cd neurocommand 
</span></span><span style=display:flex><span>pip3 install <span style=color:#0550ae>-</span>r neurodesk<span style=color:#0550ae>/</span>requirements<span style=color:#0550ae>.</span>txt <span style=color:#0550ae>--</span>user 
</span></span><span style=display:flex><span>bash build<span style=color:#0550ae>.</span>sh <span style=color:#0550ae>--</span>cli
</span></span><span style=display:flex><span>bash containers<span style=color:#0550ae>.</span>sh
</span></span><span style=display:flex><span><span style=color:#cf222e>export</span> SINGULARITY_BINDPATH<span style=color:#0550ae>=</span><span style=color:#f6f8fa;background-color:#82071e>`</span>pwd <span style=color:#0550ae>-</span>P<span style=color:#f6f8fa;background-color:#82071e>`</span>
</span></span><span style=display:flex><span>bash containers<span style=color:#0550ae>.</span>sh itksnap
</span></span><span style=display:flex><span><span style=color:#57606a># now select a version of itksnap to install. For this copy and paste the installation</span>
</span></span><span style=display:flex><span>echo <span style=color:#0a3069>&#34;module load singularity&#34;</span> <span style=color:#0550ae>&gt;&gt;</span> <span style=color:#0550ae>~/.</span>bashrc
</span></span><span style=display:flex><span>echo <span style=color:#0a3069>&#34;module use $PWD/local/containers/modules/&#34;</span> <span style=color:#0550ae>&gt;&gt;</span> <span style=color:#0550ae>~/.</span>bashrc
</span></span><span style=display:flex><span>echo <span style=color:#0a3069>&#34;export SINGULARITY_BINDPATH=/nfs/,/scratch/&#34;</span> <span style=color:#0550ae>&gt;&gt;</span> <span style=color:#0550ae>~/.</span>bashrc</span></span></code></pre></div></div><h3 id=setup-on-with-a-jupyter-notebook>Setup on with a jupyter notebook</h3><p>Start new Jupyter notebook by entering &ldquo;load singularity&rdquo; in the Module Commands field:</p><p><img src=https://github.com/user-attachments/assets/8c54a2a5-57db-4e43-9504-5c4b5e1278c1 alt=image></p><p>Then run these commands:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#0550ae>!</span>pip install jupyterlmod
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Restart the kernel by clicking Kernel -&gt; Restart Kernel</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>import module
</span></span><span style=display:flex><span>await module<span style=color:#0550ae>.</span>load<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;niimath&#39;</span><span style=color:#1f2328>)</span></span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-2848cfc675dcf08317b0e0a4a44ba198>4.2 - Windows</h1><div class=lead>Install neurocommand on Windows</div><h2 id=wsl-w-ubuntu--lxde>WSL (w/ Ubuntu + LXDE)</h2><p>For more information on WSL: <a href=https://docs.microsoft.com/en-us/windows/wsl target=_blank rel=noopener>https://docs.microsoft.com/en-us/windows/wsl</a></p><h3 id=setting-up>Setting up</h3><ol><li>Setup WSL2 using the following instructions <em>(Ubuntu 18.04 recommended)</em><br><a href=https://docs.microsoft.com/en-us/windows/wsl/install-win10 target=_blank rel=noopener>https://docs.microsoft.com/en-us/windows/wsl/install-win10</a>
<em>Proceed until a Ubuntu bash shell is available from the Windows Host</em><br><em>Run the remaining commands in the Bash shell</em></li><li><code>sudo apt-get install lxde</code> to install LXDE desktop in WSL</li><li>Reboot</li><li><code>sudo apt-get install xrdp</code> to install XRDP in WSL</li><li>Open <code>/etc/xrdp/xrdp.ini</code>
Change <code>port=3389</code> to <code>port=3390</code> and save</li><li>Run <code>echo startlxde > ~/.xsession</code></li></ol><h3 id=running>Running</h3><ol><li><code>sudo service xrdp start</code> to start xrdp server</li><li>Open Microsoft Remote Desktop Connection in Windows host</li><li>Connect to <code>localhost:3390</code></li><li>In the next login page, leave Session as <code>Xorg</code>. Enter your WSL username and password and click <code>OK</code></li><li>This should open an LXDE Linux Desktop environment. Follow <a href=https://neurodesk.org/docs/getting-started/neurocommand/linux>Linux guide</a> from here on</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-6f6d6eb96124ff36a4032864b85d7fcd>4.3 - Visual Studio Code</h1><div class=lead>Guide connecting your VS Code environment to Neurodesktop</div><p>The following guide is for connecting to Neurodesktop using a VS Code installation running on your host machine.</p><blockquote><p>Please see additional instructions below if Neurodesktop is running remotely (i.e. Cloud, HPC, VM)</p></blockquote><h2 id=pre-requisites>Pre-requisites</h2><p>Visual Studio Code <em>(<a href=https://code.visualstudio.com target=_blank rel=noopener>https://code.visualstudio.com</a>)</em> installed on your host. Standalone version should work fine
Install the following VS Code extensions:</p><ul><li><input checked disabled type=checkbox> <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker" target=_blank rel=noopener>Docker extension</a> (Required)</li><li><input disabled type=checkbox> <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack" target=_blank rel=noopener>Remote development extension pack</a>. Includes the following extensions<ul><li><input checked disabled type=checkbox> <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" target=_blank rel=noopener>Remote - Containers</a> (Required)</li><li><input disabled type=checkbox> <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl" target=_blank rel=noopener>Remote - WSL</a> (For windows hosts)</li></ul></li></ul><h2 id=connecting-to-neurodesktop>Connecting to Neurodesktop</h2><p>Open VS Code and open a Folder (File > Open Folder)</p><blockquote><p>This can be any folder (e.g. home or project folder). VS Code runs into errors if no folder is opened.</p></blockquote><p>Open the Command Palette (Ctrl+Shift+P).</p><p>Select <code>Remote-Containers: Attach to Running Container</code> from the dropdown panel</p><p>Start typing in &rsquo;neurodesktop. Select <code>/neurodesktop</code> from the list</p><p>This should open a VS Code Window connected to the neurodesktop as a Dev Container.</p><blockquote><p>This may take about a minute if it is the first time you are connecting, as VS code has to install the VS Code server onto the container. Repeat connections should be faster.</p></blockquote><h3 id=first-time-connection>First time connection</h3><blockquote><p>The first time connection will default to using neurodesktop root user. We want the default connection to be as the normal user to avoid permission issues.
To check which user is being used, open the terminal in the neurodesktop VS Code instance and check if the user is <code>user</code> or <code>root</code></p></blockquote><p>Follow the following steps to configure your VS Code instance to connect to neurodesktop as normal user by default:</p><ol><li><p>Open the Command Palette (Ctrl+Shift+P).</p></li><li><p>Select <code>Remote-Containers: Open Container Configuration File</code> from the dropdown panel</p></li><li><p>This will open a <code>neurodesktop%3alatest.json</code> file. Overwrite the file with the following contents</p></li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>	<span style=color:#0550ae>&#34;workspaceFolder&#34;</span><span style=color:#1f2328>:</span> <span style=color:#0a3069>&#34;/home/user&#34;</span><span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>	<span style=color:#0550ae>&#34;remoteUser&#34;</span><span style=color:#1f2328>:</span> <span style=color:#0a3069>&#34;jovyan&#34;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code></pre></div></div><ol start=4><li>Close this VS Code window. Use steps in <a href=https://neurodesk.org/docs/getting-started/neurodesktop/visual-studio-code/#connecting-to-neurodesktop target=_blank rel=noopener>previous section</a> to connect normally</li></ol><h2 id=useful-additions>Useful Additions</h2><p>Plugins to view neuroimaging data inside VScode:
<img src=https://neurodesk.org/static/docs/getting-started/neurocommand/niivue_vscode.png alt=niivue-vscode></p><p><img src=https://user-images.githubusercontent.com/4021595/163663250-4e8894c6-ea26-4224-b619-87f5485880c1.png alt=image></p></div><div class=td-content style=page-break-before:always><h1 id=pg-bdff14fa4e0deb6ab9cfe6b64a103097>5 - Neurocontainers</h1><div class=lead>What neurocontainers are about</div></div><div class=td-content><h1 id=pg-9341599ceaaad02e5f7da1a3beee568a>5.1 - CVMFS</h1><div class=lead>Neurodesk Singularity Containers on CVMFS</div><h2 id=install-the-cernvm-file-system-cvmfs>Install the CernVM File System (CVMFS)</h2><p>To begin, install CVMFS. Follow the official instructions here: <a href=https://cvmfs.readthedocs.io/en/stable/cpt-quickstart.html#getting-the-software target=_blank rel=noopener>https://cvmfs.readthedocs.io/en/stable/cpt-quickstart.html#getting-the-software</a></p><p>An example installation for Ubuntu in Windows Subsystem for Linux (WSL) would look like this:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install lsb-release
</span></span><span style=display:flex><span>wget https://ecsft.cern.ch/dist/cvmfs/cvmfs-release/cvmfs-release-latest_all.deb
</span></span><span style=display:flex><span>sudo dpkg -i cvmfs-release-latest_all.deb
</span></span><span style=display:flex><span>rm -f cvmfs-release-latest_all.deb
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install build-essential
</span></span><span style=display:flex><span>sudo apt-get install cvmfs</span></span></code></pre></div></div><p>Ubuntu 24.04 might have an issue with this, so try installing dependies manually:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>sudo apt install libattr1=1:2.5.2-1build1 libuuid1=2.39.3-9ubuntu6</span></span></code></pre></div></div><h2 id=configure-cvmfs>Configure CVMFS</h2><p>Once installed create the keys and configure the servers used:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mkdir -p /etc/cvmfs/keys/ardc.edu.au/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;-----BEGIN PUBLIC KEY-----
</span></span></span><span style=display:flex><span><span style=color:#0a3069>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwUPEmxDp217SAtZxaBep
</span></span></span><span style=display:flex><span><span style=color:#0a3069>Bi2TQcLoh5AJ//HSIz68ypjOGFjwExGlHb95Frhu1SpcH5OASbV+jJ60oEBLi3sD
</span></span></span><span style=display:flex><span><span style=color:#0a3069>qA6rGYt9kVi90lWvEjQnhBkPb0uWcp1gNqQAUocybCzHvoiG3fUzAe259CrK09qR
</span></span></span><span style=display:flex><span><span style=color:#0a3069>pX8sZhgK3eHlfx4ycyMiIQeg66AHlgVCJ2fKa6fl1vnh6adJEPULmn6vZnevvUke
</span></span></span><span style=display:flex><span><span style=color:#0a3069>I6U1VcYTKm5dPMrOlY/fGimKlyWvivzVv1laa5TAR2Dt4CfdQncOz+rkXmWjLjkD
</span></span></span><span style=display:flex><span><span style=color:#0a3069>87WMiTgtKybsmMLb2yCGSgLSArlSWhbMA0MaZSzAwE9PJKCCMvTANo5644zc8jBe
</span></span></span><span style=display:flex><span><span style=color:#0a3069>NQIDAQAB
</span></span></span><span style=display:flex><span><span style=color:#0a3069>-----END PUBLIC KEY-----&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/cvmfs/keys/ardc.edu.au/neurodesk.ardc.edu.au.pub
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;CVMFS_USE_GEOAPI=yes&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/cvmfs/config.d/neurodesk.ardc.edu.au.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;CVMFS_SERVER_URL=&#34;http://cvmfs-geoproximity.neurodesk.org/cvmfs/@fqrn@;http://cvmfs.neurodesk.org/cvmfs/@fqrn@;http://s1osggoc-cvmfs.openhtc.io:8080/cvmfs/@fqrn@;http://s1fnal-cvmfs.openhtc.io:8080/cvmfs/@fqrn@;http://s1sampa-cvmfs.openhtc.io:8080/cvmfs/@fqrn@;http://s1brisbane-cvmfs.openhtc.io/cvmfs/@fqrn@;http://s1nikhef-cvmfs.openhtc.io/cvmfs/@fqrn@;http://s1bnl-cvmfs.openhtc.io/cvmfs/@fqrn@;http://s1perth-cvmfs.openhtc.io/cvmfs/@fqrn@&#34;&#39;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/cvmfs/config.d/neurodesk.ardc.edu.au.conf 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;CVMFS_KEYS_DIR=&#34;/etc/cvmfs/keys/ardc.edu.au/&#34;&#39;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/cvmfs/config.d/neurodesk.ardc.edu.au.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;CVMFS_HTTP_PROXY=DIRECT&#34;</span> <span style=color:#1f2328>|</span> sudo tee  /etc/cvmfs/default.local
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;CVMFS_QUOTA_LIMIT=5000&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a  /etc/cvmfs/default.local
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_config setup</span></span></code></pre></div></div><p>You can use the list above, but you can also pick a subset of servers that are close to you or fit your usecase better. To better understand what to choose, we use the following CVMFS server setup:</p><p>These CVMFS Stratum 1 servers are hosted by the Open Science Grid and every server has a Cloudflare CDN alias that is correctly located through the Maxmind GEOAPI service in the CVMFS client:</p><ul><li>Illinois, USA: s1fnal-cvmfs.openhtc.io:8080 -> cvmfs-s1fnal.opensciencegrid.org:8000</li><li>Sao Paulo, Brazil: s1sampa-cvmfs.openhtc.io:8080 -> sampacs01.if.usp.br:8000</li><li>Nebraska, USA: s1osggoc-cvmfs.openhtc.io:8080 -> cvmfs-s1goc.opensciencegrid.org:8000</li><li>New York, US: s1bnl-cvmfs.openhtc.io:8080 -> cvmfs-s1bnl.opensciencegrid.org:8000</li><li>Oxford, UK: s1ral-cvmfs.openhtc.io:8080 -> cvmfs-egi.gridpp.rl.ac.uk:8000</li></ul><p>This server is currently down:</p><ul><li>Netherlands, Europe: s1nikhef-cvmfs.openhtc.io:8080 -> cvmfs01.nikhef.nl:8000</li></ul><p>This CVMFS Stratum 1 server is hosted by ARDC Nectar Cloud and also has a Cloudflare CDN alias.</p><ul><li>Brisbane, Queensland, Australia: s1brisbane-cvmfs.openhtc.io -> cvmfs-brisbane.neurodesk.org</li><li>Sydney, New South Wales, Australia: s1sydney-cvmfs.openhtc.io -> cvmfs-sydney.neurodesk.org</li><li>Melbourne, Victoria, Australia: s1melbourne-cvmfs.openhtc.io -> cvmfs-melbourne.neurodesk.org</li></ul><p>This CVMFS Stratum 1 server is hosted by Pawseys Nimbus Cloud and also has a Cloudflare CDN alias.</p><ul><li>Perth, Western Australia, Australia: s1perth-cvmfs.openhtc.io -> cvmfs-perth.neurodesk.org</li></ul><p>This CVMFS Stratum 1 server is hosted by AWS:</p><ul><li>Frankfurt, Germany: cvmfs-frankfurt.neurodesk.org -> ec2-3-72-92-91.eu-central-1.compute.amazonaws.com</li></ul><p>This CMVFS Stratum 1 server is hosted by Jetstream:</p><ul><li>Indiana, US: cvmfs-jetstream.neurodesk.org -> 149.165.172.188</li></ul><p>Then we have a one geolocation-steered domain: cvmfs-geoproximity.neurodesk.org</p><ul><li><p>153.02 (Longitude),-27.46 (Latitude) -> cvmfs-brisbane.neurodesk.org</p></li><li><p>151.2073, -33.8678 -> cvmfs-sydney.neurodesk.org</p></li><li><p>115.86,-31.95 -> cvmfs-perth.neurodesk.org</p></li><li><p>-88.30,41.84 -> cvmfs-s1fnal.opensciencegrid.org</p></li><li><p>-96.66,40.83 -> cvmfs-s1goc.opensciencegrid.org</p></li><li><p>-1.26, 51.75 -> cvmfs-egi.gridpp.rl.ac.uk</p></li><li><p>4.90,52.37 -> cvmfs01.nikhef.nl</p></li><li><p>8.68,50.11 -> ec2-3-72-92-91.eu-central-1.compute.amazonaws.com</p></li><li><p>-46.63,-23.54 -> sampacs01.if.usp.br</p></li><li><p>-86.45,39.22 -> cvmfs-jetstream.neurodesk.org</p></li><li><p>145.13,-37.92 -> cvmfs-melbourne.neurodesk.org</p></li><li><p>Every location has a health check attached to it and doesn&rsquo;t forward to it if the destination is not working.</p></li></ul><p>Then we have 3 direct URLS without CDNs as well that are geolocation-steered:
cvmfs1.neurodesk.org:
South America -> sampacs01.if.usp.br
North America -> cvmfs-s1fnal.opensciencegrid.org
Default -> cvmfs-brisbane.neurodesk.org
Europe -> ec2-3-72-92-91.eu-central-1.compute.amazonaws.com
Asia -> cvmfs-perth.neurodesk.org</p><p>cvmfs2.neurodesk.org:
North America -> cvmfs-s1goc.opensciencegrid.org
Europe -> cvmfs01.nikhef.nl
Default -> cvmfs-s1goc.opensciencegrid.org</p><p>cvmfs3.neurodesk.org:
North America -> cvmfs-s1bnl.opensciencegrid.org
Asia -> cvmfs-brisbane.neurodesk.org
Default -> cvmfs-s1bnl.opensciencegrid.org
Oceania -> cvmfs-perth.neurodesk.org</p><p>These servers are currently NOT working and are NOT YET mirroring our repository (we are waiting for RAL to come back online, then the others will mirror that):</p><ul><li>Swinburne, Australia: s1swinburne-cvmfs.openhtc.io:8080 -> cvmfs-s1.hpc.swin.edu.au:8000</li><li>China: s1ihep-cvmfs.openhtc.io:8080 -> cvmfs-stratum-one.ihep.ac.cn:8000</li></ul><h3 id=for-wsl-users>For WSL users</h3><p>You will need to run this for each new WSL session:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cvmfs_config wsl2_start</span></span></code></pre></div></div><p>Test if the connection works:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cvmfs_config chksetup
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ls /cvmfs/neurodesk.ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_talk -i neurodesk.ardc.edu.au host info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cvmfs_config stat -v neurodesk.ardc.edu.au</span></span></code></pre></div></div><h3 id=for-ubuntu-2204-users>For Ubuntu 22.04 users</h3><p>If configuring CVMFS returns the following error:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Error: failed to load cvmfs library, tried: <span style=color:#0a3069>&#39;./libcvmfs_fuse3_stub.so&#39;</span> <span style=color:#0a3069>&#39;/usr/lib/libcvmfs_fuse3_stub.so&#39;</span> <span style=color:#0a3069>&#39;/usr/lib64/libcvmfs_fuse3_stub.so&#39;</span> <span style=color:#0a3069>&#39;./libcvmfs_fuse_stub.so&#39;</span> <span style=color:#0a3069>&#39;/usr/lib/libcvmfs_fuse_stub.so&#39;</span> <span style=color:#0a3069>&#39;/usr/lib64/libcvmfs_fuse_stub.so&#39;</span>
</span></span><span style=display:flex><span>./libcvmfs_fuse3_stub.so: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>/usr/lib/libcvmfs_fuse3_stub.so: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>/usr/lib64/libcvmfs_fuse3_stub.so: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>./libcvmfs_fuse_stub.so: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>libcrypto.so.1.1: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>/usr/lib64/libcvmfs_fuse_stub.so: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Failed to <span style=color:#6639ba>read</span> CernVM-FS configuration</span></span></code></pre></div></div><p>A temporary workaround is:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://mirror.umd.edu/ubuntu/ubuntu/pool/main/o/openssl/libssl1.1_1.1.1f-1ubuntu2.15_amd64.deb
</span></span><span style=display:flex><span>dpkg -i libssl1.1_1.1.1f-1ubuntu2.15_amd64.deb</span></span></code></pre></div></div><h2 id=install-singularityapptainer>Install singularity/apptainer</h2><p>e.g for Ubuntu/Debian install apptainer:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install -y software-properties-common
</span></span><span style=display:flex><span>sudo add-apt-repository -y ppa:apptainer/ppa
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install -y apptainer
</span></span><span style=display:flex><span>sudo apt-get install -y apptainer-suid</span></span></code></pre></div></div><p>e.g. for Ubuntu/Debian install singularity:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>VERSION</span><span style=color:#0550ae>=</span>1.18.3 <span style=color:#953800>OS</span><span style=color:#0550ae>=</span>linux <span style=color:#953800>ARCH</span><span style=color:#0550ae>=</span>amd64 <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    wget https://dl.google.com/go/go<span style=color:#953800>$VERSION</span>.<span style=color:#953800>$OS</span>-<span style=color:#953800>$ARCH</span>.tar.gz <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    sudo tar -C /usr/local -xzvf go<span style=color:#953800>$VERSION</span>.<span style=color:#953800>$OS</span>-<span style=color:#953800>$ARCH</span>.tar.gz <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    rm go<span style=color:#953800>$VERSION</span>.<span style=color:#953800>$OS</span>-<span style=color:#953800>$ARCH</span>.tar.gz
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;export GOPATH=${HOME}/go&#39;</span> &gt;&gt; ~/.bashrc <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    <span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;export PATH=/usr/local/go/bin:${PATH}:${GOPATH}/bin&#39;</span> &gt;&gt; ~/.bashrc <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    <span style=color:#6639ba>source</span> ~/.bashrc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go get -d github.com/sylabs/singularity
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>VERSION</span><span style=color:#0550ae>=</span>v3.10.0 <span style=color:#57606a># or another tag or branch if you like &amp;&amp; \</span>
</span></span><span style=display:flex><span>    <span style=color:#6639ba>cd</span> <span style=color:#953800>$GOPATH</span>/src/github.com/sylabs/singularity <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    git fetch <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    git checkout <span style=color:#953800>$VERSION</span> <span style=color:#57606a># omit this command to install the latest bleeding edge code from master</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>VERSION</span><span style=color:#0550ae>=</span>3.10.0 <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#57606a># adjust this as necessary \</span>
</span></span><span style=display:flex><span>    mkdir -p <span style=color:#953800>$GOPATH</span>/src/github.com/sylabs <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    <span style=color:#6639ba>cd</span> <span style=color:#953800>$GOPATH</span>/src/github.com/sylabs <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    wget https://github.com/sylabs/singularity/releases/download/v<span style=color:#0a3069>${</span><span style=color:#953800>VERSION</span><span style=color:#0a3069>}</span>/singularity-ce-<span style=color:#0a3069>${</span><span style=color:#953800>VERSION</span><span style=color:#0a3069>}</span>.tar.gz <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    tar -xzf singularity-ce-<span style=color:#0a3069>${</span><span style=color:#953800>VERSION</span><span style=color:#0a3069>}</span>.tar.gz <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\7</span><span style=color:#0550ae>89</span>
</span></span><span style=display:flex><span>    <span style=color:#6639ba>cd</span> ./singularity-ce-<span style=color:#0a3069>${</span><span style=color:#953800>VERSION</span><span style=color:#0a3069>}</span> <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    ./mconfig --without-seccomp --without-conmon
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>./mconfig --without-seccomp --without-conmon <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    make -C ./builddir <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    sudo make -C ./builddir install
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>PATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;/usr/local/singularity/bin:</span><span style=color:#0a3069>${</span><span style=color:#953800>PATH</span><span style=color:#0a3069>}</span><span style=color:#0a3069>&#34;</span></span></span></code></pre></div></div><h2 id=use-of-neurodesk-cvmfs-containers>Use of Neurodesk CVMFS containers</h2><p>The containers are now available in /cvmfs/neurodesk.ardc.edu.au/containers/ and can be started with:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity shell /cvmfs/neurodesk.ardc.edu.au/containers/itksnap_3.8.0_20201208/itksnap_3.8.0_20201208.simg</span></span></code></pre></div></div><p>make sure that SINGULARITY_BINDPATH includes the directories you want to work with:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>SINGULARITY_BINDPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;/cvmfs,/mnt,/home&#39;</span></span></span></code></pre></div></div><h3 id=for-wsl-users-1>For WSL users</h3><p>The homedirectory might not be supported. Avoid mounting it with</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity shell --no-home /cvmfs/neurodesk.ardc.edu.au/containers/itksnap_3.8.0_20201208/itksnap_3.8.0_20201208.simg</span></span></code></pre></div></div><p>or configure permanently:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vi /etc/singularity/singularity.conf</span></span></code></pre></div></div><p>set</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount <span style=color:#953800>home</span> <span style=color:#0550ae>=</span> no</span></span></code></pre></div></div><h2 id=install-module-system>Install module system</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install lmod</span></span></code></pre></div></div><p>or</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install lmod</span></span></code></pre></div></div><h2 id=use-of-containers-in-the-module-system>Use of containers in the module system</h2><h3 id=configuration-for-module-system>Configuration for module system</h3><p>Create a the new file <code>/usr/share/module.sh</code> with the content (NOTE: update the version, here 6.6, with your lmod version, e.g. 6.6 (Ubuntu 20.04/22.04), 8.6.19 (Ubuntu 24.04)):</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># system-wide profile.modules                                          #</span>
</span></span><span style=display:flex><span><span style=color:#57606a># Initialize modules for all sh-derivative shells                      #</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#----------------------------------------------------------------------#</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>trap</span> <span style=color:#0a3069>&#34;&#34;</span> <span style=color:#0550ae>1</span> <span style=color:#0550ae>2</span> <span style=color:#0550ae>3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>case</span> <span style=color:#0a3069>&#34;</span><span style=color:#953800>$0</span><span style=color:#0a3069>&#34;</span> in
</span></span><span style=display:flex><span>    -bash<span style=color:#1f2328>|</span>bash<span style=color:#1f2328>|</span>*/bash<span style=color:#0550ae>)</span> . /usr/share/lmod/YOURLMODVERSION_HERE/init/bash <span style=color:#1f2328>;;</span>
</span></span><span style=display:flex><span>       -ksh<span style=color:#1f2328>|</span>ksh<span style=color:#1f2328>|</span>*/ksh<span style=color:#0550ae>)</span> . /usr/share/lmod/YOURLMODVERSION_HERE/init/ksh <span style=color:#1f2328>;;</span>
</span></span><span style=display:flex><span>       -zsh<span style=color:#1f2328>|</span>zsh<span style=color:#1f2328>|</span>*/zsh<span style=color:#0550ae>)</span> . /usr/share/lmod/YOURLMODVERSION_HERE/init/zsh <span style=color:#1f2328>;;</span>
</span></span><span style=display:flex><span>          -sh<span style=color:#1f2328>|</span>sh<span style=color:#1f2328>|</span>*/sh<span style=color:#0550ae>)</span> . /usr/share/lmod/YOURLMODVERSION_HERE/init/sh <span style=color:#1f2328>;;</span>
</span></span><span style=display:flex><span>                    *<span style=color:#0550ae>)</span> . /usr/share/lmod/YOURLMODVERSION_HERE/init/sh <span style=color:#1f2328>;;</span>  <span style=color:#57606a># default for scripts</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>esac</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>trap</span> - <span style=color:#0550ae>1</span> <span style=color:#0550ae>2</span> <span style=color:#0550ae>3</span></span></span></code></pre></div></div><h3 id=make-the-module-system-usable-in-the-shell>Make the module system usable in the shell</h3><p>Add the following lines to your <code>~/.bashrc</code> file or to <code>/etc/bash.bashrc</code> for a global install:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#cf222e>if</span> <span style=color:#0550ae>[</span> -f <span style=color:#0a3069>&#39;/usr/share/module.sh&#39;</span> <span style=color:#0550ae>]</span><span style=color:#1f2328>;</span> <span style=color:#cf222e>then</span> <span style=color:#6639ba>source</span> /usr/share/module.sh<span style=color:#1f2328>;</span> <span style=color:#cf222e>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>if</span> <span style=color:#0550ae>[</span> -d /cvmfs/neurodesk.ardc.edu.au/neurodesk-modules <span style=color:#0550ae>]</span><span style=color:#1f2328>;</span> <span style=color:#cf222e>then</span>
</span></span><span style=display:flex><span>        <span style=color:#57606a># export MODULEPATH=&#34;/cvmfs/neurodesk.ardc.edu.au/neurodesk-modules&#34;</span>
</span></span><span style=display:flex><span>        module use /cvmfs/neurodesk.ardc.edu.au/neurodesk-modules/*
</span></span><span style=display:flex><span><span style=color:#cf222e>else</span>
</span></span><span style=display:flex><span>        <span style=color:#6639ba>export</span> <span style=color:#953800>MODULEPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;/neurodesktop-storage/containers/modules&#34;</span>              
</span></span><span style=display:flex><span>        module use <span style=color:#953800>$MODULEPATH</span>
</span></span><span style=display:flex><span>        <span style=color:#6639ba>export</span> <span style=color:#953800>CVMFS_DISABLE</span><span style=color:#0550ae>=</span><span style=color:#6639ba>true</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>if</span> <span style=color:#0550ae>[</span> -f <span style=color:#0a3069>&#39;/usr/share/module.sh&#39;</span> <span style=color:#0550ae>]</span><span style=color:#1f2328>;</span> <span style=color:#cf222e>then</span>
</span></span><span style=display:flex><span>        <span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;Run &#34;ml av&#34; to see which tools are available - use &#34;ml &lt;tool&gt;&#34; to use them in this shell.&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>if</span> <span style=color:#0550ae>[</span> -v <span style=color:#0a3069>&#34;</span><span style=color:#953800>$CVMFS_DISABLE</span><span style=color:#0a3069>&#34;</span> <span style=color:#0550ae>]</span><span style=color:#1f2328>;</span> <span style=color:#cf222e>then</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>if</span> <span style=color:#0550ae>[</span> ! -d <span style=color:#953800>$MODULEPATH</span> <span style=color:#0550ae>]</span><span style=color:#1f2328>;</span> <span style=color:#cf222e>then</span>
</span></span><span style=display:flex><span>                        <span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;Neurodesk tools not yet downloaded. Choose tools to install from the Application menu.&#39;</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>fi</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>fi</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>fi</span></span></span></code></pre></div></div><p>Restart the current shell or run</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>source</span> ~/.bashrc</span></span></code></pre></div></div><h2 id=use-of-containers-in-the-module-system-1>Use of containers in the module system</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>SINGULARITY_BINDPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;/cvmfs,/mnt,/home&#39;</span>
</span></span><span style=display:flex><span>module use /cvmfs/neurodesk.ardc.edu.au/neurodesk-modules/*
</span></span><span style=display:flex><span>ml fsl
</span></span><span style=display:flex><span>fslmaths</span></span></code></pre></div></div><h2 id=troubleshooting-and-diagnostics>Troubleshooting and diagnostics</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># Check servers</span>
</span></span><span style=display:flex><span>sudo cvmfs_talk -i neurodesk.ardc.edu.au host probe
</span></span><span style=display:flex><span>sudo cvmfs_talk -i neurodesk.ardc.edu.au host info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Change settings</span>
</span></span><span style=display:flex><span>sudo touch /var/log/cvmfs_debug.log.cachemgr
</span></span><span style=display:flex><span>sudo chown cvmfs /var/log/cvmfs_debug.log.cachemgr
</span></span><span style=display:flex><span>sudo touch /var/log/cvmfs_debug.log
</span></span><span style=display:flex><span>sudo chown cvmfs /var/log/cvmfs_debug.log
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo vi /etc/cvmfs/config.d/neurodesk.ardc.edu.au.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> -e <span style=color:#0a3069>&#34;\nCVMFS_DEBUGLOG=/var/log/cvmfs_debug.log&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/cvmfs/default.local
</span></span><span style=display:flex><span>cat /etc/cvmfs/default.local
</span></span><span style=display:flex><span>sudo cvmfs_config umount
</span></span><span style=display:flex><span>sudo service autofs stop
</span></span><span style=display:flex><span>sudo mount -t cvmfs neurodesk.ardc.edu.au /cvmfs/neurodesk.ardc.edu.au
</span></span><span style=display:flex><span><span style=color:#57606a># check if new settings are applied correctly:</span>
</span></span><span style=display:flex><span>cvmfs_config showconfig neurodesk.ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat /var/log/cvmfs_debug.log
</span></span><span style=display:flex><span>cat /var/log/cvmfs_debug.log.cachemgr </span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-49d0352733bb165ba628562dfd61ca4d>5.2 - DataLad</h1><div class=lead>Use Neurodesktop containers with DataLad and ReproNim&rsquo;s containerized workflows.</div><h1 id=using-neurodesk-containers-with-datalad>Using Neurodesk Containers with DataLad</h1><p>This page explains how to use <a href=https://www.datalad.org/ target=_blank rel=noopener>DataLad</a> and the <a href=https://github.com/ReproNim/containers target=_blank rel=noopener>ReproNim containers</a> with Neurodesk tools.</p><h2 id=install-datalad-datalad-container-and-the-repronim-containers-repository>Install DataLad, datalad-container, and the ReproNim containers repository</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>conda install datalad
</span></span><span style=display:flex><span>pip install datalad_container
</span></span><span style=display:flex><span>datalad install https://github.com/ReproNim/containers.git
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> containers</span></span></code></pre></div></div><h2 id=list-all-default-available-containers>List all default available containers</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>datalad containers-list</span></span></code></pre></div></div><h2 id=download-and-run-the-latest-container-version>Download and run the latest container version</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>datalad containers-run -n neurodesk-romeo</span></span></code></pre></div></div><h2 id=change-version-of-container>Change version of container</h2><p>You can change which version of a container is used in two ways:</p><h3 id=option-1-change-version-in-dataladconfig>Option 1: change version in .datalad/config</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vi .datalad/config
</span></span><span style=display:flex><span><span style=color:#57606a># now change the version of the container you like</span>
</span></span><span style=display:flex><span><span style=color:#57606a># all available containers can be seen via `ls images/neurodesk`</span>
</span></span><span style=display:flex><span>datalad save -m <span style=color:#0a3069>&#39;downgraded version of romeo to x.x.x&#39;</span>
</span></span><span style=display:flex><span>datalad containers-run -n neurodesk-romeo</span></span></code></pre></div></div><h3 id=option-2-change-version-using-freeze_versions-script>Option 2: change version using freeze_versions script</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># all available containers can be seen via `ls images/neurodesk`</span>
</span></span><span style=display:flex><span>scripts/freeze_versions neurodesk-romeo<span style=color:#0550ae>=</span>3.2.4
</span></span><span style=display:flex><span>datalad save -m <span style=color:#0a3069>&#39;downgraded version of romeo to 3.2.4&#39;</span>
</span></span><span style=display:flex><span>datalad containers-run -n neurodesk-romeo</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-1b25d69307756f9ec28868f9217a4bc3>5.3 - Docker</h1><div class=lead>Neurodesk Docker containers</div><p>Our containers are automatically built in <a href=https://github.com/NeuroDesk/neurocontainers/ target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/</a> and hosted on <a href=https://hub.docker.com/u/vnmd target=_blank rel=noopener>dockerhub</a> and on <a href=https://github.com/NeuroDesk/neurocontainers/packages target=_blank rel=noopener>github</a></p><h2 id=pull-docker-containers>Pull Docker containers</h2><p>e.g. for a julia container
docker</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker pull vnmd/julia_1.6.1</span></span></code></pre></div></div><p>You an also build singularity images from dockerhub</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity build julia_1.6.1.simg docker://vnmd/julia_1.6.1</span></span></code></pre></div></div><p>Replace <code>julia_1.6.1</code> with your selected application. You can find the available containers here: <a href=https://neurodesk.org/applications/ target=_blank rel=noopener>https://neurodesk.org/applications/</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-38076a15e096b2be19f34c03e8bc0e7b>5.4 - Open Recon</h1><div class=lead>Neurodesktop containers can be used in Open Recon</div><p>These instructions were tested on GitHub Codespaces, and we recommend this as a starting point.</p><p>For a local setup you need Docker (<a href=https://www.docker.com/%29 target=_blank rel=noopener>https://www.docker.com/)</a>, Python3 and you need to install neurodocker and add it to your path:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>python <span style=color:#0550ae>-</span>m pip install neurodocker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#check if neurodocker is already on the path:</span>
</span></span><span style=display:flex><span>which neurodocker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># if not:</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#the path depends on your local setup</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>export</span> PATH<span style=color:#0550ae>=$</span>PATH<span style=color:#1f2328>:</span><span style=color:#0550ae>~/.</span>local<span style=color:#0550ae>/</span>lib<span style=color:#0550ae>/</span>python3<span style=color:#0550ae>.</span><span style=color:#0550ae>12</span><span style=color:#0550ae>/</span>site<span style=color:#0550ae>-</span>packages<span style=color:#0550ae>/</span>bin
</span></span><span style=display:flex><span><span style=color:#cf222e>export</span> PATH<span style=color:#0550ae>=$</span>PATH<span style=color:#1f2328>:</span><span style=color:#0550ae>~/.</span>local<span style=color:#0550ae>/</span>bin</span></span></code></pre></div></div><h2 id=1-add-the-installation-of-the-python-mrd-server-to-any-recipe-in-httpsgithubcomneurodeskneurocontainers>1) add the installation of the Python MRD server to any recipe in <a href=https://github.com/neurodesk/neurocontainers/tree/main/recipes target=_blank rel=noopener>https://github.com/neurodesk/neurocontainers</a></h2><p>Make sure to adjust invertcontrast.py to your pipeline needs (or replace/rename other files from the <a href=https://github.com/kspaceKelvin/python-ismrmrd-server target=_blank rel=noopener>Python MRD server</a>:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>- include: macros/openrecon/neurodocker.yaml</span></span></code></pre></div></div><p>here is an example: <a href=https://github.com/NeuroDesk/neurocontainers/tree/main/recipes/openreconexample target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/tree/main/recipes/openreconexample</a></p><p>Then build the recipe:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>sf-login openreconexample --architecture x86_64</span></span></code></pre></div></div><h2 id=2-test-the-tool-inside-the-container-on-its-own-first-and-then-test-through-mrd-server>2) test the tool inside the container on its own first and then test through MRD server</h2><p>convert dicom data to mrd test data:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>cd</span> /opt/code/python-ismrmrd-server
</span></span><span style=display:flex><span>python3 dicom2mrd.py -o input_data.h5 PATH_TO_YOUR_DICOM_FILES</span></span></code></pre></div></div><p>start server and client and test application:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 /opt/code/python-ismrmrd-server/main.py -v -r -H<span style=color:#0550ae>=</span>0.0.0.0 -p<span style=color:#0550ae>=</span><span style=color:#0550ae>9002</span> -s -S<span style=color:#0550ae>=</span>/tmp/share/saved_data <span style=color:#1f2328>&amp;</span>
</span></span><span style=display:flex><span><span style=color:#57606a># wait until you see Serving ... and the press ENTER</span>
</span></span><span style=display:flex><span>python3 /opt/code/python-ismrmrd-server/client.py -G dataset -o openrecon_output.h5 input_data.h5</span></span></code></pre></div></div><h2 id=3-submit-the-container-recipe-to-the--repository>3) submit the container-recipe to the <a href=https://github.com/NeuroDesk/neurocontainers/ target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/</a> repository</h2><p>here is an example: <a href=https://github.com/NeuroDesk/neurocontainers/tree/main/recipes/openreconexample target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/tree/main/recipes/openreconexample</a></p><p>Then the container gets build automatically.</p><h2 id=4-submit-the-container-to-the--repository>4) submit the container to the <a href=https://github.com/NeuroDesk/openrecon/ target=_blank rel=noopener>https://github.com/NeuroDesk/openrecon/</a> repository</h2><p>here is an example: <a href=https://github.com/NeuroDesk/openrecon/tree/main/recipes/openreconexample target=_blank rel=noopener>https://github.com/NeuroDesk/openrecon/tree/main/recipes/openreconexample</a></p><h1 id=more-detailed-instructions-for-building-all-of-this-on-github>More detailed instructions for building all of this on Github</h1><p>contributed by Kerrin Pine</p><h2 id=prerequisites>Prerequisites</h2><p>You have a GitHub account (public github.com required, so that a container can be submitted to the public NeuroDesk OpenRecon repository and built)</p><h2 id=process>Process</h2><ol><li>Fork neurodesk/neurocontainers to your personal GitHub account (Go to <a href=https://github.com/neurodesk/neurocontainers target=_blank rel=noopener>https://github.com/neurodesk/neurocontainers</a>, in the upper right click “Fork”, if prompted, fork to your personal GitHub account.</li><li>After forking, go to your forked repo, e.g.: github.com/YOUR_GITHUB_USERNAME/neurocontainers</li><li>Create a new codespace (In your forked repo, click the green &lt;> Code button, Select “Create codespace on master”)</li><li>In the terminal created, run neurodocker &ndash;version and you should see something like 2.0.0, good!</li><li>Still in the terminal, cd recipes, mkdir projectname (replace with your project name), copy files from recipes/openreconexample to this new directory to give us something to start from</li><li>In build.yaml and test.yaml, change all occurences of openreconexample to your own project name and change the openreconexample.py to projectname.py</li><li>Follow the instructions in build.yaml to build</li><li>Building drops you into the container itself. Follow the instructions in test.yaml to import your own test DICOM data (can be dragged from another window into the folder in Codespaces) into a h5 file for testing.</li><li>Continue following the instructions in test.yaml to start the server and send demo data to it (e.g. python3 /opt/code/python-ismrmrd-server/client.py -G dataset -o /buildhostdirectory/output.h5 /buildhostdirectory/b0map.h5 c cbsopenreconexample). You should see an appropriate number of images being sent from the client to the server and an appropriate number returned. The output in e.g. output.h5 can be viewed with the built in H5web.</li><li>Clicking control-shift-X or Extensions on the left and installing &ldquo;niivue&rdquo; gives you a NII image viewer in Codespaces if you need to check intermediate outputs for troubleshooting.</li><li>Once the container has been thoroughly tested and you are happy with it, your new files will need to be committed (and pushed if you were not working on github.com), don&rsquo;t include your demo data!</li><li>To build a container ready for the scanner, the first step is to open a pull request (e.g. &ldquo;Add new openreconexample container for MRD server, This PR adds a new example container for OpenRecon using the MRD server. It includes: neurodocker.yaml for building the container, Customized MRD Python scripts, Testing inside GitHub Codespaces&rdquo;.</li><li>The second step is to write a recipe for <a href=https://github.com/neurodesk/openrecon target=_blank rel=noopener>https://github.com/neurodesk/openrecon</a>, again since it&rsquo;s not our repository, we need to fork it, navigate to recipes, create a folder for our project and add an OpenReconLabel.json (defines how the container description and UI options appear on the scanner), and a params.sh with the version number. Then, open a pull request. Updating the version number will trigger the container to be re-built, instructions for downloading and installing the container then appear as an &ldquo;Issue&rdquo; on this repository.</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-e0bd210b2d2da10725008fb55e28ffb0>5.5 - Singularity</h1><div class=lead>Neurodesk Singularity Containers</div><p>Our docker containers are converted to singularity containers and stored on Object storage.</p><h2 id=download-singularity-containers>Download Singularity Containers</h2><p>First get an overview of which containers are available as Singularity containers:
<a href=https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/log.txt target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/log.txt</a></p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -s https://raw.githubusercontent.com/NeuroDesk/neurocommand/main/cvmfs/log.txt</span></span></code></pre></div></div><p>assign the container name to a variable:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>container</span><span style=color:#0550ae>=</span>itksnap_3.8.0_20201208</span></span></code></pre></div></div><p>Then download the containers. One way is to use CURL:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -X GET https://neurocontainers.neurodesk.org/<span style=color:#953800>$container</span>.simg -O</span></span></code></pre></div></div><h2 id=singularity-containers-and-gpus>Singularity Containers and GPUs</h2><p>Some of our containers contain GPU-accelerated applications. Here is an example that tests the GPU accelerated program eddy in FSL:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -X GET https://neurocontainers.neurodesk.org/fsl_6.0.5.1_20221016.simg -O
</span></span><span style=display:flex><span>git clone https://github.com/neurolabusc/gpu_test.git
</span></span><span style=display:flex><span>singularity shell --nv fsl_6.0.5.1_20221016.simg
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> gpu_test/etest/
</span></span><span style=display:flex><span>bash runme_gpu.sh</span></span></code></pre></div></div><h2 id=transparent-singularity>Transparent Singularity</h2><p>The singularity containers can be also be used in combination with our <a href=https://neurodesk.org/developers/architecture/transparent_singularity>Transparent Singularity Tool</a>, which wraps the executables inside a container to make them easily available for pipelines. More information can be found here:</p><p>one example to do this is:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -s https://raw.githubusercontent.com/NeuroDesk/neurocommand/main/cvmfs/log.txt
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>container</span><span style=color:#0550ae>=</span>itksnap_3.8.0_20201208
</span></span><span style=display:flex><span>git clone https://github.com/NeuroDesk/transparent-singularity <span style=color:#0a3069>${</span><span style=color:#953800>container</span><span style=color:#0a3069>}</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> <span style=color:#0a3069>${</span><span style=color:#953800>container</span><span style=color:#0a3069>}</span>
</span></span><span style=display:flex><span>./run_transparent_singularity.sh <span style=color:#0a3069>${</span><span style=color:#953800>container</span><span style=color:#0a3069>}</span></span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-fa663b80c7a5dbfaaf21ca791272c2b8>5.6 - Windows 11 and Windows Subsystem for Linux</h1><div class=lead>Use Neurocontainers on Windows 11 with WSL and Wayland Display Server</div><h2 id=1-install-wsl>1. Install WSL</h2><p>Follow the instructions to enable Windows Subsystem for Linux 2 in Windows 11: <a href=https://docs.microsoft.com/en-us/windows/wsl/install target=_blank rel=noopener>https://docs.microsoft.com/en-us/windows/wsl/install</a></p><h2 id=2-configure-cvmfs-singularity-and-lmod-only-needs-to-be-done-once>2. Configure CVMFS, Singularity and LMOD (only needs to be done once)</h2><h3 id=install-build-tools>Install build tools</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install make gcc</span></span></code></pre></div></div><h3 id=install-singularity>Install singularity</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>SINGULARITY_VERSION</span><span style=color:#0550ae>=</span>3.9.3 <span style=color:#953800>VERSION</span><span style=color:#0550ae>=</span>1.17.2 <span style=color:#953800>OS</span><span style=color:#0550ae>=</span>linux <span style=color:#953800>ARCH</span><span style=color:#0550ae>=</span>amd64
</span></span><span style=display:flex><span>wget -q https://dl.google.com/go/go<span style=color:#953800>$VERSION</span>.<span style=color:#953800>$OS</span>-<span style=color:#953800>$ARCH</span>.tar.gz 
</span></span><span style=display:flex><span>sudo tar -C /usr/local -xzvf go<span style=color:#953800>$VERSION</span>.<span style=color:#953800>$OS</span>-<span style=color:#953800>$ARCH</span>.tar.gz 
</span></span><span style=display:flex><span>rm go<span style=color:#953800>$VERSION</span>.<span style=color:#953800>$OS</span>-<span style=color:#953800>$ARCH</span>.tar.gz 
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>GOPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>${</span><span style=color:#953800>HOME</span><span style=color:#0a3069>}</span>/go 
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>PATH</span><span style=color:#0550ae>=</span>/usr/local/go/bin:<span style=color:#0a3069>${</span><span style=color:#953800>PATH</span><span style=color:#0a3069>}</span>:<span style=color:#0a3069>${</span><span style=color:#953800>GOPATH</span><span style=color:#0a3069>}</span>/bin 
</span></span><span style=display:flex><span>mkdir -p <span style=color:#953800>$GOPATH</span>/src/github.com/sylabs 
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> <span style=color:#953800>$GOPATH</span>/src/github.com/sylabs 
</span></span><span style=display:flex><span>wget -q https://github.com/sylabs/singularity/releases/download/v<span style=color:#0a3069>${</span><span style=color:#953800>SINGULARITY_VERSION</span><span style=color:#0a3069>}</span>/singularity-ce-<span style=color:#0a3069>${</span><span style=color:#953800>SINGULARITY_VERSION</span><span style=color:#0a3069>}</span>.tar.gz 
</span></span><span style=display:flex><span>tar -xzvf singularity-ce-<span style=color:#0a3069>${</span><span style=color:#953800>SINGULARITY_VERSION</span><span style=color:#0a3069>}</span>.tar.gz 
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> singularity-ce-<span style=color:#0a3069>${</span><span style=color:#953800>SINGULARITY_VERSION</span><span style=color:#0a3069>}</span> 
</span></span><span style=display:flex><span>./mconfig --prefix<span style=color:#0550ae>=</span>/usr/local/singularity 
</span></span><span style=display:flex><span>make -C builddir 
</span></span><span style=display:flex><span>sudo make -C builddir install 
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> .. 
</span></span><span style=display:flex><span>sudo rm -rf singularity-ce-<span style=color:#0a3069>${</span><span style=color:#953800>SINGULARITY_VERSION</span><span style=color:#0a3069>}</span> 
</span></span><span style=display:flex><span>sudo rm -rf /usr/local/go <span style=color:#953800>$GOPATH</span></span></span></code></pre></div></div><h3 id=setup-bindpaths-for-singularity-eg-in-bashrc>Setup Bindpaths for Singularity (e.g. in .bashrc)</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>PATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;/usr/local/singularity/bin:</span><span style=color:#0a3069>${</span><span style=color:#953800>PATH</span><span style=color:#0a3069>}</span><span style=color:#0a3069>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>SINGULARITY_BINDPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;/cvmfs,/mnt,/home&#39;</span></span></span></code></pre></div></div><h3 id=cvmfs>CVMFS</h3><p>Follow the instructions here: <a href=https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/</a></p><h3 id=lmod>LMOD</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install lmod</span></span></code></pre></div></div><h2 id=3-use-neurodesk-containers>3. Use Neurodesk containers</h2><p><div class="alert alert-primary" role=alert><p>When restarting WSL the cvmfs service has to be started manually:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cvmfs_config wsl2_start</span></span></code></pre></div></div></div><br>Initialize the neurodesk modules:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module use /cvmfs/neurodesk.ardc.edu.au/neurodesk-modules/*</span></span></code></pre></div></div><p>Example usage of fsleyes:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ml fsl
</span></span><span style=display:flex><span>fsleyes</span></span></code></pre></div></div><p>List the available programs:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ml av</span></span></code></pre></div></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Mastodon aria-label=Mastodon><a target=_blank rel=noopener href=https://masto.ai/@Neurodesk aria-label=Mastodon><i class="fab fa-mastodon responsive-icon"></i>&nbsp;&nbsp;Mastodon</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Discussion aria-label=Discussion><a target=_blank rel=noopener href=https://github.com/orgs/NeuroDesk/discussions aria-label=Discussion><i class="fa fa-envelope responsive-icon"></i>&nbsp;&nbsp;Discussion</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Acknowledgements aria-label=Acknowledgements><a target=_blank rel=noopener href=https://neurodesk.org/overview/acknowledgement/ aria-label=Acknowledgements><i class="fa fa-handshake responsive-icon"></i>&nbsp;&nbsp;Acknowledgements</a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Metrics aria-label=Metrics><a target=_blank rel=noopener href=https://neurodesk.org/docs/overview/metrics aria-label=Metrics><i class="fa fa-signal responsive-icon"></i>&nbsp;&nbsp;Metrics</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Uptime aria-label=Uptime><a target=_blank rel=noopener href=https://stats.uptimerobot.com/NBE38IZWZM aria-label=Uptime><i class="fa fa-circle responsive-icon"></i>&nbsp;&nbsp;Uptime</a></li></ul></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://neurodesk.org/js/main.min.371147b5f79a80912e5b0a2cd8f59889c6f0ac501947707b50f470099ce2141c.js integrity="sha256-NxFHtfeagJEuWwos2PWYicbwrFAZR3B7UPRwCZziFBw=" crossorigin=anonymous></script><script defer src=https://neurodesk.org/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.8.2 integrity="sha512-lsD+XVzdBI6ZquXc8gqbw0/bgrfIsMJwY/8xvmvbN+U3gZSeG7BXQoCq4zv/yCmntR2GLHtgB+bD4ESPsKIbIA==" crossorigin=anonymous></script><script type=text/javascript>const containers=["#docsearch-0","#docsearch-1"];for(let e of containers)docsearch({container:e,appId:"P5JEPQ5LZ2",apiKey:"56c6d9a954f7df2a98dcedb2763af8c4",indexName:"neurodesk"})</script><script src=https://neurodesk.org/js/tabpane-persist.js></script></body></html>