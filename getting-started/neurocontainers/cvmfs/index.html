<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=https://neurodesk.org/static/favicons/favicon.ico><link rel=apple-touch-icon href=https://neurodesk.org/static/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=https://neurodesk.org/static/favicons/android-192x192.png sizes=192x192><title>CVMFS | Neurodesk</title>
<meta name=description content="Neurodesk Singularity Containers on CVMFS"><meta property="og:url" content="https://neurodesk.org/getting-started/neurocontainers/cvmfs/"><meta property="og:site_name" content="Neurodesk"><meta property="og:title" content="CVMFS"><meta property="og:description" content="Neurodesk Singularity Containers on CVMFS"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="getting-started"><meta property="article:modified_time" content="2025-11-02T12:11:38+10:00"><meta itemprop=name content="CVMFS"><meta itemprop=description content="Neurodesk Singularity Containers on CVMFS"><meta itemprop=dateModified content="2025-11-02T12:11:38+10:00"><meta itemprop=wordCount content="1173"><meta name=twitter:card content="summary"><meta name=twitter:title content="CVMFS"><meta name=twitter:description content="Neurodesk Singularity Containers on CVMFS"><link rel=preload href=https://neurodesk.org/scss/main.min.2f0e7dd254a8510650f53c8ffbf7f9af0cc4e0d57d8872fb80c52b2440db9e88.css as=style integrity="sha256-Lw590lSoUQZQ9TyP+/f5rwzE4NV9iHL7gMUrJEDbnog=" crossorigin=anonymous><link href=https://neurodesk.org/scss/main.min.2f0e7dd254a8510650f53c8ffbf7f9af0cc4e0d57d8872fb80c52b2440db9e88.css rel=stylesheet integrity="sha256-Lw590lSoUQZQ9TyP+/f5rwzE4NV9iHL7gMUrJEDbnog=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.8.2 integrity="sha512-l7pkV1dOURFyHCeH8I4fK9lCkQKuqhlsTCqRl3zktifDlB8oTUJ+mJPgYkK9kHpUut8j1iPquTv32t6hvTPv3g==" crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=G-4Z9774J59Y"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4Z9774J59Y")}</script></head><body class=td-page><header><nav class="td-navbar navbar-expand-xl navbar-dark bg-dark"><div class="container-fluid flex-md-row"><a class=navbar-brand href=https://neurodesk.org/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" viewBox="0 0 560.3 82.7"><defs><style>.st0{isolation:isolate}.st1{fill:#6ba442}.st2{fill:#fff}</style></defs><g class="st0"><path class="st2" d="M30.2 73.4h-9.9v-60h9.8l33.3 44.8V13.4h10.1v60H63.4L30.1 29.1v44.3z"/><path class="st2" d="M85.8 13.4h45l-1.4 10.3-33.8-.2v13.6l20.1-.2v11.4H95.6v13.5H129l1.8 11.6h-45v-60z"/><path class="st2" d="M141.4 13.4h9.9v50.2h28.2V13.4h9.9v51.4c0 1.2-.2 2.3-.7 3.3-.4 1-1.1 2-1.8 2.7-.8.8-1.7 1.4-2.8 1.8-1.1.4-2.2.7-3.3.7h-30.7c-1.2.0-2.3-.2-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7s-.7-2.2-.7-3.3V13.4z"/><path class="st2" d="M244.7 34.8c0 4.6-1.4 7.9-4.3 10-4 2.9-8.4 4.4-13.2 4.4l17.5 24.3h-12.1l-14.7-24h-9.5v24h-8.5V13.4h29.8c10 0 15 4.9 15 14.6v6.8zm-36.3 6h15.2c3.9-.2 6.6-.7 8-1.6 2.6-1.8 3.9-2.9 3.9-3.5V29c0-2.2-.6-3.9-1.7-5-1.4-1.4-3-2.1-4.7-2.1h-20.8v18.9z"/><path class="st2" d="M306.5 59.4c0 4.8-.3 7.7-.6 8.7-.3.9-.9 1.8-1.8 2.8s-1.7 1.3-3.1 1.8c-1.3.5-3.6.7-6.8.7h-27.1c-1.2.0-2.8-.2-5-.6-2.5-.5-3.9-1.1-4.4-1.8-.9-1.5-1.6-2.4-1.8-2.7-.4-.6-.7-3.6-.7-8.7V42.1c0-8.8.0-14.1.2-15.9.0-2.6.3-5 .7-7.4.1-.8.7-1.7 1.7-2.7.6-.7 2.1-1.3 4.4-1.8 1.9-.4 3.5-.7 5-.7h27.1c3.5.0 5.7.1 6.8.6 1.3.5 2.3 1.1 3.1 1.9.9.8 1.5 1.7 2 2.7.4.8.6 3.3.6 7.4l.2 16.7c0 8.1-.1 13.6-.3 16.7zM265.4 23.3v40h31.2v-40h-31.2z"/></g><g class="st0"><path class="st1" d="M316.2 73.4v-60l31.3.3c2.5.0 5.4.6 8.7 1.9 2.6 1 4.8 2.4 6.6 4.3 2 2 3.4 4.2 4.3 6.6 1 3 1.5 5.9 1.5 8.7v17.3c0 3.2-.5 6.1-1.5 8.7s-2.4 4.8-4.2 6.6-4 3.2-6.6 4.2-5.5 1.5-8.7 1.5h-31.3zm30.7-11.2c4.9.0 8-.7 9.2-2 2.1-2.3 3.2-5.8 3.2-10.4v-14c.2-1.9-.2-3.6-1.1-5.2-.8-1.5-1.8-2.8-2.9-3.9-1.1-1.1-2.4-1.9-3.9-2.4-1.5-.6-3-.8-4.4-.8h-21.3v38.8h21.2z"/><path class="st1" d="M381 13.4h45l-1.4 10.3-33.8-.2v13.6l20.1-.2v11.4h-20.1v13.5h33.4l1.8 11.6h-45v-60z"/><path class="st1" d="M446.4 46.5c-1.1.0-2.2-.3-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7-.4-1-.7-2.2-.7-3.3V22.1c0-1.2.2-2.3.7-3.3s1.1-2 1.8-2.7 1.7-1.4 2.8-1.8 2.2-.7 3.3-.7h29.1c1.2.0 2.3.2 3.3.7s1.9 1.1 2.7 1.8c1.1 1 1.7 2 1.8 2.8l.7 3.3v6.7l-9 2.7v-7.7h-28.7v14.3l29.1.5c1.2.0 2.3.3 3.3.7 1.1.4 2 1.1 2.8 1.8.8.8 1.4 1.7 1.8 2.7.4 1 .7 2.2.7 3.3V65c0 1.2-.2 2.3-.7 3.3-.4 1-1.1 2-1.8 2.7-.8.8-1.7 1.4-2.7 1.8-1 .4-2.1.7-3.3.7h-30c-1.2.0-2.3-.2-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7-.4-1-.7-2.2-.7-3.3v-7.7l9.5-1.6v7.7h28.7V47.2l-28.7-.5z"/><path class="st1" d="M505.4 13.4v23.9l26.2-23.9h12.9l-30.8 27.4 32.1 32.6h-12.9l-27.5-28.1v28.1h-10.6v-60h10.6z"/></g></svg></span></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=main_navbar><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/overview/><span>Overview</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class="nav-link active" href=https://neurodesk.org/getting-started/><span class=active>Getting Started</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/tutorials-examples/><span>Tutorials & Examples</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/developers/><span>Developer Documentation</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/NeuroDesk target=_blank><span>GitHub</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/contact/><span>Contact</span></a></li></ul><div class="navbar-nav d-lg-block"><div class=td-search><div class=td-search--algolia id=docsearch-0></div></div></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div class=td-search><div class=td-search--algolia id=docsearch-0></div></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="td-sidebar-nav collapse td-sidebar-nav--search-disabled" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-getting-started-li><a href=https://neurodesk.org/getting-started/ title="Get started with Neurodesk" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-getting-started><span>Getting Started</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-getting-startedlocal-li><a href=https://neurodesk.org/getting-started/local/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-getting-startedlocal><span>Local</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedlocalexamples-li><a href=https://neurodesk.org/getting-started/local/examples/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedlocalexamples><span>Examples</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedlocalneurodeskapp-li><a href=https://neurodesk.org/getting-started/local/neurodeskapp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedlocalneurodeskapp><span>Neurodesk App</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-getting-startedhosted-li><a href=https://neurodesk.org/getting-started/hosted/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-getting-startedhosted><span>Hosted</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedhostedgithub-li><a href=https://neurodesk.org/getting-started/hosted/github/ title="Github Codespaces" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedhostedgithub><span>Github</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedhostedbunya-li><a href=https://neurodesk.org/getting-started/hosted/bunya/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedhostedbunya><span>Bunya</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedhostednectar-li><a href=https://neurodesk.org/getting-started/hosted/nectar/ title="Nectar Virtual Desktop Service" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedhostednectar><span>Nectar Desktops</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedhostedplay-li><a href=https://neurodesk.org/getting-started/hosted/play/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedhostedplay><span>Play</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedhostedgooglecolab-li><a href=https://neurodesk.org/getting-started/hosted/googlecolab/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedhostedgooglecolab><span>Google Colab</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-getting-startedneurodesktop-li><a href=https://neurodesk.org/getting-started/neurodesktop/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-getting-startedneurodesktop><span>Neurodesktop</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurodesktopportable-li><a href=https://neurodesk.org/getting-started/neurodesktop/portable/ title="Portable Unprivileged NeuroDesktop" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurodesktopportable><span>Portable</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurodesktoplinux-li><a href=https://neurodesk.org/getting-started/neurodesktop/linux/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurodesktoplinux><span>Linux</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurodesktopmac-li><a href=https://neurodesk.org/getting-started/neurodesktop/mac/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurodesktopmac><span>MacOS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurodesktopwindows-li><a href=https://neurodesk.org/getting-started/neurodesktop/windows/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurodesktopwindows><span>Windows</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurodesktopcloud-li><a href=https://neurodesk.org/getting-started/neurodesktop/cloud/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurodesktopcloud><span>Cloud</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurodesktopstorage-li><a href=https://neurodesk.org/getting-started/neurodesktop/storage/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurodesktopstorage><span>Data Storage</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-getting-startedneurocommand-li><a href=https://neurodesk.org/getting-started/neurocommand/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-getting-startedneurocommand><span>Neurocommand</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurocommandlinux-and-hpc-li><a href=https://neurodesk.org/getting-started/neurocommand/linux-and-hpc/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurocommandlinux-and-hpc><span>Linux and HPC</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurocommandwindows-li><a href=https://neurodesk.org/getting-started/neurocommand/windows/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurocommandwindows><span>Windows</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurocommandvisual-studio-code-li><a href=https://neurodesk.org/getting-started/neurocommand/visual-studio-code/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurocommandvisual-studio-code><span>Visual Studio Code</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-getting-startedneurocontainers-li><a href=https://neurodesk.org/getting-started/neurocontainers/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-getting-startedneurocontainers><span>Neurocontainers</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-getting-startedneurocontainerscvmfs-li><a href=https://neurodesk.org/getting-started/neurocontainers/cvmfs/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurocontainerscvmfs><span class=td-sidebar-nav-active-item>CVMFS</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurocontainersdatalad-li><a href=https://neurodesk.org/getting-started/neurocontainers/datalad/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurocontainersdatalad><span>DataLad</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurocontainersdocker-li><a href=https://neurodesk.org/getting-started/neurocontainers/docker/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurocontainersdocker><span>Docker</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurocontainersopenrecon-li><a href=https://neurodesk.org/getting-started/neurocontainers/openrecon/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurocontainersopenrecon><span>Open Recon</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurocontainerssingularity-li><a href=https://neurodesk.org/getting-started/neurocontainers/singularity/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurocontainerssingularity><span>Singularity</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-getting-startedneurocontainerswindows11-wsl-li><a href=https://neurodesk.org/getting-started/neurocontainers/windows11-wsl/ title="Windows 11 and Windows Subsystem for Linux" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-getting-startedneurocontainerswindows11-wsl><span>Windows 11 & WSL</span></a></li></ul></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-10 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://neurodesk.org/getting-started/>Getting Started</a></li><li class=breadcrumb-item><a href=https://neurodesk.org/getting-started/neurocontainers/>Neurocontainers</a></li><li class="breadcrumb-item active" aria-current=page>CVMFS</li>&nbsp;<a href=https://github.com/neurodesk/neurodesk.github.io/edit/main/content/en/Getting-Started/Neurocontainers/CVMFS.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i></a></ol></nav><div class=td-content><h1>CVMFS</h1><div class=lead>Neurodesk Singularity Containers on CVMFS</div><header class=article-meta></header><h2 id=install-the-cernvm-file-system-cvmfs>Install the CernVM File System (CVMFS)</h2><p>To begin, install CVMFS. Follow the official instructions here: <a href=https://cvmfs.readthedocs.io/en/stable/cpt-quickstart.html#getting-the-software target=_blank rel=noopener>https://cvmfs.readthedocs.io/en/stable/cpt-quickstart.html#getting-the-software</a></p><p>An example installation for Ubuntu in Windows Subsystem for Linux (WSL) would look like this:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install lsb-release
</span></span><span style=display:flex><span>wget https://ecsft.cern.ch/dist/cvmfs/cvmfs-release/cvmfs-release-latest_all.deb
</span></span><span style=display:flex><span>sudo dpkg -i cvmfs-release-latest_all.deb
</span></span><span style=display:flex><span>rm -f cvmfs-release-latest_all.deb
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install build-essential
</span></span><span style=display:flex><span>sudo apt-get install cvmfs</span></span></code></pre></div></div><p>Ubuntu 24.04 might have an issue with this, so try installing dependies manually:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>sudo apt install libattr1=1:2.5.2-1build1 libuuid1=2.39.3-9ubuntu6</span></span></code></pre></div></div><h2 id=configure-cvmfs>Configure CVMFS</h2><p>Once installed create the keys and configure the servers used:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mkdir -p /etc/cvmfs/keys/ardc.edu.au/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;-----BEGIN PUBLIC KEY-----
</span></span></span><span style=display:flex><span><span style=color:#0a3069>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwUPEmxDp217SAtZxaBep
</span></span></span><span style=display:flex><span><span style=color:#0a3069>Bi2TQcLoh5AJ//HSIz68ypjOGFjwExGlHb95Frhu1SpcH5OASbV+jJ60oEBLi3sD
</span></span></span><span style=display:flex><span><span style=color:#0a3069>qA6rGYt9kVi90lWvEjQnhBkPb0uWcp1gNqQAUocybCzHvoiG3fUzAe259CrK09qR
</span></span></span><span style=display:flex><span><span style=color:#0a3069>pX8sZhgK3eHlfx4ycyMiIQeg66AHlgVCJ2fKa6fl1vnh6adJEPULmn6vZnevvUke
</span></span></span><span style=display:flex><span><span style=color:#0a3069>I6U1VcYTKm5dPMrOlY/fGimKlyWvivzVv1laa5TAR2Dt4CfdQncOz+rkXmWjLjkD
</span></span></span><span style=display:flex><span><span style=color:#0a3069>87WMiTgtKybsmMLb2yCGSgLSArlSWhbMA0MaZSzAwE9PJKCCMvTANo5644zc8jBe
</span></span></span><span style=display:flex><span><span style=color:#0a3069>NQIDAQAB
</span></span></span><span style=display:flex><span><span style=color:#0a3069>-----END PUBLIC KEY-----&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/cvmfs/keys/ardc.edu.au/neurodesk.ardc.edu.au.pub
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;CVMFS_USE_GEOAPI=yes&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/cvmfs/config.d/neurodesk.ardc.edu.au.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;CVMFS_SERVER_URL=&#34;http://cvmfs-geoproximity.neurodesk.org/cvmfs/@fqrn@;http://cvmfs.neurodesk.org/cvmfs/@fqrn@;http://s1osggoc-cvmfs.openhtc.io:8080/cvmfs/@fqrn@;http://s1fnal-cvmfs.openhtc.io:8080/cvmfs/@fqrn@;http://s1sampa-cvmfs.openhtc.io:8080/cvmfs/@fqrn@;http://s1brisbane-cvmfs.openhtc.io/cvmfs/@fqrn@;http://s1nikhef-cvmfs.openhtc.io/cvmfs/@fqrn@;http://s1bnl-cvmfs.openhtc.io/cvmfs/@fqrn@;http://s1perth-cvmfs.openhtc.io/cvmfs/@fqrn@&#34;&#39;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/cvmfs/config.d/neurodesk.ardc.edu.au.conf 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;CVMFS_KEYS_DIR=&#34;/etc/cvmfs/keys/ardc.edu.au/&#34;&#39;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/cvmfs/config.d/neurodesk.ardc.edu.au.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;CVMFS_HTTP_PROXY=DIRECT&#34;</span> <span style=color:#1f2328>|</span> sudo tee  /etc/cvmfs/default.local
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;CVMFS_QUOTA_LIMIT=5000&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a  /etc/cvmfs/default.local
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_config setup</span></span></code></pre></div></div><p>You can use the list above, but you can also pick a subset of servers that are close to you or fit your usecase better. To better understand what to choose, we use the following CVMFS server setup:</p><p>These CVMFS Stratum 1 servers are hosted by the Open Science Grid and every server has a Cloudflare CDN alias that is correctly located through the Maxmind GEOAPI service in the CVMFS client:</p><ul><li>Illinois, USA: s1fnal-cvmfs.openhtc.io:8080 -> cvmfs-s1fnal.opensciencegrid.org:8000</li><li>Sao Paulo, Brazil: s1sampa-cvmfs.openhtc.io:8080 -> sampacs01.if.usp.br:8000</li><li>Nebraska, USA: s1osggoc-cvmfs.openhtc.io:8080 -> cvmfs-s1goc.opensciencegrid.org:8000</li><li>New York, US: s1bnl-cvmfs.openhtc.io:8080 -> cvmfs-s1bnl.opensciencegrid.org:8000</li><li>Oxford, UK: s1ral-cvmfs.openhtc.io:8080 -> cvmfs-egi.gridpp.rl.ac.uk:8000</li></ul><p>This server is currently down:</p><ul><li>Netherlands, Europe: s1nikhef-cvmfs.openhtc.io:8080 -> cvmfs01.nikhef.nl:8000</li></ul><p>This CVMFS Stratum 1 server is hosted by ARDC Nectar Cloud and also has a Cloudflare CDN alias.</p><ul><li>Brisbane, Queensland, Australia: s1brisbane-cvmfs.openhtc.io -> cvmfs-brisbane.neurodesk.org</li><li>Sydney, New South Wales, Australia: s1sydney-cvmfs.openhtc.io -> cvmfs-sydney.neurodesk.org</li><li>Melbourne, Victoria, Australia: s1melbourne-cvmfs.openhtc.io -> cvmfs-melbourne.neurodesk.org</li></ul><p>This CVMFS Stratum 1 server is hosted by Pawseys Nimbus Cloud and also has a Cloudflare CDN alias.</p><ul><li>Perth, Western Australia, Australia: s1perth-cvmfs.openhtc.io -> cvmfs-perth.neurodesk.org</li></ul><p>This CVMFS Stratum 1 server is hosted by AWS:</p><ul><li>Frankfurt, Germany: cvmfs-frankfurt.neurodesk.org -> ec2-3-72-92-91.eu-central-1.compute.amazonaws.com</li></ul><p>This CMVFS Stratum 1 server is hosted by Jetstream:</p><ul><li>Indiana, US: cvmfs-jetstream.neurodesk.org -> 149.165.172.188</li></ul><p>Then we have a one geolocation-steered domain: cvmfs-geoproximity.neurodesk.org</p><ul><li><p>153.02 (Longitude),-27.46 (Latitude) -> cvmfs-brisbane.neurodesk.org</p></li><li><p>151.2073, -33.8678 -> cvmfs-sydney.neurodesk.org</p></li><li><p>115.86,-31.95 -> cvmfs-perth.neurodesk.org</p></li><li><p>-88.30,41.84 -> cvmfs-s1fnal.opensciencegrid.org</p></li><li><p>-96.66,40.83 -> cvmfs-s1goc.opensciencegrid.org</p></li><li><p>-1.26, 51.75 -> cvmfs-egi.gridpp.rl.ac.uk</p></li><li><p>4.90,52.37 -> cvmfs01.nikhef.nl</p></li><li><p>8.68,50.11 -> ec2-3-72-92-91.eu-central-1.compute.amazonaws.com</p></li><li><p>-46.63,-23.54 -> sampacs01.if.usp.br</p></li><li><p>-86.45,39.22 -> cvmfs-jetstream.neurodesk.org</p></li><li><p>145.13,-37.92 -> cvmfs-melbourne.neurodesk.org</p></li><li><p>Every location has a health check attached to it and doesn&rsquo;t forward to it if the destination is not working.</p></li></ul><p>Then we have 3 direct URLS without CDNs as well that are geolocation-steered:
cvmfs1.neurodesk.org:
South America -> sampacs01.if.usp.br
North America -> cvmfs-s1fnal.opensciencegrid.org
Default -> cvmfs-brisbane.neurodesk.org
Europe -> ec2-3-72-92-91.eu-central-1.compute.amazonaws.com
Asia -> cvmfs-perth.neurodesk.org</p><p>cvmfs2.neurodesk.org:
North America -> cvmfs-s1goc.opensciencegrid.org
Europe -> cvmfs01.nikhef.nl
Default -> cvmfs-s1goc.opensciencegrid.org</p><p>cvmfs3.neurodesk.org:
North America -> cvmfs-s1bnl.opensciencegrid.org
Asia -> cvmfs-brisbane.neurodesk.org
Default -> cvmfs-s1bnl.opensciencegrid.org
Oceania -> cvmfs-perth.neurodesk.org</p><p>These servers are currently NOT working and are NOT YET mirroring our repository (we are waiting for RAL to come back online, then the others will mirror that):</p><ul><li>Swinburne, Australia: s1swinburne-cvmfs.openhtc.io:8080 -> cvmfs-s1.hpc.swin.edu.au:8000</li><li>China: s1ihep-cvmfs.openhtc.io:8080 -> cvmfs-stratum-one.ihep.ac.cn:8000</li></ul><h3 id=for-wsl-users>For WSL users</h3><p>You will need to run this for each new WSL session:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cvmfs_config wsl2_start</span></span></code></pre></div></div><p>Test if the connection works:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cvmfs_config chksetup
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ls /cvmfs/neurodesk.ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_talk -i neurodesk.ardc.edu.au host info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cvmfs_config stat -v neurodesk.ardc.edu.au</span></span></code></pre></div></div><h3 id=for-ubuntu-2204-users>For Ubuntu 22.04 users</h3><p>If configuring CVMFS returns the following error:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Error: failed to load cvmfs library, tried: <span style=color:#0a3069>&#39;./libcvmfs_fuse3_stub.so&#39;</span> <span style=color:#0a3069>&#39;/usr/lib/libcvmfs_fuse3_stub.so&#39;</span> <span style=color:#0a3069>&#39;/usr/lib64/libcvmfs_fuse3_stub.so&#39;</span> <span style=color:#0a3069>&#39;./libcvmfs_fuse_stub.so&#39;</span> <span style=color:#0a3069>&#39;/usr/lib/libcvmfs_fuse_stub.so&#39;</span> <span style=color:#0a3069>&#39;/usr/lib64/libcvmfs_fuse_stub.so&#39;</span>
</span></span><span style=display:flex><span>./libcvmfs_fuse3_stub.so: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>/usr/lib/libcvmfs_fuse3_stub.so: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>/usr/lib64/libcvmfs_fuse3_stub.so: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>./libcvmfs_fuse_stub.so: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>libcrypto.so.1.1: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>/usr/lib64/libcvmfs_fuse_stub.so: cannot open shared object file: No such file or directory
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Failed to <span style=color:#6639ba>read</span> CernVM-FS configuration</span></span></code></pre></div></div><p>A temporary workaround is:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://mirror.umd.edu/ubuntu/ubuntu/pool/main/o/openssl/libssl1.1_1.1.1f-1ubuntu2.15_amd64.deb
</span></span><span style=display:flex><span>dpkg -i libssl1.1_1.1.1f-1ubuntu2.15_amd64.deb</span></span></code></pre></div></div><h2 id=install-singularityapptainer>Install singularity/apptainer</h2><p>e.g for Ubuntu/Debian install apptainer:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install -y software-properties-common
</span></span><span style=display:flex><span>sudo add-apt-repository -y ppa:apptainer/ppa
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install -y apptainer
</span></span><span style=display:flex><span>sudo apt-get install -y apptainer-suid</span></span></code></pre></div></div><p>e.g. for Ubuntu/Debian install singularity:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>VERSION</span><span style=color:#0550ae>=</span>1.18.3 <span style=color:#953800>OS</span><span style=color:#0550ae>=</span>linux <span style=color:#953800>ARCH</span><span style=color:#0550ae>=</span>amd64 <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    wget https://dl.google.com/go/go<span style=color:#953800>$VERSION</span>.<span style=color:#953800>$OS</span>-<span style=color:#953800>$ARCH</span>.tar.gz <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    sudo tar -C /usr/local -xzvf go<span style=color:#953800>$VERSION</span>.<span style=color:#953800>$OS</span>-<span style=color:#953800>$ARCH</span>.tar.gz <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    rm go<span style=color:#953800>$VERSION</span>.<span style=color:#953800>$OS</span>-<span style=color:#953800>$ARCH</span>.tar.gz
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;export GOPATH=${HOME}/go&#39;</span> &gt;&gt; ~/.bashrc <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    <span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;export PATH=/usr/local/go/bin:${PATH}:${GOPATH}/bin&#39;</span> &gt;&gt; ~/.bashrc <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    <span style=color:#6639ba>source</span> ~/.bashrc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go get -d github.com/sylabs/singularity
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>VERSION</span><span style=color:#0550ae>=</span>v3.10.0 <span style=color:#57606a># or another tag or branch if you like &amp;&amp; \</span>
</span></span><span style=display:flex><span>    <span style=color:#6639ba>cd</span> <span style=color:#953800>$GOPATH</span>/src/github.com/sylabs/singularity <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    git fetch <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    git checkout <span style=color:#953800>$VERSION</span> <span style=color:#57606a># omit this command to install the latest bleeding edge code from master</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>VERSION</span><span style=color:#0550ae>=</span>3.10.0 <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#57606a># adjust this as necessary \</span>
</span></span><span style=display:flex><span>    mkdir -p <span style=color:#953800>$GOPATH</span>/src/github.com/sylabs <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    <span style=color:#6639ba>cd</span> <span style=color:#953800>$GOPATH</span>/src/github.com/sylabs <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    wget https://github.com/sylabs/singularity/releases/download/v<span style=color:#0a3069>${</span><span style=color:#953800>VERSION</span><span style=color:#0a3069>}</span>/singularity-ce-<span style=color:#0a3069>${</span><span style=color:#953800>VERSION</span><span style=color:#0a3069>}</span>.tar.gz <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    tar -xzf singularity-ce-<span style=color:#0a3069>${</span><span style=color:#953800>VERSION</span><span style=color:#0a3069>}</span>.tar.gz <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\7</span><span style=color:#0550ae>89</span>
</span></span><span style=display:flex><span>    <span style=color:#6639ba>cd</span> ./singularity-ce-<span style=color:#0a3069>${</span><span style=color:#953800>VERSION</span><span style=color:#0a3069>}</span> <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    ./mconfig --without-seccomp --without-conmon
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>./mconfig --without-seccomp --without-conmon <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    make -C ./builddir <span style=color:#0550ae>&amp;&amp;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>    sudo make -C ./builddir install
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>PATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;/usr/local/singularity/bin:</span><span style=color:#0a3069>${</span><span style=color:#953800>PATH</span><span style=color:#0a3069>}</span><span style=color:#0a3069>&#34;</span></span></span></code></pre></div></div><h2 id=use-of-neurodesk-cvmfs-containers>Use of Neurodesk CVMFS containers</h2><p>The containers are now available in /cvmfs/neurodesk.ardc.edu.au/containers/ and can be started with:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity shell /cvmfs/neurodesk.ardc.edu.au/containers/itksnap_3.8.0_20201208/itksnap_3.8.0_20201208.simg</span></span></code></pre></div></div><p>make sure that SINGULARITY_BINDPATH includes the directories you want to work with:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>SINGULARITY_BINDPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;/cvmfs,/mnt,/home&#39;</span></span></span></code></pre></div></div><h3 id=for-wsl-users-1>For WSL users</h3><p>The homedirectory might not be supported. Avoid mounting it with</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>singularity shell --no-home /cvmfs/neurodesk.ardc.edu.au/containers/itksnap_3.8.0_20201208/itksnap_3.8.0_20201208.simg</span></span></code></pre></div></div><p>or configure permanently:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vi /etc/singularity/singularity.conf</span></span></code></pre></div></div><p>set</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount <span style=color:#953800>home</span> <span style=color:#0550ae>=</span> no</span></span></code></pre></div></div><h2 id=install-module-system>Install module system</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install lmod</span></span></code></pre></div></div><p>or</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install lmod</span></span></code></pre></div></div><h2 id=use-of-containers-in-the-module-system>Use of containers in the module system</h2><h3 id=configuration-for-module-system>Configuration for module system</h3><p>Create a the new file <code>/usr/share/module.sh</code> with the content (NOTE: update the version, here 6.6, with your lmod version, e.g. 6.6 (Ubuntu 20.04/22.04), 8.6.19 (Ubuntu 24.04)):</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># system-wide profile.modules                                          #</span>
</span></span><span style=display:flex><span><span style=color:#57606a># Initialize modules for all sh-derivative shells                      #</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#----------------------------------------------------------------------#</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>trap</span> <span style=color:#0a3069>&#34;&#34;</span> <span style=color:#0550ae>1</span> <span style=color:#0550ae>2</span> <span style=color:#0550ae>3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>case</span> <span style=color:#0a3069>&#34;</span><span style=color:#953800>$0</span><span style=color:#0a3069>&#34;</span> in
</span></span><span style=display:flex><span>    -bash<span style=color:#1f2328>|</span>bash<span style=color:#1f2328>|</span>*/bash<span style=color:#0550ae>)</span> . /usr/share/lmod/YOURLMODVERSION_HERE/init/bash <span style=color:#1f2328>;;</span>
</span></span><span style=display:flex><span>       -ksh<span style=color:#1f2328>|</span>ksh<span style=color:#1f2328>|</span>*/ksh<span style=color:#0550ae>)</span> . /usr/share/lmod/YOURLMODVERSION_HERE/init/ksh <span style=color:#1f2328>;;</span>
</span></span><span style=display:flex><span>       -zsh<span style=color:#1f2328>|</span>zsh<span style=color:#1f2328>|</span>*/zsh<span style=color:#0550ae>)</span> . /usr/share/lmod/YOURLMODVERSION_HERE/init/zsh <span style=color:#1f2328>;;</span>
</span></span><span style=display:flex><span>          -sh<span style=color:#1f2328>|</span>sh<span style=color:#1f2328>|</span>*/sh<span style=color:#0550ae>)</span> . /usr/share/lmod/YOURLMODVERSION_HERE/init/sh <span style=color:#1f2328>;;</span>
</span></span><span style=display:flex><span>                    *<span style=color:#0550ae>)</span> . /usr/share/lmod/YOURLMODVERSION_HERE/init/sh <span style=color:#1f2328>;;</span>  <span style=color:#57606a># default for scripts</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>esac</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>trap</span> - <span style=color:#0550ae>1</span> <span style=color:#0550ae>2</span> <span style=color:#0550ae>3</span></span></span></code></pre></div></div><h3 id=make-the-module-system-usable-in-the-shell>Make the module system usable in the shell</h3><p>Add the following lines to your <code>~/.bashrc</code> file or to <code>/etc/bash.bashrc</code> for a global install:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#cf222e>if</span> <span style=color:#0550ae>[</span> -f <span style=color:#0a3069>&#39;/usr/share/module.sh&#39;</span> <span style=color:#0550ae>]</span><span style=color:#1f2328>;</span> <span style=color:#cf222e>then</span> <span style=color:#6639ba>source</span> /usr/share/module.sh<span style=color:#1f2328>;</span> <span style=color:#cf222e>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>if</span> <span style=color:#0550ae>[</span> -d /cvmfs/neurodesk.ardc.edu.au/neurodesk-modules <span style=color:#0550ae>]</span><span style=color:#1f2328>;</span> <span style=color:#cf222e>then</span>
</span></span><span style=display:flex><span>        <span style=color:#57606a># export MODULEPATH=&#34;/cvmfs/neurodesk.ardc.edu.au/neurodesk-modules&#34;</span>
</span></span><span style=display:flex><span>        module use /cvmfs/neurodesk.ardc.edu.au/neurodesk-modules/*
</span></span><span style=display:flex><span><span style=color:#cf222e>else</span>
</span></span><span style=display:flex><span>        <span style=color:#6639ba>export</span> <span style=color:#953800>MODULEPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;/neurodesktop-storage/containers/modules&#34;</span>              
</span></span><span style=display:flex><span>        module use <span style=color:#953800>$MODULEPATH</span>
</span></span><span style=display:flex><span>        <span style=color:#6639ba>export</span> <span style=color:#953800>CVMFS_DISABLE</span><span style=color:#0550ae>=</span><span style=color:#6639ba>true</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>if</span> <span style=color:#0550ae>[</span> -f <span style=color:#0a3069>&#39;/usr/share/module.sh&#39;</span> <span style=color:#0550ae>]</span><span style=color:#1f2328>;</span> <span style=color:#cf222e>then</span>
</span></span><span style=display:flex><span>        <span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;Run &#34;ml av&#34; to see which tools are available - use &#34;ml &lt;tool&gt;&#34; to use them in this shell.&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>if</span> <span style=color:#0550ae>[</span> -v <span style=color:#0a3069>&#34;</span><span style=color:#953800>$CVMFS_DISABLE</span><span style=color:#0a3069>&#34;</span> <span style=color:#0550ae>]</span><span style=color:#1f2328>;</span> <span style=color:#cf222e>then</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>if</span> <span style=color:#0550ae>[</span> ! -d <span style=color:#953800>$MODULEPATH</span> <span style=color:#0550ae>]</span><span style=color:#1f2328>;</span> <span style=color:#cf222e>then</span>
</span></span><span style=display:flex><span>                        <span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;Neurodesk tools not yet downloaded. Choose tools to install from the Application menu.&#39;</span>
</span></span><span style=display:flex><span>                <span style=color:#cf222e>fi</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>fi</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>fi</span></span></span></code></pre></div></div><p>Restart the current shell or run</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>source</span> ~/.bashrc</span></span></code></pre></div></div><h2 id=use-of-containers-in-the-module-system-1>Use of containers in the module system</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>SINGULARITY_BINDPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;/cvmfs,/mnt,/home&#39;</span>
</span></span><span style=display:flex><span>module use /cvmfs/neurodesk.ardc.edu.au/neurodesk-modules/*
</span></span><span style=display:flex><span>ml fsl
</span></span><span style=display:flex><span>fslmaths</span></span></code></pre></div></div><h2 id=troubleshooting-and-diagnostics>Troubleshooting and diagnostics</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#57606a># Check servers</span>
</span></span><span style=display:flex><span>sudo cvmfs_talk -i neurodesk.ardc.edu.au host probe
</span></span><span style=display:flex><span>sudo cvmfs_talk -i neurodesk.ardc.edu.au host info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Change settings</span>
</span></span><span style=display:flex><span>sudo touch /var/log/cvmfs_debug.log.cachemgr
</span></span><span style=display:flex><span>sudo chown cvmfs /var/log/cvmfs_debug.log.cachemgr
</span></span><span style=display:flex><span>sudo touch /var/log/cvmfs_debug.log
</span></span><span style=display:flex><span>sudo chown cvmfs /var/log/cvmfs_debug.log
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo vi /etc/cvmfs/config.d/neurodesk.ardc.edu.au.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> -e <span style=color:#0a3069>&#34;\nCVMFS_DEBUGLOG=/var/log/cvmfs_debug.log&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/cvmfs/default.local
</span></span><span style=display:flex><span>cat /etc/cvmfs/default.local
</span></span><span style=display:flex><span>sudo cvmfs_config umount
</span></span><span style=display:flex><span>sudo service autofs stop
</span></span><span style=display:flex><span>sudo mount -t cvmfs neurodesk.ardc.edu.au /cvmfs/neurodesk.ardc.edu.au
</span></span><span style=display:flex><span><span style=color:#57606a># check if new settings are applied correctly:</span>
</span></span><span style=display:flex><span>cvmfs_config showconfig neurodesk.ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat /var/log/cvmfs_debug.log
</span></span><span style=display:flex><span>cat /var/log/cvmfs_debug.log.cachemgr </span></span></code></pre></div></div><div class=section-index></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Mastodon aria-label=Mastodon><a target=_blank rel=noopener href=https://masto.ai/@Neurodesk aria-label=Mastodon><i class="fab fa-mastodon responsive-icon"></i>&nbsp;&nbsp;Mastodon</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Discussion aria-label=Discussion><a target=_blank rel=noopener href=https://github.com/orgs/NeuroDesk/discussions aria-label=Discussion><i class="fa fa-envelope responsive-icon"></i>&nbsp;&nbsp;Discussion</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Acknowledgements aria-label=Acknowledgements><a target=_blank rel=noopener href=https://neurodesk.org/overview/acknowledgement/ aria-label=Acknowledgements><i class="fa fa-handshake responsive-icon"></i>&nbsp;&nbsp;Acknowledgements</a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Metrics aria-label=Metrics><a target=_blank rel=noopener href=https://neurodesk.org/docs/overview/metrics aria-label=Metrics><i class="fa fa-signal responsive-icon"></i>&nbsp;&nbsp;Metrics</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Uptime aria-label=Uptime><a target=_blank rel=noopener href=https://stats.uptimerobot.com/NBE38IZWZM aria-label=Uptime><i class="fa fa-circle responsive-icon"></i>&nbsp;&nbsp;Uptime</a></li></ul></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://neurodesk.org/js/main.min.371147b5f79a80912e5b0a2cd8f59889c6f0ac501947707b50f470099ce2141c.js integrity="sha256-NxFHtfeagJEuWwos2PWYicbwrFAZR3B7UPRwCZziFBw=" crossorigin=anonymous></script><script defer src=https://neurodesk.org/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.8.2 integrity="sha512-lsD+XVzdBI6ZquXc8gqbw0/bgrfIsMJwY/8xvmvbN+U3gZSeG7BXQoCq4zv/yCmntR2GLHtgB+bD4ESPsKIbIA==" crossorigin=anonymous></script><script type=text/javascript>const containers=["#docsearch-0","#docsearch-1"];for(let e of containers)docsearch({container:e,appId:"P5JEPQ5LZ2",apiKey:"56c6d9a954f7df2a98dcedb2763af8c4",indexName:"neurodesk"})</script><script src=https://neurodesk.org/js/tabpane-persist.js></script></body></html>