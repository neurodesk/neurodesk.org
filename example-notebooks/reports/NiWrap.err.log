Traceback (most recent call last):
  File "/opt/conda/lib/python3.12/site-packages/jupyter_core/utils/__init__.py", line 154, in wrapped
    asyncio.get_running_loop()
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/conda/lib/python3.12/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/opt/conda/lib/python3.12/site-packages/nbclient/client.py", line 1319, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/jupyter_core/utils/__init__.py", line 158, in wrapped
    return loop.run_until_complete(inner)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/asyncio/base_events.py", line 691, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/opt/conda/lib/python3.12/site-packages/nbclient/client.py", line 709, in async_execute
    await self.async_execute_cell(
  File "/opt/conda/lib/python3.12/site-packages/nbclient/client.py", line 1062, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/opt/conda/lib/python3.12/site-packages/nbclient/client.py", line 918, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
# --- Define File Paths ---
DATASET_DIR = Path("ds004496")
SUBJECT_ID = "sub-01"

# The root directory of the Ciftify derivatives
deriv_dir = DATASET_DIR / "derivatives" / "ciftify"

# 1. Input File: The statistical map
beta_map_path = (
    deriv_dir
    / SUBJECT_ID
    / "results"
    / "ses-floc_task-floc"
    / "ses-floc_task-floc_beta.dscalar.nii"
)

# 2. Input Files: The surface geometry files.
surface_dir = deriv_dir / SUBJECT_ID / "standard_fsLR_surface"
left_surf_path = surface_dir / f"{SUBJECT_ID}.L.midthickness.32k_fs_LR.surf.gii"
right_surf_path = surface_dir / f"{SUBJECT_ID}.R.midthickness.32k_fs_LR.surf.gii"
left_infl_path = surface_dir / f"{SUBJECT_ID}.L.inflated.32k_fs_LR.surf.gii"
right_infl_path = surface_dir / f"{SUBJECT_ID}.R.inflated.32k_fs_LR.surf.gii"
sulcal_depth_path = surface_dir / f"{SUBJECT_ID}.sulc.32k_fs_LR.dscalar.nii"


# --- Verify files exist before we start ---
assert left_surf_path.exists(), f"Left mid-surface not found: {left_surf_path}"
assert right_surf_path.exists(), f"Right mid-surface not found: {right_surf_path}"
assert left_infl_path.exists(), f"Left inflated surface not found: {left_surf_path}"
assert right_infl_path.exists(), f"Right inflated surface not found: {right_surf_path}"
assert sulcal_depth_path.exists(), f"Sulcal depth not found: {sulcal_depth_path}"
print("âœ… All necessary files found. Ready for analysis.")

------------------


[31m---------------------------------------------------------------------------[39m
[31mAssertionError[39m                            Traceback (most recent call last)
[36mCell[39m[36m [39m[32mIn[6][39m[32m, line 27[39m
[32m     23[39m sulcal_depth_path = surface_dir / [33mf[39m[33m"[39m[38;5;132;01m{[39;00mSUBJECT_ID[38;5;132;01m}[39;00m[33m.sulc.32k_fs_LR.dscalar.nii[39m[33m"[39m
[32m     26[39m [38;5;66;03m# --- Verify files exist before we start ---[39;00m
[32m---> [39m[32m27[39m [38;5;28;01massert[39;00m left_surf_path.exists(), [33mf[39m[33m"[39m[33mLeft mid-surface not found: [39m[38;5;132;01m{[39;00mleft_surf_path[38;5;132;01m}[39;00m[33m"[39m
[32m     28[39m [38;5;28;01massert[39;00m right_surf_path.exists(), [33mf[39m[33m"[39m[33mRight mid-surface not found: [39m[38;5;132;01m{[39;00mright_surf_path[38;5;132;01m}[39;00m[33m"[39m
[32m     29[39m [38;5;28;01massert[39;00m left_infl_path.exists(), [33mf[39m[33m"[39m[33mLeft inflated surface not found: [39m[38;5;132;01m{[39;00mleft_surf_path[38;5;132;01m}[39;00m[33m"[39m

[31mAssertionError[39m: Left mid-surface not found: ds004496/derivatives/ciftify/sub-01/standard_fsLR_surface/sub-01.L.midthickness.32k_fs_LR.surf.gii

